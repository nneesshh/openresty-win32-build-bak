syntax = "proto2";
option cc_enable_arenas = true;

import "BaseStruct.proto";

package sg;


message ControllerOperation {
	required int32  index = 1;  //控制者序号
	optional float  timestamp = 2;  //操作时间戳
	optional bytes  data = 4; //操作具体内容
}

enum PVP_BATTLE_CMD {
    READY = 1;   //准备
    CONTROL = 2;  //控制
    OVER = 3; //结束
}

message PVPBattleRequest {  
    required PVP_BATTLE_CMD                  cmd = 1; 
    optional int32                           battle_result = 2;
	repeated ControllerOperation             operation = 3; //操作
}

message PVPBattleStartNotify { 
	required int32             frame_index = 1; //帧号
	optional uint64            random_seed = 2;
}

message PVPBattleControlNotify { 
	required int32             frame_index = 1; //帧号
    required float time_now = 2;   //战斗时间
	repeated ControllerOperation          operations = 3;//操作列表
}

message PVPBattleOverNotify { 
	required int32             result = 1;
	optional int32             score = 2;
	optional Reward            reward = 3;
}
