define(["translations","pgadmin.browser.endpoints","pgadmin.browser.utils","pgadmin.browser.messages"],function(e,t,r,a){return webpackJsonp([2,3],{145:function(e,t,r){"use strict";var a,n;a=[r(0),r(1),r(8)],void 0!==(n=function(e,t,r){return function(e,a){if(t.isUndefined(a)||t.isNull(a))return!0;r.startsWith(a,"coll-")&&(a=a.replace("coll-",""));var n=["server_group","server","catalog_object_column"];if(t.indexOf(n,a)>=0)return!0;var i=e.get_preference("browser","show_node_"+a);return!i||i.value}}.apply(t,a))&&(e.exports=n)},146:function(e,t){e.exports=a},147:function(e,t,r){"use strict";var a,n;a=[r(1),r(8),r(3),r(0),r(45),r(20),r(63)],void 0!==(n=function(e,t,r,a,n,i,o){var s=r.Browser=r.Browser||{};return s.keyboardNavigation=s.keyboardNavigation||{},e.extend(s.keyboardNavigation,{init:function(){n.reset(),s.preferences_cache.length>0&&(this.keyboardShortcut={file_shortcut:i.parseShortcutValue(s.get_preference("browser","main_menu_file").value),object_shortcut:i.parseShortcutValue(s.get_preference("browser","main_menu_object").value),tools_shortcut:i.parseShortcutValue(s.get_preference("browser","main_menu_tools").value),help_shortcut:i.parseShortcutValue(s.get_preference("browser","main_menu_help").value),left_tree_shortcut:i.parseShortcutValue(s.get_preference("browser","browser_tree").value),tabbed_panel_backward:i.parseShortcutValue(s.get_preference("browser","tabbed_panel_backward").value),tabbed_panel_forward:i.parseShortcutValue(s.get_preference("browser","tabbed_panel_forward").value),sub_menu_query_tool:i.parseShortcutValue(s.get_preference("browser","sub_menu_query_tool").value),sub_menu_view_data:i.parseShortcutValue(s.get_preference("browser","sub_menu_view_data").value),sub_menu_properties:i.parseShortcutValue(s.get_preference("browser","sub_menu_properties").value),sub_menu_create:i.parseShortcutValue(s.get_preference("browser","sub_menu_create").value),sub_menu_delete:i.parseShortcutValue(s.get_preference("browser","sub_menu_delete").value),context_menu:i.parseShortcutValue(s.get_preference("browser","context_menu").value),direct_debugging:i.parseShortcutValue(s.get_preference("browser","direct_debugging").value)},this.shortcutMethods={bindMainMenu:{shortcuts:[this.keyboardShortcut.file_shortcut,this.keyboardShortcut.object_shortcut,this.keyboardShortcut.tools_shortcut,this.keyboardShortcut.help_shortcut]},bindRightPanel:{shortcuts:[this.keyboardShortcut.tabbed_panel_backward,this.keyboardShortcut.tabbed_panel_forward]},bindMainMenuLeft:{shortcuts:"left",bindElem:".pg-navbar"},bindMainMenuRight:{shortcuts:"right",bindElem:".pg-navbar"},bindMainMenuUpDown:{shortcuts:["up","down"]},bindLeftTree:{shortcuts:this.keyboardShortcut.left_tree_shortcut},bindSubMenuQueryTool:{shortcuts:this.keyboardShortcut.sub_menu_query_tool},bindSubMenuViewData:{shortcuts:this.keyboardShortcut.sub_menu_view_data},bindSubMenuProperties:{shortcuts:this.keyboardShortcut.sub_menu_properties},bindSubMenuCreate:{shortcuts:this.keyboardShortcut.sub_menu_create},bindSubMenuDelete:{shortcuts:this.keyboardShortcut.sub_menu_delete},bindContextMenu:{shortcuts:this.keyboardShortcut.context_menu},bindDirectDebugging:{shortcuts:this.keyboardShortcut.direct_debugging}},this.bindShortcuts())},bindShortcuts:function(){var t=this;e.each(t.shortcutMethods,function(e,r){t._bindWithMousetrap(e.shortcuts,t[r],e.bindElem)})},_bindWithMousetrap:function(e,t,r){var a=this;if(r){var i=document.querySelector(r);n(i).bind(e,function(){t.apply(this,arguments)}.bind(i))}else n.bind(e,function(){t.apply(a,arguments)})},attachShortcut:function(e,t,r){this._bindWithMousetrap(e,t,r)},attachDialogTabNavigatorShortcut:function(e,t){var r=e.on_keyboard_event,a=e.dialog.el;a?n(a).bind(t,function(){r.apply(e,arguments)}.bind(a)):n.bind(t,function(){r.apply(e,arguments)})},detachShortcut:function(e,t){t?n(t).unbind(e):n.unbind(e)},bindMainMenu:function(e,t){var r=this.keyboardShortcut;t==r.file_shortcut&&a("#mnu_file a.dropdown-toggle").dropdown("toggle"),t==r.object_shortcut&&a("#mnu_obj a.dropdown-toggle").first().dropdown("toggle"),t==r.tools_shortcut&&a("#mnu_tools a.dropdown-toggle").dropdown("toggle"),t==r.help_shortcut&&a("#mnu_help a.dropdown-toggle").dropdown("toggle")},bindRightPanel:function(t,a){var n=r.Browser.docker.findPanels(),i=0,o=n.length,s=0,l=!1,u=this.keyboardShortcut;e.each(r.Browser.docker.findPanels(),function(e,t){e.isVisible()&&!l&&"browser"!=e._type&&(s=t,l=!0)}),a==u.tabbed_panel_backward?i=s>0?s-1:1:a==u.tabbed_panel_forward&&(i=s<o?s+1:o),r.Browser.docker.findPanels()[i].focus(),setTimeout(function(){document.activeElement instanceof HTMLIFrameElement&&document.activeElement.blur()},1e3)},bindMainMenuLeft:function(e){var t;if(a(e.target).hasClass("menu-link"))t=a(e.target).parent().parent().parent().prev(".dropdown");else{if(a(e.target).parent().hasClass("dropdown-submenu"))return void a(e.target).parent().toggleClass("open");t=a(e.target).parent().prev(".dropdown")}t.hasClass("hide")&&(t=t.prev(".dropdown")),t.find("a:first").dropdown("toggle")},bindMainMenuRight:function(e){var t;if(a(e.target).hasClass("menu-link"))t=a(e.target).parent().parent().parent().next(".dropdown");else{if(a(e.target).parent().hasClass("dropdown-submenu"))return void a(e.target).parent().toggleClass("open");t=a(e.target).parent().next(".dropdown")}t.hasClass("hide")&&(t=t.next(".dropdown")),t.find("a:first").dropdown("toggle")},bindMainMenuUpDown:function(e,t){"up"==t&&a(e.target).parent().prev().prev(".dropdown-submenu").length>0?a(e.target).parent().prev().prev(".dropdown-submenu").find("a:first").focus():a(e.target).parent().hasClass("dropdown-submenu")&&(a(e.target).parent().parent().parent().find("a:first").dropdown("toggle"),a(e.target).parent().parent().children().eq(2).find("a:first").focus())},bindLeftTree:function(){var e=this.getTreeDetails();a("#tree").focus(),e.t.focus(e.i),e.t.select(e.i)},bindSubMenuQueryTool:function(){var e=this.getTreeDetails();e.d&&r.DataGrid.show_query_tool("",e.i)},bindSubMenuViewData:function(){var e=this.getTreeDetails();e.d&&r.DataGrid.show_data_grid({mnuid:1},e.i)},bindSubMenuProperties:function(){var e=this.getTreeDetails();e.d&&1!=r.Browser.Nodes[e.t.itemData(e.i)._type].collection_node&&r.Browser.Node.callbacks.show_obj_properties.call(r.Browser.Nodes[e.t.itemData(e.i)._type],{action:"edit"})},bindSubMenuCreate:function(){var e=this.getTreeDetails();e.d&&1!=r.Browser.Nodes[e.t.itemData(e.i)._type].collection_node&&r.Browser.Node.callbacks.show_obj_properties.call(r.Browser.Nodes[e.t.itemData(e.i)._type],{action:"create"})},bindSubMenuDelete:function(){var e=this.getTreeDetails();e.d&&1!=r.Browser.Nodes[e.t.itemData(e.i)._type].collection_node&&r.Browser.Node.callbacks.delete_obj.call(r.Browser.Nodes[e.t.itemData(e.i)._type])},bindContextMenu:function(e){var t=this.getTreeDetails(),r=a(e.srcElement).find(".aciTreeEntry").position().left+70,n=a(e.srcElement).find(".aciTreeEntry").position().top+70;e=window.event,t.t.blur(t.i),a("#tree").blur(),t.i.children().contextMenu({x:r,y:n})},bindDirectDebugging:function(){var e=this.getTreeDetails(),t=e.t.itemData(e.i)._type;!e.d||"function"!=t&&"procedure"!=t||r.Tools.Debugger.can_debug(e.d,e.i,{debug_type:"direct"})&&r.Tools.Debugger.get_function_information(r.Browser.Nodes[t])},getTreeDetails:function(){var e=r.Browser.tree,t=e.selected().length>0?e.selected():e.first();return{t:e,i:t,d:t&&1==t.length?e.itemData(t):void 0}},getDialogTabNavigator:function(e){var t=s.get_preference("browser","dialog_tab_backward").value,r=s.get_preference("browser","dialog_tab_forward").value;return new o.dialogTabNavigator(e,t,r)}}),r.keyboardNavigation}.apply(t,a))&&(e.exports=n)},149:function(e,t,r){"use strict";var a,n;a=[r(2),r(5),r(0),r(1),r(11),r(3),r(4),r(10),r(12),r(7),r(23),r(88),r(65),r(150),r(21)],void 0!==(n=function(e,t,r,a,n,i,o,s,l,u,d,c,g,b){var p=d.default,_=window.wcDocker;null!=i.Browser.tree&&(i=i||window.pgAdmin||{});var f=i.Tools=i.Tools||{};if(f.DirectDebug)return f.DirectDebug;var h=new function(){};a.extend(h,s.Events,{enable:function(e,t){this.trigger("pgDebugger:button:state:"+e,t)},set_breakpoint:function(a,i,o){var s=t("debugger.set_breakpoint",{trans_id:a,line_no:i,set_type:o});r.ajax({url:s,method:"GET",success:function(e){e.data.status},error:function(){n.alert(e("Debugger Error"),e("Error while setting debugging breakpoint."))}})},UpdateBreakpoint:function(e){var t=this,r=t.GetBreakpointInformation(e);if(1!=r.length||-1!=r[0].linenumber){for(var a=new Array,n=0;n<r.length;n++)-1!=r[n].linenumber&&a.push(r[n].linenumber);for(n=0;n<a.length;n++){void 0!=f.DirectDebug.editor.lineInfo(a[n]-1).gutterMarkers?f.DirectDebug.editor.setGutterMarker(a[n]-1,"breakpoints",null):f.DirectDebug.editor.setGutterMarker(a[n]-1,"breakpoints",function(){var e=document.createElement("div");return e.style.color="#822",e.innerHTML="●",e}())}}},GetBreakpointInformation:function(a){var i="",o=t("debugger.execute_query",{trans_id:a,query_type:"get_breakpoints"});return r.ajax({url:o,method:"GET",async:!1,success:function(t){"Success"===t.data.status?i=t.data.result:"NotConnected"===t.data.status&&n.alert(e("Debugger Error"),e("Error while fetching breakpoint information."))},error:function(){n.alert(e("Debugger Error"),e("Error while fetching breakpoint information."))}}),i},start_execution:function(a,i){var o=this,s=t("debugger.start_execution",{trans_id:a,port_num:i});r.ajax({url:s,method:"GET",success:function(t){"Success"===t.data.status?o.execute_query(a):"NotConnected"===t.data.status&&n.alert(e("Debugger Error"),e("Error while starting debugging session."))},error:function(){n.alert(e("Debugger Error"),e("Error while starting debugging session."))}})},execute_query:function(a){var i=this,o=t("debugger.execute_query",{trans_id:a,query_type:"wait_for_breakpoint"});r.ajax({url:o,method:"GET",success:function(t){"Success"===t.data.status?(null!=t.data.result[0].src&&null!=t.data.result[0].linenumber&&(f.DirectDebug.editor.setValue(t.data.result[0].src),i.active_line_no=t.data.result[0].linenumber-2,f.DirectDebug.editor.addLineClass(t.data.result[0].linenumber-2,"wrap","CodeMirror-activeline-background")),i.GetStackInformation(a),f.DirectDebug.debug_type&&i.poll_end_execution_result(a)):"NotConnected"===t.data.status&&n.alert(e("Debugger Error"),e("Error while executing requested debugging information."))},error:function(){n.alert(e("Debugger Error"),e("Error while executing requested debugging information."))}})},GetLocalVariables:function(a){var i=this,o=t("debugger.execute_query",{trans_id:a,query_type:"get_variables"});r.ajax({url:o,method:"GET",success:function(t){"Success"===t.data.status?(i.AddLocalVariables(t.data.result),i.AddParameters(t.data.result),f.DirectDebug.debug_restarted&&(f.DirectDebug.debug_type&&i.poll_end_execution_result(a),f.DirectDebug.debug_restarted=!1)):"NotConnected"===t.data.status&&n.alert(e("Debugger Error"),e("Error while fetching variable information."))},error:function(){n.alert(e("Debugger Error"),e("Error while fetching variable information."))}})},GetStackInformation:function(a){var i=this,o=t("debugger.execute_query",{trans_id:a,query_type:"get_stack_info"});r.ajax({url:o,method:"GET",success:function(t){"Success"===t.data.status?(i.AddStackInformation(t.data.result),i.GetLocalVariables(f.DirectDebug.trans_id)):"NotConnected"===t.data.status&&n.alert(e("Debugger Error"),e("Error while fetching stack information."))},error:function(){n.alert(e("Debugger Error"),e("Error while fetching stack information."))}})},poll_result:function(a){var i=this;if(f.DirectDebug.is_polling_required){var o,s=t("debugger.poll_result",{trans_id:a});o=f.DirectDebug.polling_timeout_idle?1e3:200,setTimeout(function(){r.ajax({url:s,method:"GET",beforeSend:function(){r(".debugger-container").addClass("show_progress")},success:function(t){r(".debugger-container").removeClass("show_progress"),"Success"===t.data.status?null==t.data.result||0==t.data.result.length?i.poll_result(a):(void 0!=t.data.result[0].src||null!=t.data.result[0].src?(f.DirectDebug.polling_timeout_idle=!1,f.DirectDebug.docker.finishLoading(50),f.DirectDebug.editor.setValue(t.data.result[0].src),i.UpdateBreakpoint(a),f.DirectDebug.editor.removeLineClass(i.active_line_no,"wrap","CodeMirror-activeline-background"),f.DirectDebug.editor.addLineClass(t.data.result[0].linenumber-2,"wrap","CodeMirror-activeline-background"),i.active_line_no=t.data.result[0].linenumber-2,i.GetStackInformation(a)):f.DirectDebug.debug_type||f.DirectDebug.first_time_indirect_debug?(f.DirectDebug.polling_timeout_idle=!1,f.DirectDebug.docker.finishLoading(50),t.data.result[0].src!=f.DirectDebug.editor.getValue()&&(f.DirectDebug.editor.setValue(t.data.result[0].src),i.UpdateBreakpoint(a)),f.DirectDebug.editor.removeLineClass(i.active_line_no,"wrap","CodeMirror-activeline-background"),f.DirectDebug.editor.addLineClass(t.data.result[0].linenumber-2,"wrap","CodeMirror-activeline-background"),i.active_line_no=t.data.result[0].linenumber-2,i.GetStackInformation(a)):(f.DirectDebug.docker.finishLoading(50),void 0!=i.active_line_no&&f.DirectDebug.editor.removeLineClass(i.active_line_no,"wrap","CodeMirror-activeline-background"),i.clear_all_breakpoint(a),i.execute_query(a),f.DirectDebug.first_time_indirect_debug=!0,f.DirectDebug.polling_timeout_idle=!1),i.enable("stop",!0),i.enable("step_over",!0),i.enable("step_into",!0),i.enable("continue",!0),i.enable("toggle_breakpoint",!0),i.enable("clear_all_breakpoints",!0)):"Busy"===t.data.status?(f.DirectDebug.polling_timeout_idle=!0,f.DirectDebug.debug_type?i.poll_result(a):(f.DirectDebug.docker.startLoading(e("Waiting for another session to invoke the target...")),i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("continue",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),f.DirectDebug.first_time_indirect_debug=!1,i.poll_result(a))):"NotConnected"===t.data.status&&n.alert(e("Debugger Error"),e("Error while polling result."))},error:function(){n.alert(e("Debugger Error"),e("Error while polling result."))}})},o)}},update_messages:function(e){e=a.escape(e);var t="",r="";t=f.DirectDebug.messages_panel.$container.find(".messages").html(),r=t?(t+"\n"+e).replace(/(?:\r\n|\r|\n)/g,"<br />").replace(/(<br\ ?\/?>)+/g,"<br />"):e,f.DirectDebug.messages_panel.$container.find(".messages").html(r)},poll_end_execution_result:function(a){var i=this;if(f.DirectDebug.is_polling_required){var o,s=t("debugger.poll_end_execution_result",{trans_id:a});o=f.DirectDebug.polling_timeout_idle?1200:250,setTimeout(function(){r.ajax({url:s,method:"GET",success:function(t){"Success"===t.data.status?void 0==t.data.result?(f.DirectDebug.editor.removeLineClass(i.active_line_no,"wrap","CodeMirror-activeline-background"),f.DirectDebug.direct_execution_completed=!0,f.DirectDebug.polling_timeout_idle=!0,n.success(t.info,3),t.data.status_message&&i.update_messages(t.data.status_message),r(".debugger-container").removeClass("show_progress"),i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),i.enable("continue",!0),f.DirectDebug.is_polling_required=!1):null!=t.data.result&&(f.DirectDebug.editor.removeLineClass(i.active_line_no,"wrap","CodeMirror-activeline-background"),i.AddResults(t.data.col_info,t.data.result),f.DirectDebug.results_panel.focus(),f.DirectDebug.direct_execution_completed=!0,f.DirectDebug.polling_timeout_idle=!0,n.success(t.info,3),t.data.status_message&&i.update_messages(t.data.status_message),r(".debugger-container").removeClass("show_progress"),i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),i.enable("continue",!0),f.DirectDebug.is_polling_required=!1):"Busy"===t.data.status?(i.poll_end_execution_result(a),t.data.status_message&&i.update_messages(t.data.status_message)):"NotConnected"===t.data.status?n.alert(e("Debugger poll end execution error"),t.data.result):"ERROR"===t.data.status&&(f.DirectDebug.direct_execution_completed=!0,f.DirectDebug.editor.removeLineClass(i.active_line_no,"wrap","CodeMirror-activeline-background"),f.DirectDebug.is_user_aborted_debugging||n.error(t.info,3),t.data.status_message&&i.update_messages(t.data.status_message),f.DirectDebug.messages_panel.focus(),r(".debugger-container").removeClass("show_progress"),i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),f.DirectDebug.is_user_aborted_debugging||(i.enable("continue",!0),f.DirectDebug.is_user_aborted_debugging=!1),f.DirectDebug.is_polling_required=!1)},error:function(){n.alert(e("Debugger Error"),e("Error while polling result."))}})},o)}},Restart:function(a){var i=this,o=t("debugger.restart",{trans_id:a});i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),i.enable("continue",!1),f.DirectDebug.messages_panel.$container.find(".messages").html(""),r.ajax({url:o,success:function(o){var s=o.data.restart_debug?1:0;if(f.DirectDebug.polling_timeout_idle=!1,f.DirectDebug.is_polling_required=!0,i.poll_end_execution_result(a),i.poll_result(a),s&&(f.DirectDebug.debug_restarted=!0),o.data.result.require_input)c(o.data.result,s);else{var l=t("debugger.start_listener",{trans_id:a});r.ajax({url:l,method:"GET",success:function(){f.DirectDebug.debug_type&&i.poll_end_execution_result(a)},error:function(){n.alert(e("Debugger Error"),e("Error while polling result."))}})}},error:function(t){try{var a=r.parseJSON(t.responseText);0==a.success&&n.alert(e("Debugger Error"),a.errormsg)}catch(e){}}})},Continue:function(a){var i=this;if(i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),i.enable("continue",!1),f.DirectDebug.direct_execution_completed&&f.DirectDebug.direct_execution_completed==f.DirectDebug.polling_timeout_idle)i.Restart(a);else{var o=t("debugger.execute_query",{trans_id:a,query_type:"continue"});r.ajax({url:o,method:"GET",success:function(t){t.data.status?i.poll_result(a):n.alert(e("Debugger Error"),e("Error while executing continue in debugging session."))},error:function(){n.alert(e("Debugger Error"),e("Error while executing continue in debugging session."))}})}},Step_over:function(a){var i=this;i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),i.enable("continue",!1);var o=t("debugger.execute_query",{trans_id:a,query_type:"step_over"});r.ajax({url:o,method:"GET",success:function(t){t.data.status?i.poll_result(a):n.alert(e("Debugger Error"),e("Error while executing step over in debugging session."))},error:function(){n.alert(e("Debugger Error"),e("Error while executing step over in debugging session."))}})},Step_into:function(a){var i=this;i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),i.enable("continue",!1);var o=t("debugger.execute_query",{trans_id:a,query_type:"step_into"});r.ajax({url:o,method:"GET",success:function(t){t.data.status?i.poll_result(a):n.alert(e("Debugger Error"),e("Error while executing step into in debugging session."))},error:function(){n.alert(e("Debugger Error"),e("Error while executing step into in debugging session."))}})},Stop:function(a){var i=this;i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),i.enable("continue",!1);var o=t("debugger.execute_query",{trans_id:a,query_type:"abort_target"});r.ajax({url:o,method:"GET",success:function(t){t.data.status?(f.DirectDebug.editor.removeLineClass(i.active_line_no,"wrap","CodeMirror-activeline-background"),f.DirectDebug.direct_execution_completed=!0,f.DirectDebug.is_user_aborted_debugging=!0,f.DirectDebug.is_polling_required=!1,i.enable("continue",!1),n.success(t.info,3)):"NotConnected"===t.data.status&&n.alert(e("Debugger Error"),e("Error while executing stop in debugging session."))},error:function(){n.alert(e("Debugger Error"),e("Error while executing stop in debugging session."))}})},toggle_breakpoint:function(a){var i=this;i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),i.enable("continue",!1);var o=f.DirectDebug.editor.lineInfo(i.active_line_no),s="";s=void 0==o.gutterMarkers?t("debugger.set_breakpoint",{trans_id:a,line_no:i.active_line_no+1,set_type:"1"}):t("debugger.set_breakpoint",{trans_id:a,line_no:i.active_line_no+1,set_type:"0"}),r.ajax({url:s,method:"GET",success:function(t){if(t.data.status){void 0!=f.DirectDebug.editor.lineInfo(i.active_line_no).gutterMarkers?f.DirectDebug.editor.setGutterMarker(i.active_line_no,"breakpoints",null):f.DirectDebug.editor.setGutterMarker(i.active_line_no,"breakpoints",function(){var e=document.createElement("div");return e.style.color="#822",e.innerHTML="●",e}()),i.enable("stop",!0),i.enable("step_over",!0),i.enable("step_into",!0),i.enable("toggle_breakpoint",!0),i.enable("clear_all_breakpoints",!0),i.enable("continue",!0)}else"NotConnected"===t.data.status&&n.alert(e("Debugger Error"),e("Error while toggling breakpoint."))},error:function(){n.alert(e("Debugger Error"),e("Error while toggling breakpoint."))}})},clear_all_breakpoint:function(a){var i=this,o=i.GetBreakpointInformation(a);if(1!=o.length||-1!=o[0].linenumber){i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),i.enable("continue",!1);for(var s=new Array,l=0;l<o.length;l++)-1!=o[l].linenumber&&s.push(o[l].linenumber);var u=t("debugger.clear_all_breakpoint",{trans_id:a});r.ajax({url:u,method:"POST",data:{breakpoint_list:s.join()},success:function(e){if(e.data.status)for(var t=0;t<s.length;t++){var r=f.DirectDebug.editor.lineInfo(s[t]-1);r&&void 0!=r.gutterMarkers&&f.DirectDebug.editor.setGutterMarker(s[t]-1,"breakpoints",null)}i.enable("stop",!0),i.enable("step_over",!0),i.enable("step_into",!0),i.enable("toggle_breakpoint",!0),i.enable("clear_all_breakpoints",!0),i.enable("continue",!0)},error:function(){n.alert(e("Debugger Error"),e("Error while clearing all breakpoint."))}})}},AddStackInformation:function(t){var r=this;r.stack_grid&&(r.stack_grid.remove(),r.stack_grid=null);for(var a=s.Model.extend({defaults:{frame_id:0,name:void 0,value:void 0,line_no:void 0}}),n=s.Collection.extend({model:a}),i=[{name:"name",label:e("Name"),type:"text",editable:!1,cell:"string"},{name:"value",label:e("Value"),type:"text",editable:!1,cell:"string"},{name:"line_no",label:e("Line No."),type:"text",editable:!1,cell:"string"}],o=[],u=0;u<t.length;u++)o.push({frame_id:u,name:t[u].targetname,value:t[u].args,line_no:t[u].linenumber});var d=this.stackColl=new n(o);this.stackColl.on("backgrid:row:selected",r.select_frame,r);var c=this.stack_grid=new l.Grid({columns:i,row:l.Row.extend({highlightColor:"#D9EDF7",disabledColor:"#F1F1F1",events:{click:"rowClick"},rowClick:function(){r.frame_id=this.model.get("frame_id"),this.model.trigger("backgrid:row:selected",this),r.stack_grid.$el.find("td").css("background-color",this.disabledColor),this.$el.find("td").css("background-color",this.highlightColor)}}),collection:d,className:"backgrid table-bordered"});c.render(),f.DirectDebug.stack_pane_panel.$container.find(".stack_pane").append(c.el)},AddResults:function(e,t){var r=this;r.result_grid&&(r.result_grid.remove(),r.result_grid=null);var n=s.Model.extend({defaults:{name:void 0}}),i=s.Collection.extend({model:n}),o=[];a.size(e)&&a.each(e,function(e){var t={type:"text",editable:!1,cell:"string"};t.name=t.label=e.name,o.push(t)});var u=this.result_grid=new l.Grid({columns:o,collection:new i(t),className:"backgrid table-bordered"});u.render(),f.DirectDebug.results_panel.$container.find(".debug_results").append(u.el)},AddLocalVariables:function(t){var r=this;r.variable_grid&&(r.variable_grid.remove(),r.variable_grid=null);var a=s.Model.extend({defaults:{name:void 0,type:void 0,value:void 0}}),n=s.Collection.extend({model:a});n.prototype.on("change",r.deposit_parameter_value,r);var i=[{name:"name",label:e("Name"),type:"text",editable:!1,cell:"string"},{name:"type",label:e("Type"),type:"text",editable:!1,cell:"string"},{name:"value",label:e("Value"),type:"text",cell:"string"}],o=[];if(0!=t.length)for(var u=0;u<t.length;u++)"L"==t[u].varclass&&o.push({name:t[u].name,type:t[u].dtype,value:t[u].value});var d=this.variable_grid=new l.Grid({columns:i,collection:new n(o),className:"backgrid table-bordered"});d.collection.on("backgrid:edited",function(e,t,r){b.setFocusToDebuggerEditor(f.DirectDebug.editor,r)}),d.render(),f.DirectDebug.local_variables_panel.$container.find(".local_variables").append(d.el)},AddParameters:function(t){var r=this;r.param_grid&&(r.param_grid.remove(),r.param_grid=null);var a=s.Model.extend({defaults:{name:void 0,type:void 0,value:void 0}}),n=r.ParametersCollection=s.Collection.extend({model:a});n.prototype.on("change",r.deposit_parameter_value,r);var i=[{name:"name",label:e("Name"),type:"text",editable:!1,cell:"string"},{name:"type",label:e("Type"),type:"text",editable:!1,cell:"string"},{name:"value",label:e("Value"),type:"text",cell:"string"}],o=[];if(0!=t.length)for(var u=0;u<t.length;u++)"A"==t[u].varclass&&o.push({name:t[u].name,type:t[u].dtype,value:t[u].value});var d=this.param_grid=new l.Grid({columns:i,collection:new n(o),className:"backgrid table-bordered"});d.collection.on("backgrid:edited",function(e,t,r){b.setFocusToDebuggerEditor(f.DirectDebug.editor,r)}),d.render(),f.DirectDebug.parameters_panel.$container.find(".parameters").append(d.el)},deposit_parameter_value:function(a){var i=this,o=[];o.push({name:a.get("name"),type:a.get("type"),value:a.get("value")});var s=t("debugger.deposit_value",{trans_id:f.DirectDebug.trans_id});r.ajax({url:s,method:"POST",data:{data:JSON.stringify(o)},success:function(e){e.data.status&&(i.GetLocalVariables(f.DirectDebug.trans_id),e.data.result?n.success(e.data.info,3):n.error(e.data.info,3))},error:function(){n.alert(e("Debugger Error"),e("Error while depositing variable value."))}})},select_frame:function(){var a=this,i=t("debugger.select_frame",{trans_id:f.DirectDebug.trans_id,frame_id:a.frame_id});r.ajax({url:i,method:"GET",success:function(e){e.data.status&&(f.DirectDebug.editor.setValue(e.data.result[0].src),a.UpdateBreakpoint(f.DirectDebug.trans_id),f.DirectDebug.editor.addLineClass(e.data.result[0].linenumber-2,"wrap","CodeMirror-activeline-background"),a.GetLocalVariables(f.DirectDebug.trans_id))},error:function(){n.alert(e("Debugger Error"),e("Error while selecting frame."))}})}});var v=s.View.extend({el:".dubugger_main_container",initialize:function(){h.on("pgDebugger:button:state:stop",this.enable_stop,this),h.on("pgDebugger:button:state:step_over",this.enable_step_over,this),h.on("pgDebugger:button:state:step_into",this.enable_step_into,this),h.on("pgDebugger:button:state:continue",this.enable_continue,this),h.on("pgDebugger:button:state:toggle_breakpoint",this.enable_toggle_breakpoint,this),h.on("pgDebugger:button:state:clear_all_breakpoints",this.enable_clear_all_breakpoints,this)},events:{"click .btn-stop":"on_stop","click .btn-clear-breakpoint":"on_clear_all_breakpoint","click .btn-toggle-breakpoint":"on_toggle_breakpoint","click .btn-continue":"on_continue","click .btn-step-over":"on_step_over","click .btn-step-into":"on_step_into",keydown:"keyAction"},enable_stop:function(e){var t=this.$el.find(".btn-stop");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_step_over:function(e){var t=this.$el.find(".btn-step-over");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_step_into:function(e){var t=this.$el.find(".btn-step-into");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_continue:function(e){var t=this.$el.find(".btn-continue");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_toggle_breakpoint:function(e){var t=this.$el.find(".btn-toggle-breakpoint");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_clear_all_breakpoints:function(e){var t=this.$el.find(".btn-clear-breakpoint");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},on_stop:function(){h.Stop(f.DirectDebug.trans_id)},on_clear_all_breakpoint:function(){h.clear_all_breakpoint(f.DirectDebug.trans_id)},on_toggle_breakpoint:function(){h.toggle_breakpoint(f.DirectDebug.trans_id)},on_continue:function(){h.Continue(f.DirectDebug.trans_id)},on_step_over:function(){h.Step_over(f.DirectDebug.trans_id)},on_step_into:function(){h.Step_into(f.DirectDebug.trans_id)},keyAction:function(e){var t,r,n=this.$el;if(0==a.size(f.DirectDebug.debugger_keyboard_shortcuts)){var i,o,s;i=window.top.pgAdmin.Browser.get_preference("debugger","edit_grid_values"),o=window.top.pgAdmin.Browser.get_preference("debugger","move_next"),s=window.top.pgAdmin.Browser.get_preference("debugger","move_previous"),i&&o&&s||(i=window.opener.pgAdmin.Browser.get_preference("debugger","edit_grid_values"),o=window.opener.pgAdmin.Browser.get_preference("debugger","move_next"),s=window.opener.pgAdmin.Browser.get_preference("debugger","move_previous")),f.DirectDebug.debugger_keyboard_shortcuts={edit_grid_keys:i.value,next_panel_keys:o.value,previous_panel_keys:s.value}}t=g.processEventDebugger(n,e,f.DirectDebug.debugger_keyboard_shortcuts),a.isUndefined(t)||a.isNull(t)||(r=t+1,f.DirectDebug.docker.findPanels()[r].focus())}}),m=function(){};return a.extend(m.prototype,{init:function(i,o){var s=this;if(a.bindAll(f.DirectDebug,"messages"),!this.initialized){var l;this.initialized=!0,this.trans_id=i,this.debug_type=o,this.first_time_indirect_debug=!1,this.direct_execution_completed=!1,this.polling_timeout_idle=!1,this.debug_restarted=!1,this.is_user_aborted_debugging=!1,this.is_polling_required=!0,this.debugger_keyboard_shortcuts={},this.docker=new _("#container",{allowContextMenu:!1,allowCollapse:!1,themePath:t("static",{filename:"css"}),theme:"webcabin.overrides.css"}),this.panels=[],void 0==i||o?void 0!=i&&o?(l=t("debugger.start_listener",{trans_id:i}),r.ajax({url:l,method:"GET",success:function(e){e.data.status&&s.messages(i)},error:function(){n.alert(e("Debugger Error"),e("Error while starting debugging listener."))}})):this.intializePanels():(l=t("debugger.start_listener",{trans_id:i}),r.ajax({url:l,method:"GET",success:function(e){e.data.status&&(s.intializePanels(),h.poll_result(i))},error:function(){n.alert(e("Debugger Error"),e("Error while starting debugging listener."))}}))}},messages:function(a){var i=this,o=t("debugger.messages",{trans_id:a});r.ajax({url:o,method:"GET",success:function(t){"Success"===t.data.status?(i.intializePanels(),h.start_execution(a,t.data.result)):"Busy"===t.data.status?i.messages(a):"NotConnected"===t.data.status&&n.alert(e("Not connected to server or connection with the server has been closed."),t.data.result)},error:function(){n.alert(e("Debugger Error"),e("Error while fetching messages information."))}})},onBreakPoint:function(e,t,r){var a=this;if("breakpoints"==r&&!f.DirectDebug.polling_timeout_idle){var n=e.lineInfo(t);void 0==n.gutterMarkers?h.set_breakpoint(a.trans_id,t+1,1):void 0==n.gutterMarkers.breakpoints?h.set_breakpoint(a.trans_id,t+1,1):h.set_breakpoint(a.trans_id,t+1,0);var i=n.gutterMarkers;void 0!=i&&void 0==n.gutterMarkers.breakpoints&&(i=n.gutterMarkers.breakpoints),e.setGutterMarker(t,"breakpoints",i?null:function(){var e=document.createElement("div");return e.style.color="#822",e.innerHTML="●",e}())}},intializePanels:function(){var t=this;this.registerPanel("code",!1,"100%","50%",function(){var r=new i.Browser.Panel({name:"parameters",title:e("Parameters"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id ="parameters" class="parameters" tabindex="0"></div>'}),a=new i.Browser.Panel({name:"local_variables",title:e("Local variables"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id ="local_variables" class="local_variables" tabindex="0"></div>'}),n=new i.Browser.Panel({name:"messages",title:e("Messages"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id="messages" class="messages" tabindex="0"></div>'}),o=new i.Browser.Panel({name:"results",title:e("Results"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id="debug_results" class="debug_results" tabindex="0"></div>'}),s=new i.Browser.Panel({name:"stack_pane",title:e("Stack"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id="stack_pane" class="stack_pane" tabindex="0"></div>'});r.load(t.docker),a.load(t.docker),n.load(t.docker),o.load(t.docker),s.load(t.docker)}),t.code_editor_panel=t.docker.addPanel("code",_.DOCK.TOP),t.parameters_panel=t.docker.addPanel("parameters",_.DOCK.BOTTOM,t.code_editor_panel),t.local_variables_panel=t.docker.addPanel("local_variables",_.DOCK.STACKED,t.parameters_panel,{tabOrientation:_.TAB.TOP}),t.messages_panel=t.docker.addPanel("messages",_.DOCK.STACKED,t.parameters_panel),t.results_panel=t.docker.addPanel("results",_.DOCK.STACKED,t.parameters_panel),t.stack_pane_panel=t.docker.addPanel("stack_pane",_.DOCK.STACKED,t.parameters_panel);var a=r('<div id="stack_editor_pane" class="full-container-pane info"></div>'),n=r('<textarea id="debugger-editor-textarea"></textarea>').append(a);t.code_editor_panel.layout().addItem(n),t.editor=p.fromTextArea(n.get(0),{tabindex:-1,lineNumbers:!0,foldOptions:{widget:"…"},foldGutter:{rangeFinder:p.fold.combine(p.pgadminBeginRangeFinder,p.pgadminIfRangeFinder,p.pgadminLoopRangeFinder,p.pgadminCaseRangeFinder)},gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","breakpoints"],mode:"text/x-pgsql",readOnly:!0,extraKeys:i.Browser.editor_shortcut_keys,indentWithTabs:i.Browser.editor_options.indent_with_tabs,indentUnit:i.Browser.editor_options.tabSize,tabSize:i.Browser.editor_options.tabSize,lineWrapping:i.Browser.editor_options.wrapCode,autoCloseBrackets:i.Browser.editor_options.insert_pair_brackets,matchBrackets:i.Browser.editor_options.brace_matching}),p.on(t.editor,"keydown",function(e,t){27==t.keyCode&&document.activeElement.blur()});var o=function(){t.docker.finishLoading(100),t.docker.off(_.EVENT.LOADED),t.editor.on("gutterClick",t.onBreakPoint.bind(t),t)};t.docker.startLoading(e("Loading...")),t.docker.on(_.EVENT.LOADED,o),this.toolbarView=new v},registerPanel:function(e,t,a,n,i){var o=this;this.docker.registerPanelType(e,{title:t,isPrivate:!0,onCreate:function(s){o.panels[e]=s,s.initSize(a,n),t?s.title(t):s.title(!1),s.closeable(!1),s.layout().addItem(r('<div tabindex="0">',{class:"pg-debugger-panel"})),i&&i.apply(o,[s])}})}}),f.DirectDebug=new m,f.DirectDebug.jquery=r,f.DirectDebug}.apply(t,a))&&(e.exports=n)},150:function(e,t,r){"use strict";function a(e,t){if(t){9!==(t.which||t.keyCode)&&e.focus()}}e.exports={setFocusToDebuggerEditor:a}},2:function(e,t,r){"use strict";var a,n;a=[r(38)],void 0!==(n=function(e){return function(t,r){var a,n=e[t]?e[t]:t,i=/([^%]*)%\(([^\)]+)\)s(.*)/,o=n;do{a=!1,o=o.replace(i,function(e,t,n,i){return a=!0,t+r[n]+i})}while(a);return o}}.apply(t,a))&&(e.exports=n)},20:function(e,t,r){"use strict";function a(e){var t="";return e.alt&&(t+="alt+"),e.shift&&(t+="shift+"),e.control&&(t+="ctrl+"),t+=String.fromCharCode(e.key.key_code).toLowerCase()}function n(e){0!=e.length&&setTimeout(function(){var t=e.find("button.fa-plus:first");0==t.length&&(t=e.find(".pgadmin-controls:first>input:enabled,.CodeMirror-scroll")),t.length>0?t[0].focus():e[0].focus()},200)}Object.defineProperty(t,"__esModule",{value:!0}),t.parseShortcutValue=a,t.findAndSetFocus=n},23:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(14),n=function(e){return e&&e.__esModule?e:{default:e}}(a);r(42),r(76),r(77),r(60),r(78),r(79),r(80),r(81),r(43),r(82),r(61),r(83),r(84),r(85),r(86),r(31),t.default=n.default},3:function(e,t,r){"use strict";(function(r){var a,n,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};a=[],void 0!==(n=function(){var e=window.pgAdmin=window.pgAdmin||{};return function(e,t,r){function a(e,t,a,i){a=a||"width";var o,l,u,g=(t.match(d)||[])[2],b="px"===g?1:c[g+"toPx"],p=/r?em/i;if(b||p.test(g)&&!i)e=b?e:"rem"===g?s:"fontSize"===a?e.parentNode||e:e,b=b||parseFloat(n(e,"fontSize")),u=parseFloat(t)*b;else{o=e.style,l=o[a];try{o[a]=t}catch(e){return 0}u=o[a]?parseFloat(n(e,a)):0,o[a]=l!==r?l:null}return u}function n(e,t){var r,o,s,l,c,g=/^top|bottom/,b=["paddingTop","paddingBottom","borderTop","borderBottom"],p=4;if(r=u?u(e)[t]:(o=e.style["pixel"+t.charAt(0).toUpperCase()+t.slice(1)])?o+"px":"fontSize"===t?a(e,"1em","left",1)+"px":e.currentStyle[t],"%"===(s=(r.match(d)||[])[2])&&i)if(g.test(t)){for(l=(c=e.parentNode||e).offsetHeight;p--;)l-=parseFloat(n(c,b[p]));r=parseFloat(r)/100*l+"px"}else r=a(e,r);else("auto"===r||s&&"px"!==s)&&u?r=0:s&&"px"!==s&&!u&&(r=a(e,r)+"px");return r}var i,o=t.createElement("test"),s=t.documentElement,l=t.defaultView,u=l&&l.getComputedStyle,d=/^(-?[\d+\.\-]+)([a-z]+|%)$/i,c={},g=[1/25.4,1/2.54,1/72,1/6],b=["mm","cm","pt","pc","in","mozmm"],p=6;for(s.appendChild(o),u&&(o.style.marginTop="1%",i="1%"===u(o).marginTop);p--;)c[b[p]+"toPx"]=g[p]?g[p]*c.inToPx:a(o,"1"+b[p]);s.removeChild(o),o=r,e.toPx=a}(e,window.document),e.natural_sort=function(e,t,r){r=r||{};var a,n,o=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,s=/(^[ ]*|[ ]*$)/g,l=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,u=/^0x[0-9a-f]+$/i,d=/^0/,c=function(e){return r.insensitive&&(""+e).toLowerCase()||""+e},g=c(e).replace(s,"")||"",b=c(t).replace(s,"")||"",p=g.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),_=b.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),f=parseInt(g.match(u))||1!==p.length&&g.match(l)&&Date.parse(g),h=parseInt(b.match(u))||f&&b.match(l)&&Date.parse(b)||null,v=r.desc?-1:1;if(h){if(f<h)return-1*v;if(f>h)return 1*v}for(var m=0,y=Math.max(p.length,_.length);m<y;m++){if(a=!(p[m]||"").match(d)&&parseFloat(p[m])||p[m]||0,n=!(_[m]||"").match(d)&&parseFloat(_[m])||_[m]||0,isNaN(a)!==isNaN(n))return(isNaN(a)?1:-1)*v;if((void 0===a?"undefined":i(a))!==(void 0===n?"undefined":i(n))&&(a+="",n+=""),a<n)return-1*v;if(a>n)return 1*v}return 0},e}.apply(t,a))&&(e.exports=n)}).call(t,r(3))},31:function(e,t,r){"use strict";(function(e){var a,n,i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s){"object"==o(t)&&"object"==o(e)?s(r(14)):(n=[r(14)],a=s,void 0!==(i="function"==typeof a?a.apply(t,n):a)&&(e.exports=i))}(function(e){e.pgadminKeywordRangeFinder=function(t,r,a,n){for(var i,o,s=r.line,l=t.getLine(s),u=l.length;u>0;){var d=l.lastIndexOf(a,u),c=a,g=n;if(d<r.ch){if((d=l.lastIndexOf("[",u))<r.ch)break;c="[",g="]"}if(o=t.getTokenAt(e.Pos(s,d+1)).type,!/^(comment|string)/.test(o)){i=d;break}u=d-1}if(!(null==i||l.lastIndexOf(c)>i)){var b,p,_=1,f=t.lineCount();e:for(var h=s+1;h<f;++h)for(var v=t.getLine(h),m=0;;){var y=v.indexOf(c,m),D=v.indexOf(g,m);if(y<0&&(y=v.length),D<0&&(D=v.length),(m=Math.min(y,D))==v.length)break;if(t.getTokenAt(e.Pos(h,m+1)).type==o)if(m==y)++_;else if(!--_){b=h,p=m;break e}++m}if(null!=b&&b!=s+1)return{from:e.Pos(s,i+a.length),to:e.Pos(b,p)}}},e.pgadminBeginRangeFinder=function(t,r){return e.pgadminKeywordRangeFinder(t,r,"BEGIN","END;")},e.pgadminIfRangeFinder=function(t,r){return e.pgadminKeywordRangeFinder(t,r,"IF","END IF")},e.pgadminLoopRangeFinder=function(t,r){return e.pgadminKeywordRangeFinder(t,r,"LOOP","END LOOP")},e.pgadminCaseRangeFinder=function(t,r){return e.pgadminKeywordRangeFinder(t,r,"CASE","END CASE")}})}).call(t,r(28)(e))},38:function(t,r){t.exports=e},39:function(e,r){e.exports=t},44:function(e,t){e.exports=r},5:function(e,t,r){"use strict";var a,n;a=[r(39)],void 0!==(n=function(e){return function(t,r){var a=e[t],n=/([<])([^:^>]*:)?([^>]+)([>])/g,i=a;return a?i=i.replace(n,function(e,t,a,n){return n in r?r[n]:e}):a}}.apply(t,a))&&(e.exports=n)},62:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(){return d.default.isUndefined(window.opener)||d.default.isNull(window.opener)?window.parent.pgAdmin.Browser:window.opener.pgAdmin.Browser}function i(e,t){var r=e.get_preference("browser","enable_acitree_animation").value;d.default.isUndefined(t)&&(t=e.tree),r?t.options({animateRoot:!0,unanimated:!1,show:d.default.extend(t.options().show,{duration:75}),hide:d.default.extend(t.options().hide,{duration:75}),view:d.default.extend(t.options().view,{duration:75})}):t.options({animateRoot:!1,unanimated:!0,show:d.default.extend(t.options().show,{duration:0}),hide:d.default.extend(t.options().hide,{duration:0}),view:d.default.extend(t.options().view,{duration:0})})}function o(e){(d.default.isUndefined(e)||d.default.isNull(e))&&(e=n()),e.get_preference("browser","enable_alertify_animation").value?((0,l.default)(document).find("link#alertify-no-animation").attr("disabled","disabled"),d.default.each(document.getElementsByTagName("iframe"),function(e){(0,l.default)(e.contentDocument).find("link#alertify-no-animation").attr("disabled","disabled")})):((0,l.default)(document).find("link#alertify-no-animation").removeAttr("disabled","disabled"),d.default.each(document.getElementsByTagName("iframe"),function(e){(0,l.default)(e.contentDocument).find("link#alertify-no-animation").removeAttr("disabled","disabled")}))}var s=r(0),l=a(s),u=r(1),d=a(u);e.exports={modifyAcitreeAnimation:i,modifyAlertifyAnimation:o}},63:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),o=r(0),s=a(o),l=r(45),u=a(l),d=r(20),c=function(){function e(t,r,a){n(this,e),this.dialog=t,this.tabSwitching=!1,this.tabs=this.dialog.$el.find(".nav-tabs"),this.tabs.length>0&&(this.tabs=this.tabs[0]),this.dialogTabBackward=(0,d.parseShortcutValue)(r),this.dialogTabForward=(0,d.parseShortcutValue)(a),(0,u.default)(this.dialog.el).bind(this.dialogTabBackward,this.onKeyboardEvent.bind(this)),(0,u.default)(this.dialog.el).bind(this.dialogTabForward,this.onKeyboardEvent.bind(this))}return i(e,[{key:"onKeyboardEvent",value:function(e,t){var r=this.dialog.$el.find(".tab-content:first > .tab-pane.active:first"),a=this.isActivePaneHasChildTabs(r);if(!this.tabSwitching)if(this.tabSwitching=!0,a){var n=this.navigate(t,a.childTab,a.childTabPane);n||this.navigate(t,this.tabs,r)}else this.navigate(t,this.tabs,r)}},{key:"isActivePaneHasChildTabs",value:function(e){var t,r=e.find(".nav-tabs:first");return r.length>0?(t=e.find(".tab-content:first > .tab-pane.active:first"),{childTab:r,childTabPane:t}):null}},{key:"navigate",value:function(e,t,r){return e==this.dialogTabBackward?this.navigateBackward(t,r):e==this.dialogTabForward&&this.navigateForward(t,r)}},{key:"navigateBackward",value:function(e,t){var r,a,n=this,i=(0,s.default)(e).find("li.active").prev("li");return i.length>0?(i.find("a").tab("show"),r=t.prev(),a=r.find(".tab-content:first > .tab-pane.active:first"),a.length>0?(0,d.findAndSetFocus)(a):(0,d.findAndSetFocus)(r),setTimeout(function(){n.tabSwitching=!1},200),!0):(this.tabSwitching=!1,!1)}},{key:"navigateForward",value:function(e,t){var r,a,n=this,i=(0,s.default)(e).find("li.active").next("li");return i.length>0?(i.find("a").tab("show"),r=t.next(),a=r.find(".tab-content:first > .tab-pane.active:first"),a.length>0?(0,d.findAndSetFocus)(a):(0,d.findAndSetFocus)(r),setTimeout(function(){n.tabSwitching=!1},200),!0):(this.tabSwitching=!1,!1)}},{key:"detach",value:function(){(0,u.default)(this.dialog.el).unbind(this.dialogTabBackward),(0,u.default)(this.dialog.el).unbind(this.dialogTabForward)}}]),e}();e.exports={dialogTabNavigator:c}},65:function(e,t,r){"use strict";function a(){return-1!=window.navigator.platform.search("Mac")}function n(e){return e.ctrlKey||e.altKey}function i(e){return e.altKey||e.shiftKey}function o(e){return e.ctrlKey||e.shiftKey}function s(e){return e.ctrlKey||e.altKey||e.shiftKey}function l(e){return e.altKey&&e.shiftKey&&!e.ctrlKey}function u(e){return e.ctrlKey&&e.shiftKey&&!e.altKey}function d(e){return e.ctrlKey&&e.altKey&&!e.shiftKey}function c(e){e.cancelBubble=!0,e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()}function g(e,t){if(!e)return!1;var r=t.which||t.keyCode;return e.alt==t.altKey&&e.shift==t.shiftKey&&e.control==t.ctrlKey&&e.key.key_code==r}function b(e,t,r){var a=void 0,n=void 0,i=void 0,o=r.edit_grid_keys,s=r.next_panel_keys,l=r.previous_panel_keys;return this.validateShortcutKeys(o,t)?(this._stopEventPropagation(t),n=e.find('div.wcPanelTabContent:not(".wcPanelTabContentHidden")'),n.length&&(i=(0,h.default)(n).find("td.editable:first"),i.length&&i.click())):this.validateShortcutKeys(s,t)?(this._stopEventPropagation(t),a=this.getInnerPanel(e,"right")):this.validateShortcutKeys(l,t)&&(this._stopEventPropagation(t),a=this.getInnerPanel(e,"left")),a}function p(e,t){if(!e||!e.length)return!1;var r=e.find(".wcPanelTab");if(!r.length||1==r.length)return!1;var a=(0,h.default)(r).filter(".wcPanelTabActive"),n=parseInt((0,h.default)(a).attr("id")),i=r.length-1;return"left"==t?n>0&&n--:n<i&&n++,n}function _(e,t,r,a){if(!e.isQueryRunning()){var n=a.which||a.keyCode,i=void 0,o=t.execute,s=t.explain,l=t.explain_analyze,u=t.download_csv,d=t.move_next,c=t.move_previous;return this.validateShortcutKeys(o,a)?(this._stopEventPropagation(a),r.executeQuery(e)):this.validateShortcutKeys(s,a)?(this._stopEventPropagation(a),r.explain(e)):this.validateShortcutKeys(l,a)?(this._stopEventPropagation(a),r.explainAnalyze(e)):this.validateShortcutKeys(u,a)?(this._stopEventPropagation(a),r.download(e)):(this.isMac()&&a.metaKey||!this.isMac()&&a.ctrlKey)&&!a.altKey&&a.shiftKey&&n===m?(this._stopEventPropagation(a),r.commentBlockCode(e)):(this.isMac()&&!this.isKeyCtrlAltShift(a)&&a.metaKey||!this.isMac()&&!this.isKeyAltShift(a)&&a.ctrlKey)&&n===m?(this._stopEventPropagation(a),r.commentLineCode(e)):(this.isMac()&&!this.isKeyCtrlAltShift(a)&&a.metaKey||!this.isMac()&&!this.isKeyAltShift(a)&&a.ctrlKey)&&n===v?(this._stopEventPropagation(a),r.uncommentLineCode(e)):n==y?r.focusOut(e):this.validateShortcutKeys(d,a)?(this._stopEventPropagation(a),i=this.getInnerPanel(e.container,"right")):this.validateShortcutKeys(c,a)&&(this._stopEventPropagation(a),i=this.getInnerPanel(e.container,"left")),i}}var f=r(0),h=function(e){return e&&e.__esModule?e:{default:e}}(f),v=190,m=191,y=27;e.exports={processEventDebugger:b,processEventQueryTool:_,getInnerPanel:p,validateShortcutKeys:g,_stopEventPropagation:c,isMac:a,isKeyCtrlAlt:n,isKeyAltShift:i,isKeyCtrlShift:o,isKeyCtrlAltShift:s,isAltShiftBoth:l,isCtrlShiftBoth:u,isCtrlAltBoth:d}},87:function(e,t,r){"use strict";function a(e,t,r,a,n,o){var s="";return i.default.each(i.default.sortBy(i.default.pick(t,n),function(e){return e.priority}),function(e){s=s+"/"+encodeURI(e._id)}),s=o?s+"/"+o:s+"/",""+e+a+"/"+r+s}var n=r(1),i=function(e){return e&&e.__esModule?e:{default:e}}(n);e.exports={generate_url:a}},88:function(e,t,r){"use strict";var a,n;a=[r(2),r(5),r(0),r(1),r(10),r(11),r(3),r(4),r(12),r(21)],void 0!==(n=function(e,t,r,a,n,i,o,s,l){var u=window.wcDocker,d=function(e){var t=e.get("type");if(-1!=t.indexOf("[]"))return-1!=t.indexOf("integer")?l.Extension.InputIntegerArrayCell:l.Extension.InputStringArrayCell;switch(t){case"bool":return l.BooleanCell;case"integer":return void 0!=e.get("value")&&e.set({value:parseInt(e.get("value"))},{silent:!0}),l.IntegerCell;case"real":return void 0!=e.get("value")&&e.set({value:parseFloat(e.get("value"))},{silent:!0}),l.NumberCell;case"string":return l.StringCell;case"date":return l.DateCell;default:return l.Cell}},c=function(e){return-1!=e.get("type").indexOf("[]")?l.StringCell:l.BooleanCell},g=n.Model.extend({defaults:{name:void 0,type:void 0,is_null:void 0,expr:void 0,value:void 0,use_default:void 0,default_value:void 0},validate:function(){if(a.isUndefined(this.get("value"))||a.isNull(this.get("value"))||""==String(this.get("value")).replace(/^\s+|\s+$/g,"")){var t=e("Please enter a value for the parameter.");return this.errorModel.set("value",t),t}return this.errorModel.unset("value"),null}}),b=n.Collection.extend({model:g}),p=function(e){return e instanceof n.Model&&e.get("use_default")},_=function(e){if(e instanceof n.Model){return-1==e.get("type").indexOf("[]")}};return function(n,o){i.debuggerInputArgsDialog||i.dialog("debuggerInputArgsDialog",function(){return{main:function(n,o,u){this.set("title",n),this.data=o,this.restart_debug=u;var g=this.func_args_data=[];if(0==u){var f=s.tree,h=f.selected(),v=h&&1==h.length?f.itemData(h):void 0,m=v&&s.Nodes[v._type];if(!v)return;var y,D=m.getTreeNodeHierarchy.apply(m,[h]);"function"==v._type?y=t("debugger.get_arguments",{sid:D.server._id,did:D.database._id,scid:D.schema._id,func_id:D.function._id}):"procedure"==v._type?y=t("debugger.get_arguments",{sid:D.server._id,did:D.database._id,scid:D.schema._id,func_id:D.procedure._id}):"edbfunc"==v._type?y=t("debugger.get_arguments",{sid:D.server._id,did:D.database._id,scid:D.schema._id,func_id:D.edbfunc._id}):"edbproc"==v._type&&(y=t("debugger.get_arguments",{sid:D.server._id,did:D.database._id,scid:D.schema._id,func_id:D.edbproc._id}))}else y=t("debugger.get_arguments",{sid:this.data.server_id,did:this.data.database_id,scid:this.data.schema_id,func_id:this.data.function_id});r.ajax({url:y,method:"GET",async:!1,success:function(e){if(0!=e.data.args_count)for(h=0;h<e.data.result.length;h++)g.push({arg_id:e.data.result[h].arg_id,is_null:e.data.result[h].is_null,is_expression:e.data.result[h].is_expression,use_default:e.data.result[h].use_default,value:e.data.result[h].value})},error:function(){i.alert(e("Debugger Error"),e("Unable to fetch the arguments from server"))}});var w,k,x,E,S,C,T,M=l.HeaderCell.extend({className:"width_percent_25"}),N=[],P=[{name:"name",label:e("Name"),type:"text",editable:!1,cell:"string"},{name:"type",label:e("Type"),type:"text",editable:!1,cell:"string"},{name:"is_null",label:e("Null?"),type:"boolean",cell:"boolean"},{name:"expr",label:e("Expression?"),type:"boolean",cellFunction:c,editable:_},{name:"value",label:e("Value"),type:"text",editable:!0,cellFunction:d,headerCell:M},{name:"use_default",label:e("Use Default?"),type:"boolean",cell:"boolean",editable:p},{name:"default_value",label:e("Default value"),type:"text",editable:!1,cell:"string"}],A=[],B=[],K=this.input_arg_id=[];if(null!=this.data.proargmodes){var O=this.data.proargmodes.split(",");for(T=0;T<O.length;T++)"i"!=O[T]&&"b"!=O[T]||K.push(T)}else{var L=this.data.proargtypenames.split(",");for(T=0;T<L.length;T++)K.push(T)}k=this.data.proargtypenames.split(","),null!=this.data.proargmodes&&(x=this.data.proargmodes.split(",")),this.data.pronargdefaults&&(E=this.data.pronargdefaults,S=this.data.proargdefaults.split(","),C=E);var I,F,G,j,V;if(null!=this.data.proargnames){for(w=this.data.proargnames.split(","),V=w.length-1;V>=0;V--)null!=this.data.proargmodes?!C||"i"!=x[V]&&"b"!=x[V]?N[V]="<No default value>":(C-=1,N[V]=S[C]):C?(C-=1,N[V]=S[C]):N[V]="<No default value>";if(0!=k.length)for(h=0;h<k.length;h++)null!=this.data.proargmodes?"i"!=x[h]&&"b"!=x[h]||(j=!1,"<No default value>"!=N[h]&&(j=!0),A.push({name:w[h],type:k[h],use_default:j,default_value:N[h]})):(j=!1,"<No default value>"!=N[h]&&(j=!0),A.push({name:w[h],type:k[h],use_default:j,default_value:N[h]}));if(0!=g.length)for(h=0;h<g.length;h++)G=g[h].arg_id,F=[],-1!=k[G].indexOf("[]")?(I=g[h].value.split(","),-1!=k[G].indexOf("integer")&&a.each(I,function(e){F.push({value:parseInt(e)})}),a.each(I,function(e){F.push({value:e})})):F=g[h].value,B.push({name:w[G],type:k[G],is_null:!!g[h].is_null,expr:!!g[h].is_expression,value:F,use_default:!!g[h].use_default,default_value:N[G]})}else{var q=[];for(h=0;h<k.length;h++)q[h]="dbgparam"+(h+1);if(this.data.pronargdefaults){for(V=q.length-1;V>=0;V--)null==this.data.proargmodes?C?(C-=1,N[V]=S[C]):N[V]="<No default value>":!C||"i"!=x[V]&&"b"!=x[V]?N[V]="<No default value>":(C-=1,N[V]=S[C]);for(h=0;h<k.length;h++)null==this.data.proargmodes?(j=!1,"<No default value>"!=N[h]&&(j=!0),A.push({name:q[h],type:k[h],use_default:j,default_value:N[h]})):"i"!=x[h]&&"b"!=x[h]||(j=!1,"<No default value>"!=N[h]&&(j=!0),A.push({name:q[h],type:k[h],use_default:j,default_value:N[h]}))}else for(h=0;h<k.length;h++)A.push({name:q[h],type:k[h],use_default:!1,default_value:"<No default value>"}),N[h]="<No default value>";if(0!=g.length)for(h=0;h<g.length;h++)G=g[h].arg_id,F=[],-1!=k[G].indexOf("[]")?(I=g[h].value.split(","),-1!=k[G].indexOf("integer")&&a.each(I,function(e){F.push({value:parseInt(e)})}),a.each(I,function(e){F.push({value:e})})):F=g[h].value,B.push({name:q[G],type:k[G],is_null:!!g[h].is_null,expr:!!g[h].is_expression,value:F,use_default:!!g[h].use_default,default_value:N[G]})}0==g.length?this.debuggerInputArgsColl=new b(A):this.debuggerInputArgsColl=new b(B),this.grid&&(this.grid.remove(),this.grid=null);var R=this.grid=new l.Grid({columns:P,collection:this.debuggerInputArgsColl,className:"backgrid table-bordered"});R.render(),r(this.elements.content).html(R.el);var z=r(R.el).find("input:checkbox").first();z.length&&setTimeout(function(){z.click()},250)},setup:function(){return{buttons:[{text:e("Debug"),key:13,className:"btn btn-primary"},{text:e("Cancel"),key:27,className:"btn btn-primary"}],options:{padding:!1,overflow:!1,model:0,resizable:!0,maximizable:!0,pinnable:!1,closableByDimmer:!1,modal:!1}}},callback:function(a){if(a.button.text===e("Debug")){var n=this;if(0==n.restart_debug){var o=s.tree,l=o.selected(),d=l&&1==l.length?o.itemData(l):void 0,c=d&&s.Nodes[d._type];if(!d)return;var g=c.getTreeNodeHierarchy.apply(c,[l])}var b=[],p=this.sqlite_func_args_list=[],_=0;this.grid.collection.each(function(e){if(e.get("is_null")?b.push({name:e.get("name"),type:e.get("type"),value:"NULL"}):e.get("use_default")?b.push({name:e.get("name"),type:e.get("type"),value:e.get("default_value")}):b.push({name:e.get("name"),type:e.get("type"),value:e.get("value")}),0==n.restart_debug){var t;"function"==d._type?t=g.function._id:"procedure"==d._type?t=g.procedure._id:"edbfunc"==d._type?t=g.edbfunc._id:"edbproc"==d._type&&(t=g.edbproc._id),p.push({server_id:g.server._id,database_id:g.database._id,schema_id:g.schema._id,function_id:t,arg_id:n.input_arg_id[_],is_null:e.get("is_null")?1:0,is_expression:e.get("expr")?1:0,use_default:e.get("use_default")?1:0,value:e.get("value")})}else p.push({server_id:n.data.server_id,database_id:n.data.database_id,schema_id:n.data.schema_id,function_id:n.data.function_id,arg_id:n.input_arg_id[_],is_null:e.get("is_null")?1:0,is_expression:e.get("expr")?1:0,use_default:e.get("use_default")?1:0,value:e.get("value")});_+=1});var f;if(0==n.restart_debug)"function"==d._type?f=t("debugger.initialize_target_for_function",{debug_type:"direct",sid:g.server._id,did:g.database._id,scid:g.schema._id,func_id:g.function._id}):"procedure"==d._type?f=t("debugger.initialize_target_for_function",{debug_type:"direct",sid:g.server._id,did:g.database._id,scid:g.schema._id,func_id:g.procedure._id}):"edbfunc"==d._type?f=t("debugger.initialize_target_for_function",{debug_type:"direct",sid:g.server._id,did:g.database._id,scid:g.schema._id,func_id:g.edbfunc._id}):"edbproc"==d._type&&(f=t("debugger.initialize_target_for_function",{debug_type:"direct",sid:g.server._id,did:g.database._id,scid:g.schema._id,func_id:g.edbproc._id})),r.ajax({url:f,method:"POST",data:{data:JSON.stringify(b)},success:function(a){var n=t("debugger.direct",{trans_id:a.data.debuggerTransId});if(a.data.newBrowserTab)window.open(n,"_blank");else{s.Events.once("pgadmin-browser:frame:urlloaded:frm_debugger",function(e){e.openURL(n)});var o=s.docker.findPanels("properties"),l=s.docker.addPanel("frm_debugger",u.DOCK.STACKED,o[0]);l.focus(),l.on(u.EVENT.CLOSED,function(){var e=t("debugger.close",{trans_id:a.data.debuggerTransId});r.ajax({url:e,method:"DELETE"})})}var c;"function"==d._type?c=t("debugger.set_arguments",{sid:g.server._id,did:g.database._id,scid:g.schema._id,func_id:g.function._id}):"procedure"==d._type?c=t("debugger.set_arguments",{sid:g.server._id,did:g.database._id,scid:g.schema._id,func_id:g.procedure._id}):"edbfunc"==d._type?c=t("debugger.set_arguments",{sid:g.server._id,did:g.database._id,scid:g.schema._id,func_id:g.edbfunc._id}):"edbproc"==d._type&&(c=t("debugger.set_arguments",{sid:g.server._id,did:g.database._id,scid:g.schema._id,func_id:g.edbproc._id})),r.ajax({url:c,method:"POST",data:{data:JSON.stringify(p)},success:function(){},error:function(){i.alert(e("Debugger Error"),e("Unable to set the arguments on the server"))}})},error:function(t){i.alert(e("Debugger Target Initialization Error"),t.responseJSON.errormsg)}});else{f=t("debugger.start_listener",{trans_id:n.data.trans_id}),r.ajax({url:f,method:"POST",data:{data:JSON.stringify(b)},success:function(){},error:function(t){i.alert(e("Debugger Listener Startup Error"),t.responseJSON.errormsg)}});var h=t("debugger.set_arguments",{sid:n.data.server_id,did:n.data.database_id,scid:n.data.schema_id,func_id:n.data.function_id});r.ajax({url:h,method:"POST",data:{data:JSON.stringify(p)},success:function(){},error:function(){i.alert(e("Debugger Error"),e("Unable to set the arguments on the server"))}})}return!0}if(a.button.text===e("Cancel"))return!1},build:function(){i.pgDialogBuild.apply(this)},prepare:function(){r(this.elements.body.childNodes[0]).addClass("alertify_tools_dialog_properties obj_properties"),0==this.func_args_data.length?this.__internal.buttons[0].element.disabled=!0:this.__internal.buttons[0].element.disabled=!1,this.grid.listenTo(this.debuggerInputArgsColl,"backgrid:edited",function(e){return function(){for(var t=!1,r=0;r<this.collection.length;r++)if(""==this.collection.models[r].get("value")||null==this.collection.models[r].get("value")||void 0==this.collection.models[r].get("value")){if(t=!0,!this.collection.models[r].get("use_default")){e.__internal.buttons[0].element.disabled=!0;break}e.__internal.buttons[0].element.disabled=!1}t||(e.__internal.buttons[0].element.disabled=!1)}}(this))}}}),i.debuggerInputArgsDialog(e("Debugger"),n,o).resizeTo("60%","60%")}}.apply(t,a))&&(e.exports=n)}},[149]).default});