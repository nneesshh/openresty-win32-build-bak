define("core",["vendor","pgadmin.browser.endpoints","translations","pgadmin.browser.utils","sources/generated/codemirror","pgadmin.browser.messages"],function(e,t,i,n,s,a){return function(e){function t(n){if(i[n])return i[n].exports;var s=i[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var i={};return t.m=e,t.c=i,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=4)}({"./node_modules/acitree/js/jquery.aciPlugin.min.js":function(e,t,i){e.exports=i("dll-reference vendor")("./node_modules/acitree/js/jquery.aciPlugin.min.js")},"./node_modules/acitree/js/jquery.aciTree.min.js":function(e,t,i){e.exports=i("dll-reference vendor")("./node_modules/acitree/js/jquery.aciTree.min.js")},"./node_modules/alertifyjs/build/alertify.js":function(e,t,i){e.exports=i("dll-reference vendor")("./node_modules/alertifyjs/build/alertify.js")},"./node_modules/backbone/backbone.js":function(e,t,i){e.exports=i("dll-reference vendor")("./node_modules/backbone/backbone.js")},"./node_modules/backform/src/backform.js":function(e,t,i){e.exports=i("dll-reference vendor")("./node_modules/backform/src/backform.js")},"./node_modules/backgrid/lib/backgrid.js":function(e,t,i){e.exports=i("dll-reference vendor")("./node_modules/backgrid/lib/backgrid.js")},"./node_modules/bignumber.js/bignumber.js":function(e,t,i){e.exports=i("dll-reference vendor")("./node_modules/bignumber.js/bignumber.js")},"./node_modules/bootstrap-switch/dist/js/bootstrap-switch.js":function(e,t,i){e.exports=i("dll-reference vendor")("./node_modules/bootstrap-switch/dist/js/bootstrap-switch.js")},"./node_modules/bootstrap/dist/js/bootstrap.js":function(e,t,i){e.exports=i("dll-reference vendor")("./node_modules/bootstrap/dist/js/bootstrap.js")},"./node_modules/eonasdan-bootstrap-datetimepicker/build/js/bootstrap-datetimepicker.min.js":function(e,t,i){e.exports=i("dll-reference vendor")("./node_modules/eonasdan-bootstrap-datetimepicker/build/js/bootstrap-datetimepicker.min.js")},"./node_modules/jquery-contextmenu/dist/jquery.contextMenu.js":function(e,t,i){e.exports=i("dll-reference vendor")("./node_modules/jquery-contextmenu/dist/jquery.contextMenu.js")},"./node_modules/jquery/dist/jquery.js":function(e,t,i){e.exports=i("dll-reference vendor")("./node_modules/jquery/dist/jquery.js")},"./node_modules/moment/moment.js":function(e,t,i){e.exports=i("dll-reference vendor")("./node_modules/moment/moment.js")},"./node_modules/select2/dist/js/select2.full.js":function(e,t,i){e.exports=i("dll-reference vendor")("./node_modules/select2/dist/js/select2.full.js")},"./node_modules/snapsvg/dist/snap.svg.js":function(e,t,i){e.exports=i("dll-reference vendor")("./node_modules/snapsvg/dist/snap.svg.js")},"./node_modules/underscore.string/index.js":function(e,t,i){e.exports=i("dll-reference vendor")("./node_modules/underscore.string/index.js")},"./node_modules/underscore/underscore.js":function(e,t,i){e.exports=i("dll-reference vendor")("./node_modules/underscore/underscore.js")},"./pgadmin/about/static/js/about.js":function(e,t,i){"use strict";var n,s;n=[i("./node_modules/jquery/dist/jquery.js"),i("./node_modules/alertifyjs/build/alertify.js"),i("./pgadmin/static/js/pgadmin.js"),i("./pgadmin/static/js/gettext.js"),i("./pgadmin/static/js/url_for.js"),i("./pgadmin/browser/static/js/tools.js"),i("pgadmin.browser.utils")],void 0!==(s=function(e,t,i,n,s,a,o){if(i=i||window.pgAdmin||{},!i.About)return i.About=a.extend({Init:function(){return!this.initialized&&(this.initialized=!0,i.Browser.add_menus([{name:"mnu_about",module:this,applies:["help"],callback:"about_show",priority:11,label:n("About %(appname)s",{appname:o.app_name})}]),this)},about_show:function(){t.aboutDialog||t.dialog("aboutDialog",function(){return{main:function(e,t){this.set("title",e),this.message=t},setup:function(){return{buttons:[{text:n("OK"),key:27,className:"btn btn-primary"}],options:{modal:!1,resizable:!0,maximizable:!0,pinnable:!1,closableByDimmer:!1}}},build:function(){t.pgDialogBuild.apply(this)},prepare:function(){this.setContent(this.message)}}});e.get(s("about.index"),function(e){t.aboutDialog(n("About %(appname)s",{appname:o.app_name}),e).resizeTo(800,450)})}}),i.About}.apply(t,n))&&(e.exports=s)},"./pgadmin/browser/server_groups/servers/static/js/privilege.js":function(e,t,i){"use strict";var n,s;n=[i("./pgadmin/static/js/gettext.js"),i("./node_modules/underscore/underscore.js"),i("./node_modules/jquery/dist/jquery.js"),i("./node_modules/backbone/backbone.js"),i("./node_modules/backform/src/backform.js"),i("./node_modules/backgrid/lib/backgrid.js"),i("./node_modules/alertifyjs/build/alertify.js"),i("./pgadmin/browser/static/js/node.js"),i("./pgadmin/browser/static/js/node.ui.js")],void 0!==(s=function(e,t,i,n,s,a,o,r){var l=r.Model.extend({idAttribute:"privilege_type",defaults:{privilege_type:void 0,privilege:!1,with_grant:!1},validate:function(){return null}}),d=r.PrivilegeRoleModel=r.Model.extend({idAttribute:"grantee",defaults:{grantee:void 0,grantor:void 0,privileges:void 0},keys:["grantee","grantor"],privileges:[],schema:[{id:"grantee",label:e("Grantee"),type:"text",group:null,editable:!0,cellHeaderClasses:"width_percent_40",node:"role",options_cached:!1,disabled:function(e){return e instanceof n.Model&&!(e.top&&e.top.node_info&&e.top.node_info.server.user.name==e.get("grantor"))},transform:function(e){var t=a.Extension.NodeListByNameCell.prototype.defaults.transform.apply(this,arguments);return t.unshift({label:"PUBLIC",value:"PUBLIC"}),t},cell:a.Extension.NodeListByNameCell.extend({initialize:function(e){var t=this,i=!0;if(e&&e.column&&e.column instanceof n.Model&&e.column.get("options_cached")&&(i=!1),a.Extension.NodeListByNameCell.prototype.initialize.apply(t,arguments),i){var e=t.column.get("options");t.column.set("options",t.omit_selected_roles.bind(t,e))}var s=function(e){var t=this;"grantee"in e.changed&&this.model.cid!=e.cid&&setTimeout(function(){t.render()},50)}.bind(this);this.listenTo(t.model.collection,"change",s,this),this.listenTo(t.model.collection,"remove",s,this)},omit_selected_roles:function(e,i){var n=e(i),s={},a=i.model,o=a.cid,r=t.has(a.top,"node_info")&&!t.isUndefined(a.top.node_info)?a.top.node_info:a.handler.top.node_info,l=r.server.user.name;return a.collection.each(function(e){var i=e.get("grantee");e.cid==o||t.isUndefined(i)||l!=e.get("grantor")||(s[i]=e.cid)}),n=t.filter(n,function(e){return!(e.value in s)})}})},{id:"privileges",label:e("Privileges"),type:"collection",model:l,group:null,cell:"privilege",control:"text",cellHeaderClasses:"width_percent_40",disabled:function(e,t){return!(e instanceof n.Collection)&&!(this.node_info&&this.node_info.server.user.name==e.get("grantor")||this.attributes.node_info.server.user.name==e.get("grantor"))}},{id:"grantor",label:e("Grantor"),type:"text",disabled:!0,cell:"node-list-by-name",node:"role"}],initialize:function(e,i){r.Model.prototype.initialize.apply(this,arguments),t.isNull(e)&&this.set("grantor",i&&i.top&&i.top.node_info&&i.top.node_info.server.user.name,{silent:!0});var n=this,s=n.get("privileges"),a=this.get("privileges")||{};t.isArray(a)&&(a=new r.Collection(s,{model:l,top:this.top||this,handler:this,silent:!0,parse:!1}),this.set("privileges",a,{silent:!0}));var o={};return t.each(n.privileges,function(e){o[e]={privilege_type:e,privilege:!1,with_grant:!1}}),a.each(function(e){delete o[e.get("privilege_type")]}),t.each(o,function(e){a.add(e,{silent:!0})}),n.on("change:grantee",n.granteeChanged),a.on("change",function(){n.trigger("change:privileges",n)}),n},granteeChanged:function(){var e=this.get("privileges");"PUBLIC"==this.get("grantee")&&e.each(function(e){e.set("with_grant",!1,{silent:!0})})},toJSON:function(e){var t=[];return this.attributes&&!this.attributes.privileges?null:(this.attributes.privileges.each(function(e){e.get("privilege")&&t.push(e.toJSON())}),{grantee:this.get("grantee"),grantor:this.get("grantor"),privileges:t})},validate:function(){var i=null,n=(this.sessAttrs,void 0);if(t.isUndefined(this.get("grantee"))?(n=e("A grantee must be selected."),this.errorModel.set("grantee",n),i=n):this.errorModel.unset("grantee"),this.attributes&&this.attributes.privileges){var s=!1;this.attributes.privileges.each(function(e){e.get("privilege")&&(s=!0)}),s?this.errorModel.unset("privileges"):(n=e("At least one privilege should be selected."),this.errorModel.set("privileges",n),i=i||n)}return i}}),c=a.Extension.PrivilegeCellEditor=a.CellEditor.extend({tagName:"div",Labels:{C:"CREATE",T:"TEMPORARY",c:"CONNECT",a:"INSERT",r:"SELECT",w:"UPDATE",d:"DELETE",D:"TRUNCATE",x:"REFERENCES",t:"TRIGGER",U:"USAGE",X:"EXECUTE"},template:t.template(['<tr class="<%= header ? "header" : "" %>">',' <td class="renderable">','  <label class="privilege_label">','   <input type="checkbox" name="privilege" privilege="<%- privilege_type %>" target="<%- target %>" <%= privilege ? \'checked\' : "" %>></input>',"   <%- privilege_label %>","  </label>"," </td>",' <td class="renderable">','  <label class="privilege_label">','   <input type="checkbox" name="with_grant" privilege="<%- privilege_type %>" target="<%- target %>" <%= with_grant ? \'checked\' : "" %> <%= enable_with_grant ? "" : \'disabled\'%>></input>',"   WITH GRANT OPTION","  </label>"," </td>","</tr>"].join(" "),null,{variable:null}),events:{change:"privilegeChanged",blur:"lostFocus"},render:function(){this.$el.empty(),this.$el.attr("tabindex","1"),this.$el.attr("target",this.elId);var e=this.model.get(this.column.get("name")),n=i("<table></table>").appendTo(this.$el),s=this,a=!0,o=!0;return e.each(function(e){var i=e.toJSON();a=a&&i.privilege,o=o&&a&&i.with_grant,t.extend(i,{target:s.cid,header:!1,privilege_label:s.Labels[i.privilege_type],with_grant:"PUBLIC"!=s.model.get("grantee")&&i.with_grant,enable_with_grant:"PUBLIC"!=s.model.get("grantee")&&i.privilege}),a=a&&i.privilege,o=o&&a&&i.with_grant,n.append(s.template(i))}),e.length>1&&n.prepend(s.template({target:s.cid,privilege_label:"ALL",privilege_type:"ALL",privilege:a,with_grant:"PUBLIC"!=s.model.get("grantee")&&o,enable_with_grant:"PUBLIC"!=s.model.get("grantee")&&a,header:!0})),s.$el.find("input[type=checkbox]").first().focus(),i(s.$el.find("input[type=checkbox]")).on("blur",function(){s.$el.blur()}),i(s.$el).pgMakeVisible("backform-tab"),s.delegateEvents(),this},privilegeChanged:function(t){if(t&&t.target){var n=i(t.target),s=n.attr("privilege"),a=n.attr("name"),o=n.prop("checked"),r=n.closest("tr"),l=r.closest("table"),d=this.model.get("privileges"),c=this.model.get("grantee");if(this.undelegateEvents(),"ALL"==s){var u,p,f=r.find("input[name=with_grant]"),h=l.find("input[name=privilege][privilege!='ALL']"),m=l.find("input[name=with_grant][privilege!='ALL']");"privilege"==a?(u=o,p=!1,o?(h.prop("checked",!0),"PUBLIC"==c?(m.prop("disabled",!0),f.prop("disabled",!0)):(m.prop("disabled",!1),f.prop("disabled",!1))):(h.prop("checked",!1),f.prop("checked",!1),m.prop("checked",!1),f.prop("disabled",!0),m.prop("disabled",!0))):(u=!0,p=o,m.prop("checked",o)),d.each(function(e){e.set({privilege:u,with_grant:p},{silent:!0})})}else{var g={},l=r.closest("table"),v=l.find("input[name=privilege][privilege='ALL']"),b=l.find("input[name=with_grant][privilege='ALL']");if(g[a]=o,"privilege"==a){var f=n.closest("tr").find("input[name=with_grant]");o?"PUBLIC"!=c&&f.prop("disabled",!1):(g.with_grant=!1,f.prop("checked",!1).prop("disabled",!0),v.prop("checked",!1),b.prop("disabled",!0),b.prop("checked",!1))}else o||b.prop("checked",!1);if(d.get(s).set(g,{silent:!0}),o){var h=l.find("input[name=privilege][privilege!='ALL']:checked");if(h.length>1&&h.length==d.models.length)if(v.prop("checked",!0),"with_grant"==a){var m=l.find("input[name=with_grant][privilege!='ALL']:checked");m.length==d.models.length&&(b.prop("disabled",!1),b.prop("checked",!0))}else"PUBLIC"!=c&&b.prop("disabled",!1)}}this.model.trigger("change",this.model);var _=!1,y=null;d.each(function(e){_=_||e.get("privilege")}),_?(this.model.errorModel.unset("privileges"),this.model.errorModel.has("grantee")&&(y=this.model.errorModel.get("grantee"))):(this.model.errorModel.set("privileges",e("At least one privilege should be selected.")),y=e("At least one privilege should be selected.")),y?this.model.collection.trigger("pgadmin-session:model:invalid",y,this.model):this.model.collection.trigger("pgadmin-session:model:valid",this.model)}this.delegateEvents()},lostFocus:function(e){var t=this,i=function(e,t){for(var i=t.parentNode;null!=i;){if(i==e)return!0;i=i.parentNode}return!1};setTimeout(function(){if(("DIV"==document.activeElement.tagName||"BUTTON"==document.activeElement.tagName)&&t.$el[0]!=document.activeElement&&!i(t.$el[0],document.activeElement)){var n=t.model;n.trigger("backgrid:edited",n,t.column,new a.Command(e))}},10)}}),u=a.Extension.PrivilegeCellFormatter=function(){};t.extend(u.prototype,{notation:{CREATE:"C",TEMPORARY:"T",CONNECT:"c",INSERT:"a",SELECT:"r",UPDATE:"w",DELETE:"d",TRUNCATE:"D",REFERENCES:"x",TRIGGER:"t",USAGE:"U",EXECUTE:"X"},fromRaw:function(e,t){var i="";return e instanceof n.Collection&&e.each(function(e){e.get("privilege")&&(i+=e.get("privilege_type"),e.get("with_grant")&&(i+="*"))}),i}});a.Extension.PrivilegeCell=a.Cell.extend({className:"edit-cell",formatter:u,editor:c,initialize:function(e){var t=this;a.Cell.prototype.initialize.apply(this,arguments),t.model.on("change:grantee",function(){t.$el.hasClass("editor")||setTimeout(function(){t.render()},10)})}});return d}.apply(t,n))&&(e.exports=s)},"./pgadmin/browser/server_groups/servers/static/js/variable.js":function(e,t,i){"use strict";var n,s;n=[i("./pgadmin/static/js/gettext.js"),i("./node_modules/underscore/underscore.js"),i("./node_modules/jquery/dist/jquery.js"),i("./node_modules/backbone/backbone.js"),i("./node_modules/backform/src/backform.js"),i("./node_modules/backgrid/lib/backgrid.js"),i("./node_modules/alertifyjs/build/alertify.js"),i("./pgadmin/static/js/pgadmin.js"),i("./pgadmin/browser/static/js/node.js"),i("./pgadmin/browser/static/js/node.ui.js")],void 0!==(s=function(e,t,i,n,s,a,o,r,l){var d=function(e){var i=this,n=e.get("name"),s={};i.collection.each(function(e){"name"==e.get("name")&&(s=e.get("availVariables"))});var o=n?s[n]:void 0,r=e.get("value");switch(o&&o.vartype){case"bool":return e.set("value",!!e.get("value"),{silent:!0}),a.Extension.SwitchCell;case"enum":e.set({value:r},{silent:!0});var l=[],d=o.enumvals;return t.each(d,function(e){l.push([e,e])}),a.Extension.Select2Cell.extend({optionValues:l});case"integer":return t.isNaN(parseInt(r))?e.set({value:void 0},{silent:!0}):e.set({value:parseInt(r)},{silent:!0}),a.IntegerCell;case"real":return t.isNaN(parseFloat(r))?e.set({value:void 0},{silent:!0}):e.set({value:parseFloat(r)},{silent:!0}),a.NumberCell.extend({decimals:0});case"string":return a.StringCell;default:return e.set({value:void 0},{silent:!0}),a.Cell}return e.set({value:void 0},{silent:!0}),a.Cell},c=a.Row.extend({modelDuplicateColor:"lightYellow",modelUniqueColor:"#fff",initialize:function(){a.Row.prototype.initialize.apply(this,arguments);var e=this;e.model.on("change:name",function(){setTimeout(function(){e.columns.each(function(t){if("value"==t.get("name")){var i=e.columns.indexOf(t),n=t.get("cellFunction"),s=new(n.apply(t,[e.model]))({column:t,model:e.model});e.cells[i].remove(),e.cells[i]=s,e.render()}})},10)}),e.listenTo(e.model,"pgadmin-session:model:duplicate",e.modelDuplicate),e.listenTo(e.model,"pgadmin-session:model:unique",e.modelUnique)},modelDuplicate:function(){i(this.el).removeClass("new"),this.el.style.backgroundColor=this.modelDuplicateColor},modelUnique:function(){this.el.style.backgroundColor=this.modelUniqueColor}}),u=l.VariableModel=l.Model.extend({keys:["name"],defaults:{name:void 0,value:void 0,role:null,database:null},schema:[{id:"name",label:e("Name"),type:"text",cellHeaderClasses:"width_percent_30",editable:function(e){return e instanceof n.Collection||e.isNew()},cell:a.Extension.NodeAjaxOptionsCell.extend({initialize:function(){a.Extension.NodeAjaxOptionsCell.prototype.initialize.apply(this,arguments);var e=t.clone(this.optionValues||(t.isFunction(this.column.get("options"))?this.column.get("options")(this):this.column.get("options")));this.column.set("options",e)}}),url:"vopts",select2:{allowClear:!1},transform:function(e,i){var n=[],s={};return t.each(e,function(e){n.push({value:e.name,image:void 0,label:e.name}),s[e.name]=e}),i.column.set("availVariables",s),n}},{id:"value",label:e("Value"),type:"text",editable:!0,cellFunction:d,cellHeaderClasses:"width_percent_40"},{id:"database",label:e("Database"),type:"text",editable:!0,node:"database",cell:a.Extension.NodeListByNameCell},{id:"role",label:e("Role"),type:"text",editable:!0,node:"role",cell:a.Extension.NodeListByNameCell}],toJSON:function(){var e=n.Model.prototype.toJSON.apply(this);return(t.isUndefined(e.database)||t.isNull(e.database))&&delete e.database,(t.isUndefined(e.role)||t.isNull(e.role))&&delete e.role,e},validate:function(){if(t.isUndefined(this.get("name"))||t.isNull(this.get("name"))||""==String(this.get("name")).replace(/^\s+|\s+$/g,"")){var e="Please select a parameter name.";return this.errorModel.set("name",e),e}if(t.isUndefined(this.get("value"))||t.isNull(this.get("value"))||""==String(this.get("value")).replace(/^\s+|\s+$/g,"")){var e="Please enter a value for the parameter.";return this.errorModel.set("value",e),e}return this.errorModel.unset("name"),this.errorModel.unset("value"),null}});s.VariableCollectionControl=s.UniqueColCollectionControl.extend({hasDatabase:!1,hasRole:!1,initialize:function(e){var t=this,i=["name"];t.hasDatabase=e.field.get("hasDatabase"),t.hasRole=e.field.get("hasRole"),t.hasDatabase?i.push("database"):t.hasRole&&i.push("role"),e&&e.field&&(e.field instanceof s.Field?e.field.set({model:l.VariableModel.extend({keys:i})},{silent:!0}):e.field.extend({model:l.VariableModel.extend({keys:i})})),s.UniqueColCollectionControl.prototype.initialize.apply(t,arguments),t.availVariables={};var n=(t.field.get("node").type,["name","value"]);t.hasDatabase&&n.push("database"),t.hasRole&&n.push("role"),t.gridSchema=s.generateGridColumnsFromModel(t.field.get("node_info"),u.extend({keys:i}),"edit",n,t.field.get("schema_node")),t.getVariables()},getVariables:function(){var e=this,n=this.field.get("url"),s=e.model;if(this.field.get("version_compatible")&&n&&!s.isNew()){var a,o=e.field.get("node"),r=e.field.get("node_data"),l=e.field.get("node_info"),d=o.generate_url.apply(o,[null,n,r,!0,l]),c=e.collection.trackChanges;c&&e.collection.stopSession(),s.trigger("pgadmin-view:fetching",s,e.field),i.ajax({async:!1,url:d,success:function(e){a=e.data},error:function(){s.trigger("pgadmin-view:fetch:error",s,e.field)}}),s.trigger("pgadmin-view:fetched",s,e.field),a&&t.isArray(a)&&e.collection.reset(a,{silent:!0}),c&&e.collection.startNewSession()}},showGridControl:function(e){var n=this,s=t.template(["<div class='subnode-header'>","<label class='control-label'><%-label%></label>","<button class='btn-sm btn-default add fa fa-plus' <%=canAdd ? '' : 'disabled=\"disabled\"'%>></button>","</div>"].join("\n")),o=i("<div class='pgadmin-control-group backgrid form-group col-xs-12 object subnode'></div>").append(s(e));n.grid&&n.grid.remove();var r=t.clone(this.gridSchema);t.each(r.columns,function(e){"value"==e.name&&(e.availVariables=n.availVariables)}),0==e.disabled&&e.canDelete&&r.columns.unshift({name:"pg-backform-delete",label:"",cell:a.Extension.DeleteCell,editable:!1,cell_priority:-1}),n.collection.each(function(e){var t=e.get("name");if(t in n.availVariables)switch(n.availVariables[t].vartype){case"real":var i=parseFloat(e.get("value"));e.set("value",isNaN(i)?void 0:i,{silent:!0});break;case"integer":var i=parseInt(e.get("value"));e.set("value",isNaN(i)?void 0:i,{silent:!0})}});var l=n.grid=new a.Grid({columns:r.columns,collection:n.collection,row:c,className:"backgrid table-bordered"});return n.$grid=l.render().$el,o.append(n.$grid),e.disabled||0==e.canAdd||o.find("button.add").first().click(function(s){if(s.preventDefault(),!t.isFunction(e.canAddRow)||e.canAddRow.apply(n,[n.model])){if(!n.field.get("allowMultipleEmptyRows")&&n.collection){var a=!1;if(n.collection.each(function(e){var i=[];t.each(e.attributes,function(e,t){i.push(e)}),t.some(i,t.identity)||(a=!0)}),a)return!1}i(l.body.$el.find(i("tr.new"))).removeClass("new");var o=new e.model(null,{silent:!0,handler:n.collection,top:n.model.top||n.model,collection:n.collection,node_info:n.model.node_info});n.collection.add(o);var r=n.collection.indexOf(o),d=l.body.rows[r].$el;return d.addClass("new"),i(d).pgMakeVisible("backform-tab"),!1}}),o},addVariable:function(e){e.preventDefault();var t=this,n=new(t.field.get("model"))(t.headerData.toJSON(),{silent:!0,top:t.collection.top,handler:t.collection}),s=t.model.get(t.field.get("name"));s.add(n);var a=s.indexOf(n);if(a>-1){t.$grid.find(".new").removeClass("new");var o=t.grid.body.rows[a].$el;o.addClass("new"),i(o).pgMakeVisible("backform-tab")}return!1}});return u}.apply(t,n))&&(e.exports=s)},"./pgadmin/browser/static/js/browser.js":function(e,t,i){"use strict";(function(n){var s,a;s=[i("./pgadmin/static/js/gettext.js"),i("./pgadmin/static/js/url_for.js"),i,i("./node_modules/jquery/dist/jquery.js"),i("./node_modules/underscore/underscore.js"),i("./node_modules/underscore.string/index.js"),i("./node_modules/bootstrap/dist/js/bootstrap.js"),i("./pgadmin/static/js/pgadmin.js"),i("./pgadmin/static/js/alertify.pgadmin.defaults.js"),i("sources/generated/codemirror"),i("./pgadmin/static/js/check_node_visibility.js"),i("./pgadmin/static/vendor/webcabin-docker/Build/wcDocker.js"),i("./node_modules/jquery-contextmenu/dist/jquery.contextMenu.js"),i("./node_modules/acitree/js/jquery.aciPlugin.min.js"),i("./node_modules/acitree/js/jquery.aciTree.min.js"),i("pgadmin.browser.messages"),i("./pgadmin/browser/static/js/menu.js"),i("./pgadmin/browser/static/js/panel.js"),i("./pgadmin/browser/static/js/error.js"),i("./pgadmin/browser/static/js/frame.js"),i("./pgadmin/browser/static/js/node.js"),i("./pgadmin/browser/static/js/collection.js"),i("pgadmin.browser.utils")],void 0!==(a=function(e,t,i,s,a,o,r,l,d,c,u){var p=l.Browser=l.Browser||{},f=e("Please select an object in the tree view."),h=c.default,m=window.wcDocker;s=s||n||window.$,r=r||window.Bootstrap;var g={};g[m.EVENT.VISIBILITY_CHANGED]=function(){if(this.isVisible()){var e=l.Browser,t=e.tree?e.tree.selected():void 0,i=t&&1==t.length?e.tree.itemData(t):void 0;if(i&&e.Nodes[i._type].callbacks.selected&&a.isFunction(e.Nodes[i._type].callbacks.selected))return e.Nodes[i._type].callbacks.selected.apply(e.Nodes[i._type],[t,i,e])}};var v=function(e){var t=JSON.parse(e).data;return t.length&&"column"!==t[0]._type&&"catalog_object_column"!==t[0]._type&&(t=t.sort(function(e,t){return l.natural_sort(e.label,t.label)})),a.each(t,function(e){e._label=e.label,e.label=a.escape(e.label)}),t},b=l.Browser.initializeBrowserTree=function(e){s("#tree").aciTree({ajax:{url:t("browser.nodes"),converters:{"text json":v}},ajaxHook:function(t,i){if(null!=t){var n=this.itemData(t),s=e.Nodes[n._type];s&&(i.url=s.generate_url(t,"children",n,!0))}},loaderDelay:100,show:{duration:75},hide:{duration:75},view:{duration:75}}),e.tree=s("#tree").aciTree("api")};return a.extend(l.Browser,{URL:t("browser.index"),docker:null,editor:null,tree:null,scripts:{},panels:{browser:new l.Browser.Panel({name:"browser",title:e("Browser"),showTitle:!0,isCloseable:!1,isPrivate:!0,icon:"fa fa-binoculars",content:'<div id="tree" class="aciTree"></div>'}),properties:new l.Browser.Panel({name:"properties",title:e("Properties"),icon:"fa fa-cogs",width:500,isCloseable:!1,isPrivate:!0,elContainer:!0,content:'<div class="obj_properties"><div class="alert alert-info pg-panel-message">'+f+"</div></div>",events:g,onCreate:function(e,t){t.addClass("pg-no-overflow")}}),statistics:new l.Browser.Panel({name:"statistics",title:e("Statistics"),icon:"fa fa-line-chart",width:500,isCloseable:!1,isPrivate:!0,content:'<div><div class="alert alert-info pg-panel-message pg-panel-statistics-message">'+f+'</div><div class="pg-panel-statistics-container hidden"></div></div>',events:g}),sql:new l.Browser.Panel({name:"sql",title:e("SQL"),icon:"fa fa-file-text-o",width:500,isCloseable:!1,isPrivate:!0,content:'<div class="sql_textarea"><textarea id="sql-textarea" name="sql-textarea"></textarea></div>'}),dependencies:new l.Browser.Panel({name:"dependencies",title:e("Dependencies"),icon:"fa fa-hand-o-up",width:500,isCloseable:!1,isPrivate:!0,content:'<div><div class="alert alert-info pg-panel-message pg-panel-depends-message">'+f+'</div><div class="pg-panel-depends-container hidden"></div></div>',events:g}),dependents:new l.Browser.Panel({name:"dependents",title:e("Dependents"),icon:"fa fa-hand-o-down",width:500,isCloseable:!1,isPrivate:!0,content:'<div><div class="alert alert-info pg-panel-message pg-panel-depends-message">'+f+'</div><div class="pg-panel-depends-container hidden"></div></div>',events:g})},frames:{},menus:{context:{},file:{},edit:{},object:{},management:{},tools:{},help:{}},add_panels:function(){var e=JSON.parse(p.panels_items);a.each(e,function(e){e.isIframe?p.frames[e.name]=new p.Frame({name:e.name,title:e.title,icon:e.icon,width:e.width,height:e.height,showTitle:e.showTitle,isCloseable:e.isCloseable,isPrivate:e.isPrivate,url:e.content}):p.panels[e.name]=new p.Panel({name:e.name,title:e.title,icon:e.icon,width:e.width,height:e.height,showTitle:e.showTitle,isCloseable:e.isCloseable,isPrivate:e.isPrivate,content:e.content?e.content:"",events:e.events?e.events:"",canHide:e.canHide?e.canHide:""})})},menu_categories:{create:{label:e("Create"),priority:1,above:!1,below:!0,single:!0}},register_script:function(e,t,i){var n=this.scripts;n[e]=a.isArray(n[e])?n[e]:[],n[e].push({name:t,path:i,loaded:!1})},buildDefaultLayout:function(){var e=this.docker.addPanel("browser",m.DOCK.LEFT),t=this.docker.addPanel("dashboard",m.DOCK.RIGHT,e);this.docker.addPanel("properties",m.DOCK.STACKED,t,{tabOrientation:m.TAB.TOP}),this.docker.addPanel("sql",m.DOCK.STACKED,t),this.docker.addPanel("statistics",m.DOCK.STACKED,t),this.docker.addPanel("dependencies",m.DOCK.STACKED,t),this.docker.addPanel("dependents",m.DOCK.STACKED,t)},enable_disable_menus:function(t){var i=this,n=s("#navbar-menu > ul").first(),o=n.find("li#mnu_obj > ul.dropdown-menu").first(),r=i.tree.itemData(t),d=function e(i){if(i instanceof l.Browser.MenuItem)i.update(r,t);else for(var n in i)e(i[n])};if(o.empty(),a.each([{m:"file",id:"#mnu_file"},{m:"edit",id:"#mnu_edit"},{m:"management",id:"#mnu_management"},{m:"tools",id:"#mnu_tools"},{m:"help",id:"#mnu_help"}],function(e){a.each(i.menus[e.m],function(e,t){d(e)})}),t&&i.menus.object&&i.menus.object[r._type])l.Browser.MenuCreator(o,i.menus.object[r._type],i.menu_categories,r,t);else{var c=l.Browser.MenuGroup(i.menu_categories.create,[{$el:s('<li class="menu-item disabled"><a href="#">'+e("No object selected")+"</a></li>"),priority:1,category:"create",update:function(){}}],!1);o.append(c.$el)}},save_current_layout:function(e){if(e.docker){var i=e.docker.save(),n={setting:"Browser/Layout",value:i};s.ajax({type:"POST",url:t("settings.store_bulk"),data:n})}},init:function(){var e=p;if(!e.initialized){if(e.initialized=!0,e.cache_preferences(),this.add_panels(),e.docker=new m("#dockerContainer",{allowContextMenu:!0,allowCollapse:!1,themePath:"../static/css/",theme:"webcabin.overrides.css"}),e.docker){a.each(e.panels,function(t,i){e.panels[i].load(e.docker)}),a.each(e.frames,function(t,i){e.frames[i].load(e.docker)});var i=p.utils.layout;if(""!=i)try{e.docker.restore(i)}catch(t){e.docker.clear(),e.buildDefaultLayout()}else e.buildDefaultLayout();a.each(e.panels,function(t,i){t.panel&&(t.panel.on(m.EVENT.ATTACHED,function(){e.save_current_layout(e)}),t.panel.on(m.EVENT.DETACHED,function(){e.save_current_layout(e)}),t.panel.on(m.EVENT.MOVE_ENDED,function(){e.save_current_layout(e)}))})}e.editor=h.fromTextArea(document.getElementById("sql-textarea"),{lineNumbers:!0,mode:"text/x-pgsql",readOnly:!0,extraKeys:l.Browser.editor_shortcut_keys,tabSize:l.Browser.editor_options.tabSize,lineWrapping:l.Browser.editor_options.wrapCode,autoCloseBrackets:l.Browser.editor_options.insert_pair_brackets,matchBrackets:l.Browser.editor_options.brace_matching}),setTimeout(function(){e.editor.refresh()},10),b(e),s("#tree").contextMenu({selector:".aciTreeLine",autoHide:!1,build:function(t){var i=e.tree.itemFrom(t),n=e.tree.itemData(i),a=e.menus.context[n._type],o=s("<div></div>"),r={};return l.Browser.MenuCreator(o,a,e.menu_categories,n,i,r),{autoHide:!1,items:r}}}),s("#tree").on("acitree",function(t,i,n,s,o){var r=n?e.tree.itemData(n):null;switch(s){case"added":if(r&&e.scripts&&e.scripts[r._type]){a.extend({},e.scripts[r._type]);delete e.scripts[r._type]}}var l;if(r&&e.Nodes[r._type]){if(l=e.Nodes[r._type],a.isObject(l.callbacks)&&s in l.callbacks&&"function"==typeof l.callbacks[s]&&!l.callbacks[s].apply(l,[n,r,e,o,s]))return!1;try{l.trigger("browser-node."+s,l,n,r)}catch(e){console.log(e)}}try{e.Events.trigger("pgadmin-browser:tree",s,n,r),e.Events.trigger("pgadmin-browser:tree:"+s,n,r,l)}catch(e){console.log(e)}return!0}),l.register_module_initializer("browser",function(e){e&&a.isFunction(e.Init)&&e.Init.call(e,p),this.create_menus_timeout&&clearTimeout(this.create_menus_timeout),this.create_menus_timeout=setTimeout(p.create_menus.bind(p),300)}.bind({create_menus_timeout:null})),p.utils.addMenus(e),setInterval(function(){s.ajax({url:t("misc.ping"),type:"POST",success:function(){},error:function(){}})},3e5),e.Events.on("pgadmin:browser:tree:add",e.onAddTreeNode,e),e.Events.on("pgadmin:browser:tree:update",e.onUpdateTreeNode,e),e.Events.on("pgadmin:browser:tree:refresh",e.onRefreshTreeNode,e)}},add_menu_category:function(e,t,i,n,s,a,o){this.menu_categories[e]={label:t,priority:i,icon:n,above:!0===s,below:!0===a,single:o}},preferences_cache:{},add_menus:function(e){var t=this,i=this.menus,n=l.Browser.MenuItem;a.each(e,function(e){a.each(e.applies,function(o){if(s.inArray(o,["context","file","edit","object","management","tools","help"])>=0){var r;if(!u(t,e.node))return;if(a.has(e,"module")&&!a.isUndefined(e.module)&&!u(t,e.module.type))return;i[o]=i[o]||{},r=a.isString(e.node)?i[o][e.node]=i[o][e.node]||{}:a.isString(e.category)?i[o][e.category]=i[o][e.category]||{}:i[o],a.has(r,e.name)||(r[e.name]=new n({name:e.name,label:e.label,module:e.module,category:e.category,callback:e.callback,priority:e.priority,data:e.data,url:e.url,target:e.target,icon:e.icon,enable:""==e.enable||(!a.isString(e.enable)||"false"!=e.enable.toLowerCase())&&e.enable,node:e.node}))}else console&&console.log&&console.log("Developer warning: Category '"+o+"' is not supported!\nSupported categories are: context, file, edit, object, tools, management, help")})})},create_menus:function(){var e=s("#navbar-menu > ul").first(),t=this;a.each([{menu:"file",id:"#mnu_file"},{menu:"edit",id:"#mnu_edit"},{menu:"management",id:"#mnu_management"},{menu:"tools",id:"#mnu_tools"},{menu:"help",id:"#mnu_help"}],function(i){var n=e.children(i.id).first(),s=n.children(".dropdown-menu").first();s.empty();l.Browser.MenuCreator(s,t.menus[i.menu],t.menu_categories)&&n.removeClass("hide")}),e.children("#mnu_obj").removeClass("hide"),t.enable_disable_menus()},showHelp:function(e,t,i,n,a){if("object_help"==e){var r=this.docker.findPanels("pnl_sql_help")[0];if(null==r){var l=this.docker.findPanels("properties")[0];this.docker.addPanel("pnl_sql_help",m.DOCK.STACKED,l),r=this.docker.findPanels("pnl_sql_help")[0]}var d=i.getTreeNodeHierarchy(n).server,c=p.utils.pg_help_path;"ppas"==d.server_type&&(c=p.utils.edbas_help_path);var u=Math.floor(d.version/1e4),f=Math.floor(d.version/100)-100*u;c=c.replace("$VERSION$",u+"."+f),o(c).endsWith("/")||(c+="/");var h=c+t,g=s(r).data("embeddedFrame");r.title("Help: "+a),r.focus(),g.openURL(h)}else if("dialog_help"==e)if(this.docker){var v=this.docker.findPanels("pnl_online_help")[0];if(null==v){var l=this.docker.findPanels("properties")[0];this.docker.addPanel("pnl_online_help",m.DOCK.STACKED,l),v=this.docker.findPanels("pnl_online_help")[0]}var g=s(v).data("embeddedFrame");v.focus(),g.openURL(t)}else window.open(t,"_blank")},get_preference:function(e,t){var i=this;if(0!=a.size(i.preferences_cache))return a.findWhere(i.preferences_cache,{module:e,name:t});var n=function(){if(a.size(i.preferences_cache)>0)return clearInterval(s),a.findWhere(i.preferences_cache,{module:e,name:t})},s=setInterval(n,1e3)},cache_preferences:function(){var i=this;s.ajax({url:t("preferences.get_all"),success:function(e){i.preferences_cache=e},error:function(t,i,n){try{var a=s.parseJSON(t.responseText);d.alert(e("Preference loading failed."),a.errormsg)}catch(e){}}})},_findTreeChildNode:function(e,t,i){var n=i.t.wasLoad(e),s=function(){for(var n,s,o,r=i.t.children(e),l=0,d=r.length;l<d;l++)if(n=r.eq(l),s=i.t.itemData(n),s._type===t._type){if(!i.hasId||s._id==t._id)return i.i=n,i.d=t,i.pI.push({coll:!1,item:n,d:t}),void i.success()}else if((o=i.b.Nodes[s._type])&&o.collection_node&&s.nodes&&-1!=a.indexOf(s.nodes,t._type))return i.i=n,i.d=null,i.pI.push({coll:!0,item:n,d:s}),i.t.isInode(n)||(i.load=!1),void i.b._findTreeChildNode(n,t,i);i.notFound&&"function"==typeof i.notFound&&i.notFound(t)};!n&&i.load?i.t.open(e,{success:s,unanimated:!0,fail:function(){var e=i&&i.o&&i.o.fail;e&&"function"==typeof e&&e.apply(i.t,[])}}):n?s():i.notFound&&"function"==typeof i.notFound&&i.notFound(t)},onAddTreeNode:function(e,t,i){var n={b:this,d:null,hasId:!0,i:null,p:a.toArray(t||{}).sort(function(e,t){return e.priority===t.priority?0:e.priority<t.priority?-1:1}),pI:[],t:this.tree,o:i},o=function(){var t,i=this;return i.success=o,i.p.length&&(t=i.p.shift(),i.p.length||(t._id=e._pid,i.success=r),i.b._findTreeChildNode(i.i,t,i),e._pid||r.apply(i,arguments)),!0}.bind(n),r=function(){var t=this,i=(t.i||this.t.wasLoad(t.i))&&this.t.first(t.i),n=function(t,i){var n=this;n.success=t,n.notFound=i,n.b._findTreeChildNode(n.i,e,n)}.bind(t),a=function(){this.t.openPath(this.i),this.t.select(this.i),t.o&&t.o.success&&"function"==typeof t.o.success&&t.o.success.apply(t.t,[t.i,e])}.bind(t),o=function(){var t,i=this,n=i.t.children(i.i),a=0,o=n.length-1,r=function(){for(;o>=a;){t=n.eq(a);var s=i.t.itemData(t);if(1==l.natural_sort(s._label,e._label))return!0;a++}return o!=n.length-1?(t=n.eq(o),!0):(t=null,!1)};if(function(){for(var s,d;o-a>22;){t=n.eq(a);var s=i.t.itemData(t);if(-1!=l.natural_sort(s._label,e._label))return!0;if(t=n.eq(o),s=i.t.itemData(t),1!=l.natural_sort(s._label,e._label))return!0;var d=a+Math.round((o-a)/2);t=n.eq(d),s=i.t.itemData(t);var c=l.natural_sort(s._label,e._label);if(0==c)return!0;-1==c?(a=d+1,o--):(a++,o=d-1)}return r()}())i.t.before(t,{itemData:e,success:function(){i.o&&i.o.success&&"function"==typeof i.o.success&&i.o.success.apply(i.t,[t,e])},fail:function(){console.log("Failed to add before.."),i.o&&i.o.fail&&"function"==typeof i.o.fail&&i.o.fail.apply(i.t,[t,e])}});else{var d=function(){var t=this,i=t.t.wasLoad(t.i),n=t.t.itemData(t.i);t.t.append(t.i,{itemData:e,success:function(a,o){var r=s(o.items[0]);i&&n&&n._type.search(e._type)>-1?(t.t.openPath(r),t.t.select(r)):n&&t.t.unload(t.i,{success:function(e,i){t.t.open(e)}}),t.o&&t.o.success&&"function"==typeof t.o.success&&t.o.success.apply(t.t,[r,e])},fail:function(){console.log("Failed to append"),t.o&&t.o.fail&&"function"==typeof t.o.fail&&t.o.fail.apply(t.t,[t.i,e])}})}.bind(i);i.i&&!i.t.isInode(i.i)?i.t.setInode(i.i,{success:d}):d()}}.bind(t);if(!i&&t.t.wasLoad(t.i))return void t.t.unload(t.i,{success:function(){n(a,function(){var t=this&&this.o;t&&t.fail&&"function"==typeof t.fail&&t.fail.apply(this.t,[this.i,e])}.bind(this))}.bind(this),fail:function(){var t=this&&this.o;t&&t.fail&&"function"==typeof t.fail&&t.fail.apply(this.t,[this.i,e])}.bind(this)});n(a,o)}.bind(n);n.t.wasInit()&&e&&(e._label=e.label,e.label=a.escape(e.label),o())},onUpdateTreeNode:function(e,t,i,n){var o={b:this,d:null,i:null,hasId:!0,p:a.toArray(i||{}).sort(function(e,t){return e.priority===t.priority?0:e.priority<t.priority?-1:1}),pI:[],t:this.tree,o:n,load:!0,old:e,new:t,op:null},r=function(){var i=this.o&&this.o.fail;i&&"function"==typeof i&&i.apply(this.t,[this.i,t,e])}.bind(o),d=function(){var e=this,t=this.pI,i=function(){if(t.length){t.pop();var e=t.length;this.i=e&&t[e-1].item||null,this.d=e&&t[e-1].d||null,e&&t[e-1].coll&&(t.pop(),e=t.length,this.i=e&&t[e-1].item||null,this.d=e&&t[e-1].d||null)}else this.i=null,this.d=null}.bind(this),n=this.i&&this.t.hasParent(this.i)&&this.t.parent(this.i)||null,l=n?this.t.hasParent(n)&&this.t.parent(n):null;if(this.i&&this.d&&this.old._id==this.d._id&&this.old._type==this.d._type){var d=this.t.parent(this.i)||null;if(0==d.length&&"UPDATE"==o.op)u();else{var c=function(){if(!n||l){var t=this.d;return i(),void(this.i?(this.load=!0,this.success=function(){f()}.bind(this),this.notFound=r,this.b._findTreeChildNode(this.i,{_id:this.new._pid,_type:t._type},this)):f())}var o=null,d=this.t.siblings(this.i)||[];if(d.push(this.i[0]),a.each(d,function(t){var i=e.t.itemData(s(t));i._id==e.new._pid&&(o=t,e.pI.push({coll:!0,item:o,d:i}))}),o){this.load=!0,this.success=function(){f()}.bind(this),this.notFound=r;this.new._pid,e.d._type;o=s(o);var c=this.t.wasLoad(o),u=function(){e.i=o,e.d=e.d,e.pI.push({coll:!1,item:o,d:e.d}),e.success()};!c&&e.load?e.t.open(o,{success:u,unanimated:!0,fail:function(){var t=e&&e.o&&e.o.fail;t&&"function"==typeof t&&t.apply(e.t,[])}}):u()}}.bind(this);this.t.remove(this.i,{success:function(){return i(),n&&!l&&d&&0==e.t.children(d).length?e.t.setInode(d,{success:function(){e.t.unload(d,{success:function(){setTimeout(c)}})}}):setTimeout(c),!0}})}}r()}.bind(o),c=function(e){var t=function(){if(pI.length){pI.pop();var e=pI.length;this.i=e&&pI[e-1].item||null,this.d=e&&pI[e-1].d||null,e&&pI[e-1].coll&&(pI.pop(),e=pI.length,this.i=e&&pI[e-1].item||null,this.d=e&&pI[e-1].d||null)}else this.i=null,this.d=null}.bind(this);this.i?(this.load=!0,this.success=function(){f()}.bind(this),e._type==old._type&&(t(),e=this.d,t()),e=this.new._pid,this.notFound=r,this.b._findTreeChildNode(this.i,e,this)):f()}.bind(o),u=function(){if(this.i&&this.d&&this.new._type==this.d._type){var i=this,n=this.d._id;if(this.new._id!=this.d._id){this.t.itemData(o.i)._id=n=this.new._id}this.new._id==n&&(a.extend(this.d,{_id:this.new._id,_label:this.new._label,label:this.new.label}),this.t.setLabel(o.i,{label:this.new.label}),this.t.addIcon(o.i,{icon:this.new.icon}),this.t.setId(o.i,{id:this.new.id}),this.t.openPath(this.i),this.t.deselect(this.i),setTimeout(function(){i.t.select(i.i)},10))}var s=this.o&&this.o.success;s&&"function"==typeof s&&s.apply(this.t,[this.i,e,t])}.bind(o),p=function(){var e,t=this;return t.success=p,t.p.length?(e=t.p.shift(),t.p.length||("RECREATE"==t.op?(t.load=!1,t.success=d,t.notFound=c):(t.success=u,t.notFound=r)),t.b._findTreeChildNode(t.i,e,t)):1==t.p.length&&(t.notFound=c),!0}.bind(o),f=function(){var i=this,n=(i.i||this.t.wasLoad(i.i))&&this.t.first(i.i),a=function(e,i){var n=this;n.success=e,n.notFound=i,n.b._findTreeChildNode(n.i,t,n)}.bind(i),o=function(){this.t.openPath(this.i),this.t.select(this.i),i.o&&i.o.success&&"function"==typeof i.o.success&&i.o.success.apply(i.t,[i.i,t])}.bind(i),r=function(){var i,n=this,a=n.t.children(n.i),o=0,r=a.length-1,d=function(){for(;r>=o;){i=a.eq(o);var e=n.t.itemData(i);if(1==l.natural_sort(e._label,t._label))return!0;o++}return r!=a.length-1?(i=a.eq(r),!0):(i=null,!1)};if(function(){for(;r-o>22;){i=a.eq(o);var e=n.t.itemData(i);if(-1!=l.natural_sort(e._label,t._label))return!0;if(i=a.eq(r),e=n.t.itemData(i),1!=l.natural_sort(e._label,t._label))return!0;var s=o+Math.round((r-o)/2);i=a.eq(s),e=n.t.itemData(i);var c=l.natural_sort(e._label,t._label);if(0==c)return!0;-1==c?(o=s+1,r--):(o++,r=s-1)}return d()}())n.t.before(i,{itemData:t,success:function(){var a=s(arguments[1].items[0]);n.t.openPath(a),n.t.select(a),n.o&&n.o.success&&"function"==typeof n.o.success&&n.o.success.apply(n.t,[i,e,t])},fail:function(){console.log("Failed to add before.."),n.o&&n.o.fail&&"function"==typeof n.o.fail&&n.o.fail.apply(n.t,[i,e,t])}});else{var c=function(){n.t.append(n.i,{itemData:t,success:function(){var i=s(arguments[1].items[0]);n.t.openPath(i),n.t.select(i),n.o&&n.o.success&&"function"==typeof n.o.success&&n.o.success.apply(n.t,[n.i,e,t])},fail:function(){console.log("Failed to append"),n.o&&n.o.fail&&"function"==typeof n.o.fail&&n.o.fail.apply(n.t,[n.i,e,t])}})};n.i&&!n.t.isInode(n.i)?n.t.setInode(n.i,{success:c}):c()}}.bind(i);if(!n&&i.t.wasLoad(i.i))return void i.t.unload(i.i,{success:function(){a(o,function(){var i=this&&this.o;i&&i.fail&&"function"==typeof i.fail&&i.fail.apply(this.t,[this.i,e,t])}.bind(this))}.bind(this),fail:function(){var i=this&&this.o;i&&i.fail&&"function"==typeof i.fail&&i.fail.apply(this.t,[this.i,e,t])}.bind(this)});a(o,r)}.bind(o);o.t.wasInit()&&t&&e&&(o.pI.push(e),t._label=t.label,t.label=a.escape(t.label),o.b.Nodes[t._type].is_collection&&"collection_count"in e&&e.collection_count>0&&(t.label=a.escape(t._label)+" <span>("+e.collection_count+")</span>"),"server"!=e._type||"server"!=t._type||e._pid==t._pid&&e._label==t._label&&e.icon==t.icon?e._pid!=t._pid||e._label!=t._label?(o.op="RECREATE",p()):(o.op="UPDATE",p()):(o.op="RECREATE",p()))},onRefreshTreeNode:function(t,i){var n,o=t&&this.tree.itemData(t),r=o&&o._type&&this.Nodes[o._type],l={b:this,d:o,i:t,p:null,pI:[],t:this.tree,o:i},c=-1;if(r?n=this.tree.isInode(t)&&this.tree.isOpen(t):(t=null,l.i=null,l.d=null),l.branch=l.t.serialize(t,{},function(e,t,i){if(!++c||i.inode&&i.open)return{_id:i._id,_type:i._type,branch:i.branch,open:i.open}}),!r)return void l.t.destroy({success:function(){b(l.b),l.t=l.b.tree,l.i=null,l.b._refreshNode(l,l.branch)},error:function(){var e=i.o&&i.o.fail||i.fail;"function"==typeof e&&e()}});var u=function(t,i,n){var o=n.getTreeNodeHierarchy(t),r=n.generate_url(t,"nodes",i,!0);s.ajax({url:r,type:"GET",cache:!1,dataType:"json",success:function(e){var t=e.result||e.data;t._label=t.label,t.label=a.escape(t.label);var s=l.t.itemData(l.i);if(a.extend(s,t),l.t.setLabel(l.i,{label:i.label}),l.t.addIcon(l.i,{icon:i.icon}),l.t.setId(l.i,{id:i.id}),l.t.setInode(l.i,{inode:t.inode}),n.can_expand&&"function"==typeof n.can_expand&&!n.can_expand(s))return void l.t.unload(l.i);l.b._refreshNode(l,l.branch);var o=l.o&&l.o.success||l.success;o&&"function"==typeof o&&o()},error:function(i,n,a){if(!d.pgHandleItemError(i,n,a,{item:t,info:o})){var r=(i.responseText,i.getResponseHeader("Content-Type")),c=(i.responseText,r&&0==r.indexOf("application/json")&&s.parseJSON(i.responseText)||{});if(410==i.status&&0==c.success){var u=l.t.parent(l.i);l.t.remove(l.i,{success:function(){if(u)try{p.Events.trigger("pgadmin:browser:tree:refresh",u)}catch(e){}}})}d.pgNotifier(n,i,e("Error retrieving details for the node."),function(){console.log(arguments)})}}})}.bind(this);if(r&&r.collection_node){var f=l.i=this.tree.parent(t),h=function(){this.tree.unload(t,{success:function(){t=f,o=l.d=l.t.itemData(l.i),r=l.b.Nodes[o._type],t=f,u(t,o,r)},fail:function(){console.log(arguments)}})}.bind(this);this.tree.isInode(t)?h():this.tree.setInode(t,{success:h})}else n?this.tree.unload(t,{success:u.bind(this,t,o,r),fail:function(){console.log(arguments)}}):!this.tree.isInode(t)&&o.inode?this.tree.setInode(t,{success:u.bind(this,t,o,r),fail:function(){console.log(arguments)}}):u(t,o,r)},removeChildTreeNodesById:function(e,t,i){var n=p.tree;if(e&&t){var s,a,o=n.children(e),r=0,l=o.length;for(e=null;r<l;r++)if(s=o.eq(r),a=n.itemData(s),a._type==t){e=s;break}}if(e){for(var s,a,o=n.children(e),r=0,l=o.length;r<l;r++)s=o.eq(r),a=n.itemData(s),-1!=i.indexOf(a._id)&&p.removeTreeNode(s,!1,e);return!0}return!1},removeTreeNode:function(e,t,i){var n=p.tree,s=null;return!!e&&(t&&(s=n.next(e),s&&s.length||(s=n.prev(e))&&s.length||(s=i||n.parent(e)),s&&n.select(s)),n.remove(e),!0)},findSiblingTreeNode:function(e,t){for(var i,n,s=p.tree,a=s.parent(e),o=s.children(a),r=0;r<o.length;r++)if(n=o.eq(r),(i=s.itemData(n))&&i._id==t)return n;return null},findParentTreeNodeByType:function(e,t){var i,n=p.tree,s=e;do{if((i=n.itemData(s))&&i._type==t)return s;s=n.hasParent(s)?n.parent(s):null}while(s);return null},findChildCollectionTreeNode:function(e,t){var i,n=p.tree,s=0,a=e,o=e&&n.children(e);if(!o||!o.length)return null;for(;s<o.length;s++)if(a=o.eq(s),(i=n.itemData(a))&&i._type==t)return a;return null},addChildTreeNodes:function(e,t,i,n,o){var r=i in p.Nodes&&p.Nodes[i],l=n.length&&a.extend({},a.mapObject(e,function(e,t){return e.priority-=1,e})),c=[];if(!r)return void console.warning("Developer: Couldn't find the module for the given child: ",a.clone(arguments));p.tree.wasLoad(t)||p.tree.isLeaf(t)?function e(t){if(!n.length)return void(t&&t());var a,o={_id:n.pop(),_type:i,priority:0};l[i]=o,a=r.generate_url(null,"nodes",o,!0,l),console.debug("Fetching node information using: ",a),s.ajax({url:a,dataType:"json",success:function(i){i.success&&c.push(i.data),e(t)},error:function(i,n,a){try{var o=s.parseJSON(i.responseText);0==o.success&&d.error(o.errormsg)}catch(e){}e(t)}})}(function(){console.log("Append this nodes:",c),a.each(c,function(t){p.Events.trigger("pgadmin:browser:tree:add",t,e)}),o&&o()}):o&&o()},_refreshNode:function(e,t){var i=function(e){for(var t,i,n=this,s=0,a=e.branch&&e.branch.length||0;s<a;s++){i=e.branch[s];var o=n.b.Nodes[i._type];t={b:n.b,t:n.t,pI:[],i:n.i,d:i,select:n.select,hasId:o&&!o.collection_node,o:n.o,load:!0},t.success=function(){this.b._refreshNode.call(this.b,this,this.d)}.bind(t),function(e,t,i){setTimeout(function(){i.b._findTreeChildNode(e,t,i)},0)}(n.i,i,t)}}.bind(e,t);t&&t.open&&(e.t.isOpen(e.i)?i():e.t.open(e.i,{unanimated:!0,success:i,fail:function(){}}))},editor_shortcut_keys:{"Ctrl-Space":"autocomplete","Cmd-Space":"autocomplete","Ctrl-A":"selectAll","Cmd-A":"selectAll","Ctrl-Y":"redo","Cmd-Y":"redo","Ctrl-Z":"undo","Cmd-Z":"undo","Ctrl-D":"deleteLine","Cmd-D":"deleteLine","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Alt-Left":"goGroupLeft","Cmd-Alt-Left":"goGroupLeft","Ctrl-Alt-Right":"goGroupRight","Cmd-Alt-Right":"goGroupRight","Shift-Tab":"indentLess"},editor_options:{tabSize:p.utils.tabSize,wrapCode:p.utils.wrapCode,insert_pair_brackets:p.utils.insertPairBrackets,brace_matching:p.utils.braceMatching,indent_with_tabs:p.utils.is_indent_with_tabs}}),delete h.keyMap.emacsy["Ctrl-V"],"True"==p.utils.useSpaces&&(l.Browser.editor_shortcut_keys.Tab="insertSoftTab"),window.onbeforeunload=function(t){var i=t||window.event,n=o(e("Are you sure you wish to close the %s browser?")).sprintf(p.utils.app_name).value();return i&&(i.returnValue=n),n},l.Browser}.apply(t,s))&&(e.exports=a)}).call(t,i("./node_modules/jquery/dist/jquery.js"))},"./pgadmin/browser/static/js/collection.js":function(e,t,i){"use strict";var n,s;n=[i("./pgadmin/static/js/gettext.js"),i("./node_modules/jquery/dist/jquery.js"),i("./node_modules/underscore/underscore.js"),i("./node_modules/underscore.string/index.js"),i("./pgadmin/static/js/pgadmin.js"),i("./node_modules/backbone/backbone.js"),i("./node_modules/alertifyjs/build/alertify.js"),i("./node_modules/backform/src/backform.js"),i("./node_modules/backgrid/lib/backgrid.js"),i("./pgadmin/static/js/browser/generate_url.js"),i("./pgadmin/static/js/backform.pgadmin.js"),i("./pgadmin/static/js/backgrid.pgadmin.js"),i("./pgadmin/browser/static/js/node.js")],void 0!==(s=function(e,t,i,n,s,a,o,r,l,d){var c=s.Browser=s.Browser||{};return c.Collection?c.Collection:(c.Collection=function(){},i.extend(c.Collection,i.clone(c.Node),{Init:function(){this.node_initialized||(this.node_initialized=!0,s.Browser.add_menus([{name:"refresh",node:this.type,module:this,applies:["object","context"],callback:"refresh",priority:1,label:e("Refresh..."),icon:"fa fa-refresh"}]),s.DataGrid&&s.unsupported_nodes&&-1==i.indexOf(s.unsupported_nodes,this.type)&&s.Browser.add_menus([{name:"show_query_tool",node:this.type,module:this,applies:["context"],callback:"show_query_tool",priority:998,label:e("Query Tool..."),icon:"fa fa-bolt"}]))},hasId:!1,is_collection:!0,collection_node:!0,hasCollectiveStatistics:!0,showProperties:function(s,a,d){var u=this,p=d.$container.find(".obj_properties").first(),f=p.data("obj-view"),h=t("<div></div>").addClass("pg-prop-content col-xs-12"),m=c.Nodes[u.node],g=this.generate_url(s,"properties",a),v=new(m.Collection.extend({url:g,model:m.model})),b=this.getTreeNodeHierarchy.apply(this,[s]),_=r.generateGridColumnsFromModel(b,m.model,"properties",u.columns),y=new l.Grid({columns:_.columns,collection:v,className:"backgrid table-bordered"}),w={remove:function(){this.grid&&(this.grid.collection&&(this.grid.collection.reset(null,{silent:!0}),delete this.grid.collection),delete this.grid,this.grid=null)},grid:y};if(f){if(i.isEqual(t(d).data("node-prop"),g))return;t(d).data("node-prop",g),p.data("obj-view",null)}p.empty(),p.data("obj-view",w),h.append(y.render().$el),p.append(h),v.fetch({reset:!0,error:function(t,i,a){c.Events.trigger("pgadmin:collection:retrieval:error","properties",t,i,a,s,u),o.pgHandleItemError(t,i,a,{item:s,info:b})||o.pgNotifier(i,t,n(e("Error retrieving properties - %s.")).sprintf(a||u.label).value(),function(){console.log(arguments)})}})},generate_url:function(e,t){var i={properties:"obj",children:"nodes"},n=this,a=function(e,t){return t!=n.type},o=this.getTreeNodeHierarchy(e),r=t in i?i[t]:t;return d.generate_url(s.Browser.URL,o,r,n.node,a)}}),c.Collection)}.apply(t,n))&&(e.exports=s)},"./pgadmin/browser/static/js/datamodel.js":function(e,t,i){"use strict";var n,s,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n=[i("./node_modules/underscore/underscore.js"),i("./node_modules/underscore.string/index.js"),i("./pgadmin/static/js/pgadmin.js"),i("./node_modules/jquery/dist/jquery.js"),i("./node_modules/backbone/backbone.js")],void 0!==(s=function(e,t,i,n,s){var o=i.Browser=i.Browser||{};return o.DataModel=s.Model.extend({on_server:!1,parse:function(t){var i=this;t&&e.isObject(t)&&"node"in t&&t.node&&(i.tnode=e.extend({},t.node),delete t.node);return function n(a){a&&e.isArray(a)&&e.each(a,function(a){var r,l;switch(a.type){case"collection":r=i.get(a.id),l=t[a.id],e.isArray(l)||e.isObject(l)?r&&r instanceof s.Collection?r.reset(l,{silent:!0,parse:!0,on_server:!0}):(r=new o.Node.Collection(l,{model:e.isString(a.model)&&a.model in o.Nodes?o.Nodes[a.model].model:a.model,top:i.top||i,handler:i,parse:!0,silent:!0,attrName:a.id}),i.set(a.id,r,{silent:!0,parse:!0,on_server:!0})):r=null,i.set(a.id,r,{silent:!0}),t[a.id]=r;break;case"model":r=i.get(a.id),l=t[a.id],e.isUndefined(l)||e.isNull(l)?r=null:(r&&r instanceof s.Model||(r=e.isString(a.model)&&a.model in o.Nodes[a.model]?new o.Nodes[a.model].Model(r,{silent:!0,top:i.top||i,handler:i,attrName:a.id}):new a.model(r,{silent:!0,top:i.top||i,handler:i,attrName:a.id})),r.set(l,{parse:!0,silent:!0})),t[a.id]=r;break;case"nested":n(a.schema)}})}(i.schema),t},isNew:function(){return this.has(this.idAttribute)?!this.has(this.idAttribute):!this.on_server},primary_key:function(){if(this.keys&&e.isArray(this.keys)){var t={},i=this;return e.each(i.keys,function(e){t[e]=i.attributes[e]}),JSON.stringify(t)}return this.cid},initialize:function(t,i){var n=this;n._previous_key_values={},!e.isUndefined(i)&&"on_server"in i&&i.on_server&&(n.on_server=!0),s.Model.prototype.initialize.apply(n,arguments),(e.isUndefined(i)||e.isNull(i))&&(i=t||{},t=null),n.sessAttrs={},n.fieldData={},n.origSessAttrs={},n.objects=[],n.arrays=[],n.attrName=i.attrName,n.top=i.top||n.collection&&n.collection.top||n.collection||n,n.handler=i.handler||n.collection&&n.collection.handler,n.trackChanges=!1,n.errorModel=new s.Model,n.node_info=i.node_info;var a;return function t(i){i&&e.isArray(i)&&e.each(i,function(i){switch(i.type){case"int":case"numeric":n.fieldData[i.id]={id:i.id,label:i.label,type:i.type,min:i.min||void 0,max:i.max||void 0};break;default:n.fieldData[i.id]={id:i.id,label:i.label,type:i.type}}switch(i.type){case"array":n.arrays.push(i.id);break;case"collection":if(!((a=n.get(i.id))&&a instanceof o.Node.Collection))if(e.isString(i.model)&&i.model in o.Nodes){var r=o.Nodes[i.model];a=new r.Collection(a,{model:r.model,top:n.top||n,handler:n,attrName:i.id})}else a=new o.Node.Collection(a,{model:i.model,top:n.top||n,handler:n,attrName:i.id});a.name=i.id,n.objects.push(i.id),n.set(i.id,a,{silent:!0});break;case"model":a=n.get(i.id),a&&a instanceof s.Model||(a=e.isString(i.model)&&i.model in o.Nodes[i.model]?new o.Nodes[i.model].Model(a,{top:n.top||n,handler:n,attrName:i.id}):new i.model(a,{top:n.top||n,handler:n,attrName:i.id})),a.name=i.id,n.objects.push(i.id),n.set(i.id,a,{silent:!0});break;case"nested":t(i.schema);break;default:return}})}(n.schema),n.handler&&n.handler.trackChanges&&n.startNewSession(),"keys"in n&&e.isArray(n.keys)&&e.each(n.keys,function(e){n.on("change:"+e,function(t){n._previous_key_values[e]=t.previous(e)})}),n},reset:function(e){var t;e&&e.stop&&this.stopSession();for(var i in this.objects)(t=this.get(i))&&(t instanceof o.DataModel?t.reset(e):t instanceof s.Model?t.clear(e):t instanceof o.DataCollection?t.reset(e):t instanceof s.Collection&&(t.each(function(i){i instanceof s.DataModel&&(t.reset(),t.clear(e))}),e instanceof Array||(e=[e]),s.Collection.prototype.reset.apply(t,e)));this.clear(e)},sessChanged:function(){var t=this;return e.size(t.sessAttrs)>0||e.some(t.objects,function(i){var n=t.get(i);return!e.isNull(n)&&!e.isUndefined(n)&&n.sessChanged()})},sessValid:function(){var t=this;return!("default_validate"in t&&"function"==typeof t.default_validate&&e.isString(t.default_validate()))&&!("validate"in t&&e.isFunction(t.validate)&&e.isString(t.validate.apply(t)))},set:function(t,i,n){var o=e.isObject(t)?i:n;this._changing=!0,this._previousAttributes=e.clone(this.attributes),this.changed={};var r=s.Model.prototype.set.call(this,t,i,n);if(this._changing=!1,o&&o.internal||!this.trackChanges)return!0;if(null!=t&&r){var l,d={},c=this,u=function(t,i){i in c.objects||(d[i]=t,e.isEqual(c.origSessAttrs[i],t)?delete c.sessAttrs[i]:c.sessAttrs[i]=t)};return"object"===(void 0===t?"undefined":a(t))?e.each(t,u):u(i,t),c.trigger("pgadmin-session:set",c,d),n&&n.silent||c.trigger("change",c,n),"default_validate"in c&&"function"==typeof c.default_validate&&(l=c.default_validate()),"validate"in c&&"function"==typeof c.validate&&(l||(l=c.validate(e.keys(d)))),0==e.size(c.errorModel.attributes)?c.collection||c.handler?(c.collection||c.handler).trigger("pgadmin-session:model:valid",c,c.collection||c.handler):c.trigger("pgadmin-session:valid",c.sessChanged(),c):(l=l||e.values(c.errorModel.attributes)[0],c.collection||c.handler?(c.collection||c.handler).trigger("pgadmin-session:model:invalid",l,c,c.collection||c.handler):c.trigger("pgadmin-session:invalid",l,c)),r}return r},toJSON:function(t,i){var n,a=this,o=a.isNew();return t=void 0!==t&&1==t,!t||o?n=s.Model.prototype.toJSON.call(this,arguments):(n={},n[a.idAttribute||"_id"]=a.get(a.idAttribute||"_id"),n=e.extend(n,a.sessAttrs)),e.each(a.objects,function(e){var s=a.get(e);t?n[e]instanceof Array?n[e]=JSON.stringify(n[e]):s&&s.sessChanged&&s.sessChanged()||o?(n[e]=s&&s.toJSON(!o),s&&i&&"GET"==i&&(n[e]=JSON.stringify(n[e]))):delete n[e]:n[e]instanceof Array||(n[e]=s&&s.toJSON())}),t&&e.each(a.arrays,function(e){n[e]&&n[e]instanceof Array&&(n[e]=JSON.stringify(n[e]))}),n},startNewSession:function(){var t=this;t.trackChanges&&(t.trigger("pgadmin-session:stop",t),t.off("pgadmin-session:model:invalid",t.onChildInvalid),t.off("pgadmin-session:model:valid",t.onChildValid),t.off("pgadmin-session:changed",t.onChildChanged),t.off("pgadmin-session:added",t.onChildChanged),t.off("pgadmin-session:removed",t.onChildChanged)),t.trackChanges=!0,t.sessAttrs={},t.origSessAttrs=e.clone(t.attributes);e.each(t.objects,function(i){var n=t.get(i);e.isUndefined(n)||e.isNull(n)||(delete t.origSessAttrs[i],n&&"startNewSession"in n&&e.isFunction(n.startNewSession)&&n.startNewSession())}),t.trigger("pgadmin-session:start",t),t.on("pgadmin-session:model:invalid",t.onChildInvalid),t.on("pgadmin-session:model:valid",t.onChildValid),t.on("pgadmin-session:changed",t.onChildChanged),t.on("pgadmin-session:added",t.onChildChanged),t.on("pgadmin-session:removed",t.onChildChanged)},onChildInvalid:function(t,i){var n=this;if(n.trackChanges&&i){var s=i.attrName;if(!s){var a=i.primary_key&&"function"==typeof i.primary_key,o=a?i.primary_key():i.cid,r=a?function(e){var t=n.get("k");return!(!t||t.primary_key()!==o)&&(s=e,!0)}:function(e){return n.get(e).cid===o&&(s=e,!0)};e.findIndex(n.objects,r)}s&&(n.errorModel.set(s,t),n.handler?n.handler.trigger("pgadmin-session:model:invalid",t,n,n.handler):n.trigger("pgadmin-session:invalid",t,n))}return this},onChildValid:function(t){var i=this;if(i.trackChanges&&t){var n=t.attrName;if(!n){var a=t.primary_key&&"function"==typeof t.primary_key,o=a?t.primary_key():t.cid,r=a?function(e){var t=i.get("k");return!(!t||t.primary_key()!==o)&&(n=e,!0)}:function(e){var t=i.get("k");return!(!t||t.cid!==o)&&(n=e,!0)};e.findIndex(i.objects,r)}var l=null,d=function(t,i){return"default_validate"in t&&"function"==typeof t.default_validate&&(l=t.default_validate(),e.isString(l))?l:"validate"in t&&"function"==typeof t.validate?l=t.validate(i):null};if(t instanceof s.Collection){for(var c in t.models)if(d(t.models[c]))break}else t instanceof s.Model&&d(t);n&&i.errorModel.has(n)&&(l?i.errorModel.set(n,l):i.errorModel.unset(n)),0!=e.size(i.errorModel.attributes)||d(i,n&&[n])?(l=l||e.values(i.errorModel.attributes)[0],i.handler?i.handler.trigger("pgadmin-session:model:invalid",l,i,i.handler):i.trigger("pgadmin-session:invalid",l,i)):i.handler?i.handler.trigger("pgadmin-session:model:valid",i,i.handler):i.trigger("pgadmin-session:valid",i.sessChanged(),i)}},onChildChanged:function(e){var t=this;t.trackChanges&&t.collection&&t.collection.trigger("change",t)},stopSession:function(){var t=this;t.trackChanges&&(t.off("pgadmin-session:model:invalid",t.onChildInvalid),t.off("pgadmin-session:model:valid",t.onChildValid),t.off("pgadmin-session:changed",t.onChildChanged),t.off("pgadmin-session:added",t.onChildChanged),t.off("pgadmin-session:removed",t.onChildChanged)),t.trackChanges=!1,t.sessAttrs={},t.origSessAttrs={},e.each(t.objects,function(i){var n=t.get(i);e.isUndefined(n)||e.isNull(n)||(t.origSessAttrs[i]=null,delete t.origSessAttrs[i],n&&"stopSession"in n&&e.isFunction(n.stopSession)&&n.stopSession())}),t.trigger("pgadmin-session:stop")},default_validate:function(){for(var t,i,n,s,a=0,o=e.keys(this.attributes),r=o.length;a<r;a++)if(n=this.attributes[o[a]],i=this.fieldData[o[a]],t=null,e.isUndefined(n)||e.isNull(n)||""==String(n).replace(/^\s+|\s+$/g,""))i&&this.errorModel.unset(i.id);else{if(!i)continue;if(!(s=i.type||void 0))continue;switch(s){case"int":t=this.integer_validate(n,i);break;case"numeric":t=this.number_validate(n,i)}if(t)return this.errorModel.set(i.id,t),t;this.errorModel.unset(i.id)}return null},check_min_max:function(e,n){var s=n.label,a=n.min,o=n.max;return a&&e<a?t(i.Browser.messages.MUST_GR_EQ).sprintf(s,a).value():o&&e>o?t(i.Browser.messages.MUST_LESS_EQ).sprintf(s,o).value():null},number_validate:function(e,n){return new RegExp("^-?[0-9]+(.?[0-9]*)?$").test(e)?this.check_min_max(e,n):t(i.Browser.messages.MUST_BE_NUM).sprintf(n.label).value()},integer_validate:function(e,n){return new RegExp("^-?[0-9]*$").test(e)?this.check_min_max(e,n):t(i.Browser.messages.MUST_BE_INT).sprintf(n.label).value()}}),o.DataCollection=s.Collection.extend({initialize:function(e,t){var i=this;return t=t||{},i.sessAttrs={changed:[],added:[],deleted:[],invalid:[]},i.top=t.top||i,i.attrName=t.attrName,i.handler=t.handler,i.trackChanges=!1,i.on("add",i.onModelAdd),i.on("remove",i.onModelRemove),i.on("change",i.onModelChange),i.handler&&i.handler.trackChanges&&i.startNewSession(),i},startNewSession:function(){var t,i=this;i.trackChanges&&(i.trigger("pgadmin-session:stop",i),i.off("pgadmin-session:model:invalid",i.onModelInvalid),i.off("pgadmin-session:model:valid",i.onModelValid)),i.trackChanges=!0,i.sessAttrs={changed:[],added:[],deleted:[],invalid:[]},e.each(i.models,function(n){"startNewSession"in n&&e.isFunction(n.startNewSession)&&n.startNewSession(),"default_validate"in n&&"function"==typeof n.default_validate&&(t=n.default_validate()),e.isString(t)?i.sessAttrs.invalid[n.cid]=t:"validate"in n&&"function"==typeof n.validate&&(t=n.validate())&&(i.sessAttrs.invalid[n.cid]=t)}),i.trigger("pgadmin-session:start",i),i.on("pgadmin-session:model:invalid",i.onModelInvalid),i.on("pgadmin-session:model:valid",i.onModelValid)},onModelInvalid:function(e,t){var i=this,n=i.sessAttrs.invalid;return i.trackChanges&&(n[t.cid]=e,i.handler?i.handler.trigger("pgadmin-session:model:invalid",e,i,i.handler):i.trigger("pgadmin-session:invalid",e,i)),!0},onModelValid:function(e){var t=this,i=t.sessAttrs.invalid;if(t.trackChanges){var n=t.checkDuplicateWithModel(e);n&&e.cid in i&&delete i[e.cid],n&&this.triggerValidationEvent.apply(this)}return!0},stopSession:function(){var t=this;t.trackChanges=!1,t.sessAttrs={changed:[],added:[],deleted:[],invalid:[]},e.each(t.models,function(t){"stopSession"in t&&e.isFunction(t.stopSession)&&t.stopSession()})},sessChanged:function(){return this.sessAttrs.changed.length>0||this.sessAttrs.added.length>0||this.sessAttrs.deleted.length>0},toJSON:function(t){var i=this,t=void 0!==t&&1==t;if(t){var n={};return n.added=[],e.each(this.sessAttrs.added,function(e){n.added.push(e.toJSON())}),0==n.added.length&&delete n.added,n.changed=[],e.each(i.sessAttrs.changed,function(e){n.changed.push(e.toJSON(!0))}),0==n.changed.length&&delete n.changed,n.deleted=[],e.each(i.sessAttrs.deleted,function(e){n.deleted.push(e.toJSON())}),0==n.deleted.length&&delete n.deleted,0==e.size(n)?null:n}return s.Collection.prototype.toJSON.call(i)},reset:function(e){e&&e.stop&&this.stopSession(),this.each(function(t){t&&(t instanceof o.DataModel?t.reset(e):t.clear(e))}),s.Collection.prototype.reset.apply(this,arguments)},objFindInSession:function(t,i){var n=t.primary_key&&"function"==typeof t.primary_key,s=n?t.primary_key():t.cid,a=n?function(e){return e.primary_key()===s}:function(e){return e.cid===s};return e.findIndex(this.sessAttrs[i],a)},onModelAdd:function(t){if(!this.trackChanges)return!0;var i,n=this,s=(e.size(n.sessAttrs.invalid),n.objFindInSession(t,"deleted"));if(s>=0){var a=n.sessAttrs.deleted[s];t.origSessAttrs=e.clone(a.origSessAttrs),t.attributes=e.extend(t.attributes,a.attributes),t.sessAttrs=e.clone(a.sessAttrs),n.sessAttrs.deleted.splice(s,1),(!1 in t||t.sessChanged())&&n.sessAttrs.changed.push(t),(n.handler||n).trigger("pgadmin-session:added",n,t),"default_validate"in t&&"function"==typeof t.default_validate&&(i=t.default_validate()),e.isString(i)?n.sessAttrs.invalid[t.cid]=i:"validate"in t&&"function"==typeof t.validate&&(i=t.validate())&&(n.sessAttrs.invalid[t.cid]=i)}else"default_validate"in t&&"function"==typeof t.default_validate&&(i=t.default_validate()),e.isString(i)?n.sessAttrs.invalid[t.cid]=i:"validate"in t&&"function"==typeof t.validate&&(i=t.validate())&&(n.sessAttrs.invalid[t.cid]=i),n.sessAttrs.added.push(t),(n.handler||n).trigger("pgadmin-session:added",n,t);return this.triggerValidationEvent.apply(this),!0},onModelRemove:function(t){if(!this.trackChanges)return!0;t.errorModel.clear();var i=this,n=i.sessAttrs.invalid,s=e.clone(t),a=i.objFindInSession(t,"added");return t.cid in n&&delete n[t.cid],a>=0?(i.sessAttrs.added.splice(a,1),(i.handler||i).trigger("pgadmin-session:removed",i,s),i.checkDuplicateWithModel(s),this.triggerValidationEvent.apply(this),!0):(a=i.objFindInSession(t,"changed"),a>=0?(i.sessAttrs.changed.splice(a,1),(i.handler||i).trigger("pgadmin-session:removed",i,s)):(i.handler||i).trigger("pgadmin-session:removed",i,s),i.sessAttrs.deleted.push(t),i.checkDuplicateWithModel(t),this.triggerValidationEvent.apply(this),!0)},triggerValidationEvent:function(){var e=this,t=null,i=e.sessAttrs.invalid,n=[];for(var s in i){if(t=i[s])break;n.push(s)}for(s in n)delete i[n[s]];t?e.handler?e.handler.trigger("pgadmin-session:model:invalid",t,e,e.handler):e.trigger("pgadmin-session:invalid",t,e):e.handler?e.handler.trigger("pgadmin-session:model:valid",e,e.handler):e.trigger("pgadmin-session:valid",e.sessChanged(),e)},onModelChange:function(e){var t=this;if(!(this.trackChanges&&e instanceof o.Node.Model))return!0;var i=t.objFindInSession(e,"added");return i>=0?((t.handler||t).trigger("pgadmin-session:changed",t,e),!0):(i=t.objFindInSession(e,"changed"),!1 in e?((t.handler||t).trigger("pgadmin-session:changed",t,e),i>=0||(t.sessAttrs.changed.push(e),!0)):i>=0?e.sessChanged()?((t.handler||t).trigger("pgadmin-session:changed",t,e),!0):(t.sessAttrs.changed.splice(i,1),(t.handler||t).trigger("pgadmin-session:changed",t,e),!0):(e.sessChanged()&&(t.sessAttrs.changed.push(e),(t.handler||t).trigger("pgadmin-session:changed",t,e)),!0))},checkDuplicateWithModel:function(t){if(!("keys"in t)||e.isEmpty(t.keys))return!0;var i=this,n={},s={};e.each(t.keys,function(e){n[e]=t.get(e),e in t._previous_key_values?s[e]=t._previous_key_values[e]:s[e]=t.previous(e)}),t._previous_key_values={};var a=i.where(s);if(1==a.length){var o=a[0];i.clearInvalidSessionIfModelValid(o)}var r=i.where(n);if(0==r.length)i.clearInvalidSessionIfModelValid(t);else{if(1!=r.length){var l="Duplicate rows.";return setTimeout(function(){e.each(r,function(e){i.trigger("pgadmin-session:model:invalid",l,e,i.handler),e.trigger("pgadmin-session:model:duplicate",e,l)})},10),!1}i.clearInvalidSessionIfModelValid(t),i.clearInvalidSessionIfModelValid(r[0])}return!0},clearInvalidSessionIfModelValid:function(t){var i=t.errorModel.attributes,n=this.sessAttrs.invalid;t.trigger("pgadmin-session:model:unique",t),0==e.size(i)?delete n[t.cid]:n[t.cid]=i[Object.keys(i)[0]]}}),o.Events=e.extend({},s.Events),o}.apply(t,n))&&(e.exports=s)},"./pgadmin/browser/static/js/error.js":function(e,t,i){"use strict";var n,s;n=[i("./pgadmin/static/js/gettext.js"),i("./node_modules/underscore/underscore.js"),i("./node_modules/alertifyjs/build/alertify.js"),i("./pgadmin/static/js/pgadmin.js")],void 0!==(s=function(e,t,i,n){return n.Browser=n.Browser||{},t.extend(n.Browser,{report_error:function(t,n,s){var a='<div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">           <div class="panel panel-default">           <div class="panel-heading" role="tab" id="headingOne">           <h4 class="panel-title">           <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">           '+e("Error message")+'</a>        </h4>        </div>        <div id="collapseOne" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingOne">        <div class="panel-body" style="overflow: auto;">'+unescape(n)+"</div>        </div>        </div>";null!=s&&""!=s&&(a+='<div class="panel panel-default">            <div class="panel-heading" role="tab" id="headingTwo">            <h4 class="panel-title">            <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">            '+e("Additional info")+'</a>          </h4>          </div>          <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">          <div class="panel-body" style="overflow: auto;">'+unescape(s)+"</div>          </div>          </div>          </div>"),a+="</div>",i.alert(t,a)}}),n.Browser.report_error}.apply(t,n))&&(e.exports=s)},"./pgadmin/browser/static/js/frame.js":function(e,t,i){"use strict";(function(n){var s,a;s=[i("./node_modules/underscore/underscore.js"),i("./pgadmin/static/js/pgadmin.js"),i("./pgadmin/static/vendor/webcabin-docker/Build/wcDocker.js")],void 0!==(a=function(e,t){var i=t.Browser=t.Browser||{},s=window.wcDocker;return t.Browser.Frame=function(t){var i=["name","title","width","height","showTitle","isCloseable","isPrivate","url","icon","onCreate"];e.extend(this,e.pick(t,i))},e.extend(t.Browser.Frame.prototype,{name:"",title:"",width:300,height:600,showTitle:!0,isClosable:!0,isPrivate:!1,url:"",icon:"",panel:null,frame:null,onCreate:null,load:function(t){var a=this;a.panel||t.registerPanelType(this.name,{title:a.title,isPrivate:a.isPrivate,onCreate:function(t){n(t).data("pgAdminName",a.name),t.initSize(a.width,a.height),0==t.showTitle&&t.title(!1),t.icon(a.icon),t.closeable(!!a.isCloseable);var o=n('<div style="position:absolute;top:0 !important;width:100%;height:100%;display:table">');t.layout().addItem(o),a.panel=t;var r=new wcIFrame(o,t);n(t).data("frameInitialized",!1),n(t).data("embeddedFrame",r),""!=a.url&&"about:blank"!=a.url?setTimeout(function(){r.openURL(a.url),n(t).data("frameInitialized",!0),i.Events.trigger("pgadmin-browser:frame:urlloaded:"+a.name,r,a.url,self)},50):(r.openURL("about:blank"),n(t).data("frameInitialized",!0),i.Events.trigger("pgadmin-browser:frame:urlloaded:"+a.name,r,a.url,self)),a.events&&e.isObject(a.events)&&e.each(a.events,function(i,n){i&&e.isFunction(i)&&t.on(n,i)}),e.each([s.EVENT.UPDATED,s.EVENT.VISIBILITY_CHANGED,s.EVENT.BEGIN_DOCK,s.EVENT.END_DOCK,s.EVENT.GAIN_FOCUS,s.EVENT.LOST_FOCUS,s.EVENT.CLOSED,s.EVENT.BUTTON,s.EVENT.ATTACHED,s.EVENT.DETACHED,s.EVENT.MOVE_STARTED,s.EVENT.MOVE_ENDED,s.EVENT.MOVED,s.EVENT.RESIZE_STARTED,s.EVENT.RESIZE_ENDED,s.EVENT.RESIZED,s.EVENT.SCROLLED],function(e){t.on(e,a.eventFunc.bind(t,e))}),a.onCreate&&e.isFunction(a.onCreate)&&a.onCreate.apply(a,[t,r,$container])}})},eventFunc:function(e){var t=n(this).data("pgAdminName");try{i.Events.trigger("pgadmin-browser:frame",e,this,arguments),i.Events.trigger("pgadmin-browser:frame:"+e,this,arguments),t&&(i.Events.trigger("pgadmin-browser:frame-"+t,e,this,arguments),i.Events.trigger("pgadmin-browser:frame-"+t+":"+e,this,arguments))}catch(e){console.log(e)}}}),t.Browser.Frame}.apply(t,s))&&(e.exports=a)}).call(t,i("./node_modules/jquery/dist/jquery.js"))},"./pgadmin/browser/static/js/menu.js":function(e,t,i){"use strict";var n,s,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n=[i("./node_modules/underscore/underscore.js"),i("./node_modules/underscore.string/index.js"),i("./pgadmin/static/js/pgadmin.js"),i("./node_modules/jquery/dist/jquery.js")],void 0!==(s=function(e,t,i,n){function s(e,t){return this.each(function(){var i=n(this),s=i.data("pg.menu"),o="object"==(void 0===e?"undefined":a(e))&&e;s||i.data("pg.menu",s=new r(this,o)),s.toggle(t)})}i.Browser=i.Browser||{};var o=i.Browser.MenuItem=function(t){var i=["name","label","priority","module","callback","data","enable","category","target","url","node"],n={url:"#",target:"_self",enable:!0};e.extend(this,n,e.pick(t,i))};e.extend(i.Browser.MenuItem.prototype,{$el:null,generate:function(e,t){return this.create_el(e,t),this.context={name:this.label,disabled:this.is_disabled,callback:this.context_menu_callback.bind(this,t)},this.$el},create_el:function(e,t){var s=n("<a></a>",{id:this.name,href:this.url,target:this.target,"data-toggle":"pg-menu"}).data("pgMenu",{module:this.module||i.Browser,cb:this.callback,data:this.data,name:this.name}).addClass("menu-link");this.is_disabled=this.disabled(e,t),this.icon&&s.append(n("<i></i>",{class:this.icon}));var a=n('<span data-test="menu-item-text"></span>').text("  "+this.label);s.append(a),this.$el=n("<li/>").addClass("menu-item"+(this.is_disabled?" disabled":"")).append(s),this.applyStyle()},applyDisabledStyle:function(){var e=this.$el.find("span"),t=this.$el.find("i");e.addClass("font-gray-4"),e.removeClass("font-white"),t.addClass("font-gray-4"),t.removeClass("font-white")},applyEnabledStyle:function(){var e=this.$el,t=this.$el.find("span");t.addClass("font-white"),t.removeClass("font-gray-4"),e.find("i").addClass("font-white"),e.find("i").removeClass("font-gray-4"),t.mouseover(function(){e.addClass("bg-gray-5")}),t.mouseout(function(){e.removeClass("bg-gray-5")})},applyStyle:function(){this.is_disabled?this.applyDisabledStyle():this.applyEnabledStyle()},update:function(e,t){this.$el&&!this.$el.hasClass("disabled")&&this.$el.addClass("disabled"),this.is_disabled=this.disabled(e,t),this.$el&&!this.is_disabled&&this.$el.removeClass("disabled"),this.$el&&this.applyStyle(),this.context={name:this.label,disabled:this.is_disabled,callback:this.context_menu_callback.bind(this,t)}},context_menu_callback:function(e){var n,s=this;if(s.module.callbacks&&s.callback in s.module.callbacks?n=s.module.callbacks[s.callback]:s.callback in s.module&&(n=s.module[s.callback]),n)n.apply(s.module,[s.data,e]);else if(i.Browser.report_error(t('Developer Warning: Callback - "%s" not found!').sprintf(s.cb).value()),console&&console.warn)try{console.warn("Callback for the menu does not found!"),console.warn(JSON.stringify(s))}catch(e){}},disabled:function(t,i){if(void 0==this.enable)return!1;if(this.node){if(!t)return!0;if(e.isArray(this.node)?-1==e.indexOf(this.node,t):this.node!=t._type)return!0}return e.isBoolean(this.enable)?!this.enable:e.isFunction(this.enable)?!this.enable.apply(this.module,[t,i,this.data]):this.module&&e.isBoolean(this.module[this.enable])?!this.module[this.enable]:!(!this.module||!e.isFunction(this.module[this.enable]))&&!this.module[this.enable].apply(this.module,[t,i,this.data])}}),i.Browser.MenuGroup=function(t,i,s,a){var o,r=e.template(["<% if (above) { %><hr><% } %>",'<li class="menu-item dropdown dropdown-submenu">',' <a href="#" class="dropdown-toggle" data-toggle="dropdown">','  <% if (icon) { %><i class="<%= icon %>"></i><% } %>',"  <span><%= label %></span>"," </a>",' <ul class="dropdown-menu navbar-inverse">'," </ul>","</li>","<% if (below) { %><hr><% } %>"].join("\n")),l={label:t.label,icon:t.icon,above:t.above&&!s,below:t.below},d=n(r(l)),c=d.find(".dropdown-menu"),u={},p=1;a=e.uniqueId(a+"_sub_"),i.sort(function(e,t){return e.label.localeCompare(t.label)}),i.sort(function(e,t){return e.priority-t.priority});for(var f in i)o=i[f],c.append(o.$el),o.is_disabled||(u[a+p]=o.context),p++;var h=0==e.size(u);return{$el:d,priority:t.priority||10,label:t.label,above:l.above,below:t.below,is_disabled:h,context:{name:t.label,icon:t.icon,items:u,disabled:h}}},i.Browser.MenuCreator=function(t,n,s,a,r,l){var d,r,c={common:[]},u=0,p=e.uniqueId("ctx_"),f=1;for(u in n)!function e(t){if(t instanceof o){t.$el&&(t.$el.remove(),delete t.$el),t.generate(a,r);(c[t.category||"common"]=c[t.category||"common"]||[]).push(t)}else for(var i in t)e(t[i])}(n[u]);l=l||{},d=c.common,delete c.common;var h=!0;for(name in c){var m=c[name],g=s[name]||{label:name,single:!1},v=i.Browser.MenuGroup(g,m,h,p);if(m.length<=1&&!g.single){h=!1;for(u in m)d.push(m[u])}else h=m.below,d.push(v)}d.sort(function(e,t){return e.label.localeCompare(t.label)}),d.sort(function(e,t){return e.priority-t.priority});var b=e.size(d);for(u in d){r=d[u],r.priority=r.priority||10,t.append(r.$el);var _=p+"_"+r.priority+"_"+f;1!=f&&r.above&&!r.is_disabled&&(l[_+"_ma"]="----"),r.is_disabled||(l[_+"_ms"]=r.context),p!=b&&r.below&&!r.is_disabled&&(l[_+"_mz"]="----"),f++}return b>0};var r=function e(t,i){this.$element=n(t),this.options=n.extend({},e.DEFAULTS,i),this.isLoading=!1};r.DEFAULTS={},r.prototype.toggle=function(e){if(this.$element.closest(".menu-item").hasClass("disabled"))return e.preventDefault(),!1;var t=this.$element.data("pgMenu");if(t.cb){var n=t.module&&t.module.callbacks&&t.module.callbacks[t.cb]||t.module&&t.module[t.cb];n?(n.apply(t.module,[t.data,i.Browser.tree.selected()]),e.preventDefault()):(i.Browser.report_error('Developer Warning: Callback - "'+t.cb+'" not found!'),console&&console.warn&&console.warn("Callback for the menu for the menu - '"+t.name+"' does not found!"))}};var l=n.fn.button;return n.fn.pgmenu=s,n.fn.pgmenu.Constructor=r,n.fn.pgmenu.noConflict=function(){return n.fn.pgmenu=l,this},n(document).on("click.pg.menu.data-api",'[data-toggle^="pg-menu"]',function(e){var t=n(e.target);t.hasClass("menu-link")||(t=t.closest(".menu-link")),s.call(t,"toggle",e)}).on("focus.pg.menu.data-api blur.pg.menu.data-api",'[data-toggle^="pg-menu"]',function(e){n(e.target).closest(".menu").toggleClass("focus",/^focus(in)?$/.test(e.type))}),i.Browser.MenuItem}.apply(t,n))&&(e.exports=s)},"./pgadmin/browser/static/js/node.js":function(e,t,i){"use strict";var n,s;n=[i("./pgadmin/static/js/gettext.js"),i("./node_modules/jquery/dist/jquery.js"),i("./node_modules/underscore/underscore.js"),i("./node_modules/underscore.string/index.js"),i("./pgadmin/static/js/pgadmin.js"),i("./pgadmin/static/js/browser/generate_url.js"),i("./node_modules/backbone/backbone.js"),i("./pgadmin/static/js/backform.pgadmin.js"),i("./pgadmin/static/js/alertify.pgadmin.defaults.js"),i("./pgadmin/browser/static/js/menu.js"),i("./pgadmin/browser/static/js/datamodel.js")],void 0!==(s=function(e,t,i,n,s,a,o,r,l,d){var c=window.wcDocker,u={ENTER:13,ESCAPE:27,F1:112},p=s.Browser=s.Browser||{},f=function(e,t){return this.child=e,this.parent=t,this};return p.Node?p.Node:(p.Nodes=p.Nodes||{},f.prototype.Init=function(){this.child&&("function"==typeof this.child.Init&&this.child.Init.apply(this.child),this.parent&&"function"==typeof this.parent.Init&&this.parent.Init.apply(this.child))},p.Node=function(){},p.Node.extend=function(e){var t,n=this,a=0;t=function(){return n.apply(this,arguments)},i.extend(t,n,i.omit(e,"callbacks")),t.callbacks=i.extend({},n.callbacks,e.callbacks);for(var o=i.keys(t.callbacks);a<o.length;a++)!function(e){"function"==typeof t.callbacks[e]&&(t.callbacks[e]=t.callbacks[e].bind(t))}(o[a]);return s.register_module("browser",new f(t,n)),t},i.extend(s.Browser.Node,o.Events,{type:void 0,label:"",sqlAlterHelp:"",sqlCreateHelp:"",dialogHelp:"",title:function(e,t){return e.label+(t?" - "+t.label:"")},hasId:!0,Init:function(){var t=this;t.node_initialized||(t.node_initialized=!0,s.Browser.add_menus([{name:"refresh",node:t.type,module:t,applies:["object","context"],callback:"refresh",priority:1,label:e("Refresh..."),icon:"fa fa-refresh"}]),t.canEdit&&s.Browser.add_menus([{name:"show_obj_properties",node:t.type,module:t,applies:["object","context"],callback:"show_obj_properties",priority:999,label:e("Properties..."),data:{action:"edit"},icon:"fa fa-pencil-square-o"}]),t.canDrop&&(s.Browser.add_menus([{name:"delete_object",node:t.type,module:t,applies:["object","context"],callback:"delete_obj",priority:2,label:e("Delete/Drop"),data:{url:"drop"},icon:"fa fa-trash",enable:i.isFunction(t.canDrop)?function(){return!!t.canDrop.apply(t,arguments)}:!!t.canDrop}]),t.canDropCascade&&s.Browser.add_menus([{name:"delete_object_cascade",node:t.type,module:t,applies:["object","context"],callback:"delete_obj",priority:3,label:e("Drop Cascade"),data:{url:"delete"},icon:"fa fa-trash",enable:i.isFunction(t.canDropCascade)?function(){return t.canDropCascade.apply(t,arguments)}:!!t.canDropCascade}])),-1==i.indexOf(s.unsupported_nodes,t.type)&&s.Browser.add_menus([{name:"show_query_tool",node:t.type,module:t,applies:["context"],callback:"show_query_tool",priority:998,label:e("Query Tool..."),icon:"fa fa-bolt",enable:function(e,t,i){return!("database"!=e._type||!e.allowConn)||"database"!=e._type}}]),t.hasScriptTypes&&i.isArray(t.hasScriptTypes)&&t.hasScriptTypes.length>0&&i.each(t.hasScriptTypes,function(i){var a=n(e("%s Script")).sprintf(i.toUpperCase()).value(),i=i.toLowerCase();s.Browser.add_menus([{name:"show_script_"+i,node:t.type,module:t,applies:["object","context"],callback:"show_script",priority:4,label:a,category:"Scripts",data:{script:i},icon:"fa fa-pencil",enable:t.check_user_permission}])}))},check_user_permission:function(e,t,n){if("server_group"==e._type||"server"==e._type)return!1;if("database"==e._type&&!e.allowConn)return!1;var s=p.Nodes[e._type],a=s.getTreeNodeHierarchy(t);return-1==i.indexOf(["create","insert","update","delete"],n.script)||(!("role"!=e.type||!a.server.user.can_create_role)||!!(a.server&&(a.server.user.is_superuser||a.server.user.can_create_db)||a.schema&&a.schema.can_create))},getView:function(s,a,o,d,c,u,f,h){var m=this;if(!this.type||""==this.type)return null;if(this.model){var g=this.generate_url(s,a,d,!1);if(!g)return null;var v={};"create"!==a&&(v[this.model.idAttribute||this.model.prototype.idAttribute||"id"]=d._id);var b=this.getTreeNodeHierarchy.apply(this,[s]),_=new(this.model.extend({urlRoot:g}))(v,{node_info:b}),y=r.generateViewSchema(b,_,a,this,d);if("create"==a||"edit"==a){u=u&&f?u.bind(f):function(){console.log("Broke something!!! Why we don't have the callback or the context???")};var w=function(e){var t='              <div class="media error-in-footer bg-red-1 border-red-2 font-red-3 text-14">                <div class="media-body media-middle">                  <div class="alert-icon error-icon">                    <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>                  </div>                    <div class="alert-text">'+e+'</div>                    <div class="close-error-bar">                      <a class="close-error">x</a>                    </div>                </div>              </div>';return i.isUndefined(m.statusBar)||(m.statusBar.html(t).css("visibility","visible"),m.statusBar.find("a.close-error").bind("click",function(e){this.empty().css("visibility","hidden")}.bind(m.statusBar))),u(!0),!0},x=function(e){i.isUndefined(m.statusBar)||m.statusBar.empty().css("visibility","hidden"),u(!1,e)};u(!1,!1),_.on("pgadmin-session:valid",x),_.on("pgadmin-session:invalid",w)}if(i.size(y)){var C;C="fieldset"==c?new r.Fieldset({el:o,model:_,schema:y}):new r.Dialog({el:o,model:_,schema:y});var j=function(){setTimeout(function(){t(o).find(".tab-pane.active:first").find("input:first").focus()},500)};if(_.isNew())C.render(),j(),_.startNewSession();else{var k='<div class="alert alert-info pg-panel-message pg-panel-properties-message">'+e("Retrieving data from the server...")+"</div>",E=t(k),T=setTimeout(function(e){i.isUndefined(e)||E.appendTo(e)},1e3,f);_.fetch({success:function(e,t,i){clearTimeout(T),E.addClass("hidden"),C.render(),j(),_.startNewSession()},error:function(t,i,a){var o=m&&s?m.getTreeNodeHierarchy(s)[m.type].label:"";p.Events.trigger("pgadmin:node:retrieval:error","properties",t,i,a,s),l.pgHandleItemError(t,i,a,{item:s,info:b})||l.pgNotifier(i,t,n(e("Error retrieving properties - %s")).sprintf(a||o).value(),function(){console.log(arguments)}),h&&h()}})}}return C}return null},register_node_panel:function(){var t=p.docker,i=t.findPanels("node_props");if(!i||1!=i.length){var n={};n[c.EVENT.RESIZE_ENDED]=function(){var e=this.$container.find(".obj_properties").first(),t=e.data("obj-view");t&&t.model&&t.model&&t.model.trigger("pg-browser-resized",{view:t,panel:this,container:e})},i=new p.Panel({name:"node_props",showTitle:!0,isCloseable:!0,isPrivate:!0,elContainer:!0,content:'<div class="obj_properties"><div class="alert alert-info pg-panel-message">'+e("Please wait while we fetch information about the node from the server...")+"</div></div>",onCreate:function(e,t){t.addClass("pg-no-overflow")},events:n}),i.load(p.docker)}},hasScriptTypes:["create"],canEdit:!0,canDrop:!1,canDropCascade:!1,callbacks:{show_obj_properties:function(t,a){var o=p.tree,r=t.item||a||o.selected(),d=r&&1==r.length?o.itemData(r):void 0,u=this,f=u.title.apply(this,[d]);if(p.Node.register_node_panel(),d){var h=this,m=i.isArray(this.parent_type)?function(e){return-1!=i.indexOf(h.parent_type,e._type)}:function(e){return h.parent_type==e._type},g=function(){var e=window.document,t=e.body,i=e.createElement("div");e.body.insertBefore(i,e.body.firstChild);var n=screen.width<800?"95%":"500px",a=screen.height<600?"95%":"550px",o=s.toPx(i,h.width||n,"width",!0),r=s.toPx(i,h.height||a,"height",!0),l=(t.offsetWidth-o)/2,d=(t.offsetHeight-r)/2,u=p.docker.addPanel("node_props",c.DOCK.FLOAT,void 0,{w:o+"px",h:r+"px",x:l+"px",y:d+"px"});return t.removeChild(i),u};if("create"==t.action){if(h.parent_type&&!m(d))for(;r&&o.hasParent(r);){r=o.parent(r);var v=o.itemData(r);if(m(v)){d=v;break}}if(!d||null!=this.parent_type&&!m(d))return;if(!d)return;f=n(e("Create - %s")).sprintf([this.label]).value(),b=g(),setTimeout(function(){u.showProperties(r,d,b,t.action)},10)}else if(p.Node.panels&&p.Node.panels[d.id]&&p.Node.panels[d.id].$container){var b=p.Node.panels[d.id],_=b.$container.attr("action-mode");if(_){var y=e('Are you sure want to stop editing the properties of %s "%s"?');"edit"==t.action&&(y=e('Are you sure want to reset the current changes and re-open the panel for %s "%s"?')),l.confirm(e("Edit in progress?"),n(y).sprintf(u.label.toLowerCase(),d.label).value(),function(){setTimeout(function(){u.showProperties(r,d,b,t.action)},10)},null).show()}else setTimeout(function(){u.showProperties(r,d,b,t.action)},10)}else p.Node.panels=p.Node.panels||{},b=p.Node.panels[d.id]=g(),setTimeout(function(){u.showProperties(r,d,b,t.action)},10);b.title(f),b.icon("icon-"+this.type),b.focus()}},delete_obj:function(s,a){var o=s||{url:"drop"},r=this,d=p.tree,c=o.item||a||d.selected(),u=c&&1==c.length?d.itemData(c):void 0;if(u){r=p.Nodes[u._type];var f,h,m=u.label;if("delete"==o.url){if(f=n(e('Are you sure you want to drop %s "%s" and all the objects that depend on it?')).sprintf(r.label.toLowerCase(),u.label).value(),h=n(e("DROP CASCADE %s?")).sprintf(r.label).value(),!(i.isFunction(r.canDropCascade)?r.canDropCascade.apply(r,[u,c]):r.canDropCascade))return void l.error(n(e('The %s "%s" cannot be dropped.')).sprintf(r.label,u.label).value(),10)}else if(f=n(e('Are you sure you want to drop %s "%s"?')).sprintf(r.label.toLowerCase(),u.label).value(),h=n(e("DROP %s?")).sprintf(r.label).value(),!(i.isFunction(r.canDrop)?r.canDrop.apply(r,[u,c]):r.canDrop))return void l.error(n(e('The %s "%s" cannot be dropped.')).sprintf(r.label,u.label).value(),10);l.confirm(h,f,function(){t.ajax({url:r.generate_url(c,o.url,u,!0),type:"DELETE",success:function(e){return 0==e.success?p.report_error(e.errormsg,e.info):p.removeTreeNode(c,!0),!0},error:function(i){var s=i.responseText;if(417==i.status||410==i.status||500==i.status)try{s=t.parseJSON(i.responseText).errormsg}catch(e){}p.report_error(n(e('Error dropping %s: "%s"')).sprintf(r.label,m).value(),s)}})},null).show()}},show_script:function(e,t){var i=e.script,n=this,a=p.tree,o=t||a.selected(),r=o&&1==o.length?a.itemData(o):void 0;if(r){n=p.Nodes[r._type];var l;r.label;l="insert"==i?"insert_sql":"update"==i?"update_sql":"delete"==i?"delete_sql":"select"==i?"select_sql":"exec"==i?"exec_sql":"sql",s.DataGrid.show_query_tool(n.generate_url(o,l,r,!0),o,i)}},show_query_tool:function(e,t){var i=p.tree,n=t||i.selected();(n&&1==n.length?i.itemData(n):void 0)&&s.DataGrid.show_query_tool("",n)},change_server_background:function(e,i){if(e&&i&&i&&i._type&&"server"==i._type){var n=t(e).find("span.aciTreeItem").first()||null,s=i.icon.split(" ")[1]||null,a=i.icon.split(" ")[2]||"";if(s){var o,r=n.parents()[3]||null,l="pga_server_"+i._id+"_bgcolor";o="<style id="+l+" type='text/css'> \n",o+="."+l+" .aciTreeItem {",o+=" border-radius: 3px; margin-bottom: 2px;",o+=" background: "+s+"} \n",a&&(o+="."+l+" .aciTreeText {",o+=" color: "+a+";} \n"),o+="</style>",t("#"+l).remove(),t(o).appendTo("head"),r&&t(r).addClass(l)}}},added:function(e,t,n){var s=n||p,a=s.tree,o=a.parent(e),r=o&&a.itemData(o),l=r&&p.Nodes[r._type];l&&l.is_collection&&("collection_count"in r||(r.collection_count=0),r.collection_count++,a.setLabel(o,{label:i.escape(r._label)+" <span>("+r.collection_count+")</span>"})),p.Node.callbacks.change_server_background(e,t)},selected:function(e,t,i){var n=i||p,a=n.tree,o=t||a.itemData(e);return s.Browser.enable_disable_menus.apply(n,[e]),o&&n&&("properties"in n.panels&&n.panels.properties&&n.panels.properties.panel&&n.panels.properties.panel.isVisible()&&this.showProperties(e,o,n.panels.properties.panel),"sql"in n.panels&&n.panels.sql&&n.panels.sql.panel&&n.panels.sql.panel.isVisible(),"statistics"in n.panels&&n.panels.statistics&&n.panels.statistics.panel&&n.panels.statistics.panel.isVisible(),"dependencies"in n.panels&&n.panels.dependencies&&n.panels.dependencies.panel&&n.panels.dependencies.panel.isVisible(),"dependents"in n.panels&&n.panels.dependents&&n.panels.dependents.panel&&n.panels.dependents.panel.isVisible()),!0},removed:function(e){var t=this,n=p.tree,s=n.parent(e),a=s&&n.itemData(s),o=a&&p.Nodes[a._type];o&&o.is_collection&&"collection_count"in a&&(a.collection_count--,n.setLabel(s,{label:i.escape(a._label)+" <span>("+a.collection_count+")</span>"})),setTimeout(function(){t.clear_cache.apply(t,e)},0)},unloaded:function(e){var t=this,n=p.tree,s=e&&n.itemData(e);t.is_collection&&"collection_count"in s&&(delete s.collection_count,n.setLabel(e,{label:i.escape(s._label)}))},refresh:function(e,t){var i=p.tree,n=t||i.selected();i.itemData(n);p.Events.trigger("pgadmin:browser:tree:refresh",n)}},showProperties:function(a,o,r,d){var f=this,h=s.Browser.tree,m=r.$container.find(".obj_properties").first(),g=m.data("obj-view"),v=t('<div tabindex="1"></div>').addClass("pg-prop-content col-xs-12"),b=function(e,t){if(!r||"node_props"===r._type)switch(e.which){case u.ESCAPE:E();break;case u.ENTER:if(e.target!==t)return;g&&g.model&&g.model.sessChanged()&&j.call(this,g);break;case u.F1:C()}}.bind(r);setTimeout(function(){r.$container.find(".backform-tab").on("keydown",function(e){b(e,this)})},200);var _=function(e){var i=t("<div></div>").addClass("pg-prop-status-bar").appendTo(m);return i.css("visibility","hidden"),"header"==e?i.appendTo(f.header):i.prependTo(f.footer),f.statusBar=i,i}.bind(r),y=function(e,n,s){if(e&&i.isArray(e)&&e.length>0){var a=t("<div></div>").addClass("pg-prop-btn-group"),o=i.template(['<button type="<%= type %>" ',"class=\"btn <%=extraClasses.join(' ')%>\"",'<% if (disabled) { %> disabled="disabled"<% } %> title="<%-tooltip%>">','<span class="<%= icon %>"></span><% if (label != "") { %>&nbsp;<%-label%><% } %></button>'].join(" "));return"header"==n?a.appendTo(f.header):a.appendTo(f.footer),s&&a.addClass(s),i.each(e,function(e){e.icon||(e.icon="");var i=t(o(e));a.append(i),e.register(i)}),a}return null}.bind(r),w=function(){var n=this,s=h.selected(),r=s&&h.itemData(s),l=(r._type,s&&r&&p.Nodes[r._type]),d=l.getTreeNodeHierarchy(s);if(!i.isEqual(t(n).data("node-prop"),d)){if(t(n).data("node-prop",d),v.hasClass("has-pg-prop-btn-group")||v.addClass("has-pg-prop-btn-group"),g&&(g.remove({data:!0,internal:!0,silent:!0}),g=null,m.data("obj-view",null)),m.empty(),f.header=t("<div></div>").addClass("pg-prop-header").appendTo(m),f.footer=t("<div></div>").addClass("pg-prop-footer").appendTo(m),g=f.getView(a,"properties",v,o,"fieldset",void 0,m)){m.data("obj-view",g);var c=[];c.push({label:"",type:"edit",tooltip:e("Edit"),extraClasses:["btn-default"],icon:"fa fa-lg fa-pencil-square-o",disabled:!f.canEdit,register:function(e){e.click(function(){I()})}}),c.push({label:"",type:"help",tooltip:e("SQL help for this object type."),extraClasses:["btn-default","pull-right"],icon:"fa fa-lg fa-info",disabled:""==f.sqlAlterHelp&&""==f.sqlCreateHelp,register:function(e){e.click(function(){x()})}}),y(c,"header","pg-prop-btn-group-above bg-gray-2 border-gray-3")}m.append(v)}}.bind(r),x=function(){var e=p.docker.findPanels("pnl_sql_help")[0];if(null==e){var i=p.docker.findPanels("properties")[0];p.docker.addPanel("pnl_sql_help",c.DOCK.STACKED,i),e=p.docker.findPanels("pnl_sql_help")[0]}var s=f.getTreeNodeHierarchy(a).server,o=p.utils.pg_help_path;"ppas"==s.server_type&&(o=p.utils.edbas_help_path);var r=Math.floor(s.version/1e4),l=Math.floor(s.version/100)-100*r;o=o.replace("$VERSION$",r+"."+l),n(o).endsWith("/")||(o+="/"),""==f.sqlCreateHelp&&""!=f.sqlAlterHelp?o+=f.sqlAlterHelp:""!=f.sqlCreateHelp&&""==f.sqlAlterHelp?o+=f.sqlCreateHelp:g.model.isNew()?o+=f.sqlCreateHelp:o+=f.sqlAlterHelp;var d=t(e).data("embeddedFrame");e.title("SQL: "+f.label),e.focus(),d.openURL(o)}.bind(r),C=function(){var e=p.docker.findPanels("pnl_online_help")[0];if(null==e){var i=p.docker.findPanels("properties")[0];p.docker.addPanel("pnl_online_help",c.DOCK.STACKED,i),e=p.docker.findPanels("pnl_online_help")[0]}var n=t(e).data("embeddedFrame");e.focus(),n.openURL(f.dialogHelp)}.bind(r),j=function(n){var s=n.model,a=s.toJSON(!0),o=setTimeout(function(){t(".obj_properties").addClass("show_progress")},1e3);a&&!i.isEmpty(a)&&s.save({},{attrs:a,validate:!1,cache:!1,success:function(){A.call(),t(".obj_properties").removeClass("show_progress"),clearTimeout(o);var e=p.docker.findPanels("properties")[0],i=p.docker.findPanels("sql")[0],n=p.docker.findPanels("statistics")[0],s=p.docker.findPanels("dependencies")[0],a=p.docker.findPanels("dependents")[0];e&&t(e).removeData("node-prop"),i&&t(i).removeData("node-prop"),n&&t(n).removeData("node-prop"),s&&t(s).removeData("node-prop"),a&&t(a).removeData("node-prop")},error:function(i,n){l.pgNotifier("error",n,e("Error saving properties")),t(".obj_properties").removeClass("show_progress"),clearTimeout(o)}})}.bind(r),k=function(){var n=this;d&&"properties"==d&&(d="edit"),n.$container.attr("action-mode",d),g&&(g.remove({data:!0,internal:!0,silent:!0}),g=null,m.data("obj-view",null)),m.empty(),f.header=t("<div></div>").addClass("pg-prop-header").appendTo(m),f.footer=t("<div></div>").addClass("pg-prop-footer").appendTo(m);var s=function(e,t){var i=this.find(".pg-prop-btn-group"),n=i.find("button.btn-primary"),s=i.find("button.btn-warning");e||!t?(n.prop("disabled",!0),n.attr("disabled","disabled")):(n.prop("disabled",!1),n.removeAttr("disabled")),t?(s.prop("disabled",!1),s.removeAttr("disabled")):(s.prop("disabled",!0),s.attr("disabled","disabled"))};g=f.getView(a,d,v,o,"dialog",s,m,D),g&&(m.data("obj-view",g),n.icon(i.isFunction(f.node_image)?f.node_image.apply(f,[o,g.model]):f.node_image||"icon-"+f.type),y([{label:"",type:"help",tooltip:e("SQL help for this object type."),extraClasses:["btn-default","pull-left"],icon:"fa fa-lg fa-info",disabled:""==f.sqlAlterHelp&&""==f.sqlCreateHelp,register:function(e){e.click(function(){x()})}},{label:"",type:"help",tooltip:e("Help for this dialog."),extraClasses:["btn-default","pull-left"],icon:"fa fa-lg fa-question",disabled:""==f.dialogHelp,register:function(e){e.click(function(){C()})}},{label:e("Save"),type:"save",tooltip:e("Save this object."),extraClasses:["btn-primary"],icon:"fa fa-lg fa-save",disabled:!0,register:function(e){e.click(function(){j.call(this,g)})}},{label:e("Cancel"),type:"cancel",tooltip:e("Cancel changes to this object."),extraClasses:["btn-danger"],icon:"fa fa-lg fa-close",disabled:!1,register:function(e){e.click(function(){n.$container.removeAttr("action-mode"),D.call(arguments)})}},{label:e("Reset"),type:"reset",tooltip:e("Reset the fields on this dialog."),extraClasses:["btn-warning"],icon:"fa fa-lg fa-recycle",disabled:!0,register:function(e){e.click(function(){setTimeout(function(){k.call()},0)})}}],"footer","pg-prop-btn-group-below bg-gray-2 border-gray-3")),_("footer"),v.addClass("pg-prop-has-btn-group-below"),m.prepend(v)}.bind(r),E=function(){this.close()}.bind(r),T=function(e){var t=o,n=i.clone(g.model.tnode),s=i.clone(g.model.node_info);setTimeout(function(){e.clear_cache.apply(e,a)},0),p.Events.trigger("pgadmin:browser:tree:update",t,n,s,{success:function(e,t,i){p.Events.trigger("pgadmin:browser:node:updated",e,t,i),p.Events.trigger("pgadmin:browser:node:"+t._type+":updated",e,t,i)}}),E()},N=function(e){var t=this,n=t.$container.find(".obj_properties").first(),s=n.data("obj-view");setTimeout(function(){e.clear_cache.apply(e,a)},0);try{p.Events.trigger("pgadmin:browser:tree:add",i.clone(s.model.tnode),i.clone(s.model.node_info))}catch(e){console.log(e)}E()}.bind(r,f),S=function(){setTimeout(function(){f.callbacks.show_obj_properties.apply(f,[{action:"edit",item:a}])},0)},D=E,A=T.bind(r,f),I=k.bind(r);if(d?("create"==d&&(D=E,A=N),"properties"!=d?k():w()):(w(),I=S.bind(r)),r.closeable()){var P=function(){var e=this.$container.find(".obj_properties").first(),t=e&&e.data("obj-view");t&&t.remove({data:!0,internal:!0,silent:!0})}.bind(r);r.on(c.EVENT.CLOSED,P)}},_find_parent_node:function(e,t,n){if(this.parent_type)if(n=n||e.itemData(t),i.isString(this.parent_type)){if(this.parent_type==n._type)return t;for(;e.hasParent(t);)if(t=e.parent(t),n=e.itemData(t),this.parent_type==n._type)return t}else{if(i.indexOf(this.parent_type,n._type)>=0)return t;for(;e.hasParent(t);)if(t=e.parent(t),n=e.itemData(t),i.indexOf(this.parent_type,n._type)>=0)return t}return null},generate_url:function(e,t,n,s,o){var r={create:"obj",drop:"obj",edit:"obj",properties:"obj",statistics:"stats"},l=this,d=-1/0,c=i.isUndefined(e)||i.isNull(e)?o||{}:this.getTreeNodeHierarchy(e),u=t in r?r[t]:t,f=s&&n._type==l.type?encodeURIComponent(n._id):"";if(l.parent_type)if(i.isString(l.parent_type)){var h=c[l.parent_type];h&&(d=h.priority)}else i.each(l.parent_type,function(e){var t=c[e];t&&d<t.priority&&(d=t.priority)});var m=function(e){return e.priority<=d};return a.generate_url(p.URL,c,u,l.type,m,f)},Collection:p.DataCollection,Model:p.DataModel,getTreeNodeHierarchy:function(e){var t,n=0,s={},a=p.tree;do{t=a.itemData(e),t._type in p.Nodes&&p.Nodes[t._type].hasId&&(s[t._type]=i.extend({},t,{priority:n}),n-=1),e=a.hasParent(e)?a.parent(e):null}while(e);return s},cache:function(e,t,s,a){var o=this.cached=this.cached||{},r=e,l=t&&t[s]&&t[s].priority||0;if(t&&i.each(i.sortBy(i.values(i.pick(t,function(e,t,i){return e.priority<=l})),function(e){return e.priority}),function(e){r=n("%s/%s").sprintf(r,encodeURI(e._id)).value()}),i.isUndefined(a)){var d=o[r];return!i.isUndefined(d)&&d.at-Date.now()>3e5&&(d=void 0),d}return d=o[r]={data:a,at:Date.now(),level:s}},clear_cache:function(e){this.cached={};var t=this;p.Events.trigger("pgadmin:browser:node:"+t.type+":cache_cleared",e,t)},cache_level:function(e,t){if(e){if(t&&this.type in e)return this.type;if(i.isArray(this.parent_type)){for(var n in this.parent_type)if(n in e)return n;return this.type}return this.parent_type}}}),s.Browser.Node)}.apply(t,n))&&(e.exports=s)},"./pgadmin/browser/static/js/node.ui.js":function(e,t,i){"use strict";var n,s;n=[i("./pgadmin/static/js/gettext.js"),i("./node_modules/jquery/dist/jquery.js"),i("./node_modules/underscore/underscore.js"),i("./pgadmin/static/js/pgadmin.js"),i("./node_modules/backbone/backbone.js"),i("./node_modules/backform/src/backform.js"),i("./node_modules/alertifyjs/build/alertify.js"),i("./node_modules/backgrid/lib/backgrid.js"),i("./node_modules/select2/dist/js/select2.full.js"),i("./pgadmin/browser/static/js/node.js")],void 0!==(s=function(e,t,i,n,s,a,o,r){n.Browser;t.fn.select2.amd.define("select2/selectAllAdapter",["select2/utils","select2/dropdown","select2/dropdown/attachBody"],function(i,n,s){function a(){}return a.prototype.render=function(i){var n=this,s=i.call(this),a=t(['<button class="btn btn-xs btn-default" type="button"',' style="width: 49%;margin: 0 0.5%;">','<i class="fa fa-check-square-o"></i>','<span style="padding: 0px 5px;">',e("Select All"),"</span></button>"].join("")),o=t(['<button class="btn btn-xs btn-default" type="button"',' style="width: 49%;margin: 0 0.5%;">','<i class="fa fa-square-o"></i><span style="padding: 0px 5px;">',e("Unselect All"),"</span></button>"].join("")),r=t('<div style="padding: 3px 0px; background-color: #2C76B4; margin-bottom: 3px;">').append(a).append(o);return this.$element.prop("multiple")?(s.find(".select2-dropdown").prepend(r),a.on("click",function(e){s.find(".select2-results__option[aria-selected=false]").each(function(){n.trigger("select",{data:t(this).data("data")})}),n.trigger("close")}),o.on("click",function(e){s.find(".select2-results__option[aria-selected=true]").each(function(){n.trigger("unselect",{data:t(this).data("data")})}),n.trigger("close")}),s):s},i.Decorate(i.Decorate(n,s),a)});var l=a.NodeAjaxOptionsControl=a.Select2Control.extend({defaults:i.extend(a.Select2Control.prototype.defaults,{url:void 0,transform:void 0,url_with_id:!1,select2:{allowClear:!0,placeholder:"Select from the list",width:"style"}}),initialize:function(){a.Select2Control.prototype.initialize.apply(this,arguments);var e=this,s=e.field.get("url")||e.defaults.url,o=e.model.top||e.model;if(s){var r,l=this.field.get("schema_node"),d=this.field.get("node_info"),c=this.field.get("url_with_id")||!1,u=l.generate_url.apply(l,[null,s,this.field.get("node_data"),c,d]),p=this.field.get("cache_node");p=p&&n.Browser.Nodes[p]||l,r=this.field.has("cache_level")?this.field.get("cache_level"):p.cache_level(d,c);var f=p.cache(l.type+"#"+s,d,r);this.field.get("version_compatible")&&(i.isUndefined(f)||i.isNull(f))&&(o.trigger("pgadmin:view:fetching",o,e.field),t.ajax({async:!1,url:u,success:function(e){f=p.cache(l.type+"#"+s,d,r,e.data)},error:function(){o.trigger("pgadmin:view:fetch:error",o,e.field)}}),o.trigger("pgadmin:view:fetched",o,e.field)),f=f&&f.data||[];var h=this.field.get("transform")||e.defaults.transform;h&&i.isFunction(h)?e.field.set("options",h.bind(e,f)):e.field.set("options",f)}}}),d=function(e){if(!e.id)return e.text;var i=t(e.element).data("image");return i?t("<span></span>").append(t("<span></span>",{class:"wcTabIcon "+i})).append(t("<span></span>").text(e.text)):e.text},c=a.NodeListByIdControl=l.extend({controlClassName:"pgadmin-node-select form-control",defaults:i.extend({},l.prototype.defaults,{url:"nodes",filter:void 0,transform:function(e){var t=this,n=t.field.get("schema_node"),s=[],a=t.field.get("filter")||function(){return!0};return a=a.bind(t),i.each(e,function(e){if(a(e)){var o=i.isFunction(n.node_label)?n.node_label.apply(n,[e,t.model,t]):e.label,r=i.isFunction(n.node_image)?n.node_image.apply(n,[e,t.model,t]):n.node_image||"icon-"+n.type;s.push({value:e._id,image:r,label:o})}}),s},select2:{allowClear:!0,placeholder:"Select from the list",width:"style",templateResult:d,templateSelection:d}})});a.NodeListByNameControl=c.extend({defaults:i.extend({},c.prototype.defaults,{transform:function(e){var t=this,n=t.field.get("schema_node"),s=[],a=t.field.get("filter")||function(){return!0};return a=a.bind(t),i.each(e,function(e){if(a(e)){var o=i.isFunction(n.node_label)?n.node_label.apply(n,[e,t.model,t]):e.label,r=i.isFunction(n.node_image)?n.node_image.apply(n,[e,t.model,t]):n.node_image||"icon-"+n.type;s.push({value:e.label,image:r,label:o})}}),s}})});t.fn.pgMakeVisible=function(e){return this.each(function(){if(this&&t(this.length))for(var i,n=t(this);n&&n.length>0;)if(i=n.get(0).offsetTop+n.height(),n=n.parent(),function(e){return!!(e&&e.length>0)&&e.get(0).scrollHeight>e.height()}(n)&&n.scrollTop(i),n.hasClass(e))return})};var u=r.Extension.NodeAjaxOptionsCell=r.Extension.Select2Cell.extend({defaults:i.extend({},r.Extension.Select2Cell.prototype.defaults,{url:void 0,transform:void 0,url_with_id:!1,select2:{allowClear:!0,placeholder:"Select from the list",width:"style"},opt:{label:null,value:null,image:null,selected:!1}}),template:i.template('<option <% if (image) { %> data-image=<%= image %> <% } %> value="<%- value %>" <%= selected ? \'selected="selected"\' : "" %>><%- label %></option>'),initialize:function(){r.Extension.Select2Cell.prototype.initialize.apply(this,arguments);var e=this.column.get("url")||this.defaults.url,s=i.has(this.column.attributes,"options_cached"),a=s&&this.column.get("options_cached");if(e&&!a){var o,l=this,d=this.model,c=this.column,u=d.top||d,p=c.get("schema_node"),f=c.get("node_info"),h=c.get("url_with_id")||!1,m=p.generate_url.apply(p,[null,e,c.get("node_data"),h,f]),g=c.get("cache_node");g=g&&n.Browser.Nodes[g]||p,o=c.has("cache_level")?c.get("cache_level"):g.cache_level(f,h);var v=g.cache(p.type+"#"+e,f,o);c.get("version_compatible")&&(i.isUndefined(v)||i.isNull(v))&&(u.trigger("pgadmin:view:fetching",d,c),t.ajax({async:!1,url:m,success:function(t){v=g.cache(p.type+"#"+e,f,o,t.data)},error:function(){u.trigger("pgadmin:view:fetch:error",d,c)}}),u.trigger("pgadmin:view:fetched",d,c)),v=v&&v.data||[];var b=c.get("transform")||l.defaults.transform;b&&i.isFunction(b)?c.set("options",b.bind(c,v)):c.set("options",v),s&&c.set("options_cached",!0)}}});r.Extension.NodeListByIdCell=u.extend({controlClassName:"pgadmin-node-select backgrid-cell",defaults:i.extend({},u.prototype.defaults,{url:"nodes",filter:void 0,transform:function(e,t){var n=t||this,s=n.column.get("schema_node"),a=[],o=n.column.get("filter")||function(){return!0};return o=o.bind(n),i.each(e,function(e){if(o(e)){var t=i.isFunction(s.node_label)?s.node_label.apply(s,[e,n.model,n]):e.label,r=i.isFunction(s.node_image)?s.node_image.apply(s,[e,n.model,n]):s.node_image||"icon-"+s.type;a.push({value:e._id,image:r,label:t})}}),a},select2:{placeholder:"Select from the list",width:"style",templateResult:d,templateSelection:d}})}),r.Extension.NodeListByNameCell=u.extend({controlClassName:"pgadmin-node-select backgrid-cell",defaults:i.extend({},u.prototype.defaults,{url:"nodes",filter:void 0,transform:function(e,t){var n=t||this,s=n.column.get("schema_node"),a=[],o=n.column.get("filter")||function(){return!0};return o=o.bind(n),i.each(e,function(e){if(o(e)){var t=i.isFunction(s.node_label)?s.node_label.apply(s,[e,n.model,n]):e.label,r=i.isFunction(s.node_image)?s.node_image.apply(s,[e,n.model,n]):s.node_image||"icon-"+s.type;a.push({value:e.label,image:r,label:t})}}),a},select2:{placeholder:"Select from the list",width:"style",templateResult:d,templateSelection:d}})}),r.Extension.MultiSelectAjaxCell=r.Extension.NodeAjaxOptionsCell.extend({defaults:i.extend({},u.prototype.defaults,{transform:void 0,url_with_id:!1,select2:{allowClear:!0,placeholder:"Select from the list",width:"style",multiple:!0},opt:{label:null,value:null,image:null,selected:!1}}),getValueFromDOM:function(){var e=[];return this.$el.find("select").find(":selected").each(function(){e.push(t(this).attr("value"))}),e}}),a.MultiSelectAjaxControl=l.extend({defaults:i.extend({},l.prototype.defaults,{select2:{multiple:!0,allowClear:!0,width:"style"}})});return a}.apply(t,n))&&(e.exports=s)},"./pgadmin/browser/static/js/panel.js":function(e,t,i){"use strict";(function(n){var s,a;s=[i("./node_modules/underscore/underscore.js"),i("./pgadmin/static/js/pgadmin.js"),i("./pgadmin/static/vendor/webcabin-docker/Build/wcDocker.js")],void 0!==(a=function(e,t){var i=t.Browser=t.Browser||{},s=window.wcDocker;return t.Browser.Panel=function(t){var i=["name","title","width","height","showTitle","isCloseable","isPrivate","content","icon","events","onCreate","elContainer","canHide","limit"];e.extend(this,e.pick(t,i))},e.extend(t.Browser.Panel.prototype,{name:"",title:"",width:300,height:600,showTitle:!0,isCloseable:!0,isPrivate:!1,content:"",icon:"",panel:null,onCreate:null,elContainer:!1,limit:null,load:function(t,i){var a=this;a.panel||t.registerPanelType(a.name,{title:a.title,isPrivate:a.isPrivate,limit:a.limit,onCreate:function(t){n(t).data("pgAdminName",a.name),t.initSize(a.width,a.height),a.showTitle?(t.title(i||a.title),""!=a.icon&&t.icon(a.icon)):t.title(!1);var o=n("<div>",{class:"pg-panel-content"}).append(n(a.content));t.closeable(!!a.isCloseable),t.layout().addItem(o),a.panel=t,a.events&&e.isObject(a.events)&&e.each(a.events,function(i,n){i&&e.isFunction(i)&&t.on(n,i)}),e.each([s.EVENT.UPDATED,s.EVENT.VISIBILITY_CHANGED,s.EVENT.BEGIN_DOCK,s.EVENT.END_DOCK,s.EVENT.GAIN_FOCUS,s.EVENT.LOST_FOCUS,s.EVENT.CLOSED,s.EVENT.BUTTON,s.EVENT.ATTACHED,s.EVENT.DETACHED,s.EVENT.MOVE_STARTED,s.EVENT.MOVE_ENDED,s.EVENT.MOVED,s.EVENT.RESIZE_STARTED,s.EVENT.RESIZE_ENDED,s.EVENT.RESIZED,s.EVENT.SCROLLED],function(e){t.on(e,a.eventFunc.bind(t,e))}),a.onCreate&&e.isFunction(a.onCreate)&&a.onCreate.apply(a,[t,o]),a.elContainer&&(t.pgElContainer=o,o.addClass("pg-el-container"),e.each([s.EVENT.RESIZED,s.EVENT.ATTACHED,s.EVENT.DETACHED,s.EVENT.VISIBILITY_CHANGED],function(e){t.on(e,a.resizedContainer.bind(t))}),a.resizedContainer.apply(t)),a.canHide&&e.each([s.EVENT.CLOSED,s.EVENT.VISIBILITY_CHANGED],function(e){t.on(e,a.handleVisibility.bind(t,e))})}})},eventFunc:function(e){var t=n(this).data("pgAdminName");try{i.Events.trigger("pgadmin-browser:panel",e,this,arguments),i.Events.trigger("pgadmin-browser:panel:"+e,this,arguments),t&&(i.Events.trigger("pgadmin-browser:panel-"+t,e,this,arguments),i.Events.trigger("pgadmin-browser:panel-"+t+":"+e,this,arguments))}catch(e){console.log(e)}},resizedContainer:function(){var e=this;if(e.pgElContainer&&!e.pgResizeTimeout){if(!e.isVisible())return clearTimeout(e.pgResizeTimeout),void(e.pgResizeTimeout=null);e.pgResizeTimeout=setTimeout(function(){var t=e.width();e.pgResizeTimeout=null,t=t<=480?"xs":t<600?"sm":t<768?"md":"lg",e.pgElContainer.attr("el",t)},100)}},handleVisibility:function(n){if("dashboard"==this._type&&!e.isUndefined(t.Dashboard))if("panelClosed"==n)i.save_current_layout(i),t.Dashboard.toggleVisibility(!1);else if("panelVisibilityChanged"==n&&i.tree){i.save_current_layout(i);var a=i.tree.selected();this.off(s.EVENT.VISIBILITY_CHANGED),e.isUndefined(t.Dashboard)||t.Dashboard.toggleVisibility(!0),i.Events.trigger("pgadmin-browser:tree:selected",a,i.tree.itemData(a),i.Node)}}}),t.Browser.Panel}.apply(t,s))&&(e.exports=a)}).call(t,i("./node_modules/jquery/dist/jquery.js"))},"./pgadmin/browser/static/js/tools.js":function(e,t,i){"use strict";var n,s;n=[i("./node_modules/underscore/underscore.js"),i("./pgadmin/static/js/pgadmin.js"),i("./pgadmin/browser/static/js/browser.js")],void 0!==(s=function(e,t,i){return i.Tool={},i.Tool.extend=function(i){var n,s=this;return n=function(){return s.apply(this,arguments)},e.extend(n,s,i),t.register_module("browser",n),n},i.Tool}.apply(t,n))&&(e.exports=s)},"./pgadmin/browser/static/js/wizard.js":function(e,t,i){"use strict";(function(n){var s,a;s=[i("./node_modules/underscore/underscore.js"),i("./node_modules/backbone/backbone.js"),i("./pgadmin/static/js/pgadmin.js"),i("./pgadmin/browser/static/js/browser.js")],void 0!==(a=function(e,t,i,s){s=s||i.Browser||{};s.WizardPage=t.Model.extend({defaults:{id:void 0,page_title:void 0,view:void 0,html:void 0,image:void 0,disable_prev:!1,disable_next:!1,disable_cancel:!1,show_progress_bar:"",onLoad:function(){return!0},beforeNext:function(){return!0},onNext:function(){},onBefore:function(){},beforePrev:function(){return!0}}}),s.Wizard=t.View.extend({options:{title:"Wizard",image:"left_panel.png",curr_page:0,disable_next:!1,disable_prev:!1,disable_finish:!1,disable_cancel:!1,show_header_cancel_btn:!1,show_header_maximize_btn:!1,dialog_api:null,height:400,width:650,show_left_panel:!0,wizard_help:""},tmpl:e.template("    <div class='pgadmin-wizard' style='height: <%= this.options.height %>px;    width: <%= this.options.width %>px'>      <div class='wizard-header wizard-badge'>        <div class='row'>          <div class='col-sm-10'>              <h3><span id='main-title'><%= this.options.title %></span> -              <span id='step-title'><%= page_title %></span></h3>          </div>          <% if (this.options.show_header_cancel_btn) { %>            <div class='col-sm-2'>              <button class='ajs-close wizard-cancel-event pull-right'></button>              <% if (this.options.show_header_maximize_btn) { %>                <button class='ajs-maximize wizard-maximize-event pull-right'></button>              <% } %>            </div>          <% } %>        </div>      </div>      <div class='wizard-content col-sm-12'>        <% if (this.options.show_left_panel) { %>          <div class='col-sm-3 wizard-left-panel'>              <img src='<%= this.options.image %>'></div>        <% } %>        <div class='col-sm-<% if (this.options.show_left_panel) { %>9<% }          else { %>12<% } %> wizard-right-panel'>          <% if ( typeof show_description !=  'undefined'){ %>            <div class='wizard-description'>              <%= show_description %>            </div>          <% } %>          <div class='wizard-progress-bar'><% if (show_progress_bar) { %>            <p class='alert alert-info col-sm-12'><%= show_progress_bar %></p><% } %>          </div>          <div class='wizard-right-panel_content col-xs-12'>          </div>        </div>      </div>      <div class='col-sm-12 pg-prop-status-bar' style='visibility:hidden'>        <div class='media error-in-footer bg-red-1 border-red-2 font-red-3 text-14'>          <div class='media-body media-middle'>            <div class='alert-icon error-icon'>              <i class='fa fa-exclamation-triangle' aria-hidden='true'></i>            </div>            <div class='alert-text'>            </div>            <div class='close-error-bar'>              <a class='close-error'>x</a>            </div>          </div>        </div>      </div>      <div class='footer col-sm-12'>        <div class='row'>          <div class='col-sm-4 wizard-buttons pull-left'>            <button title = 'Help for this dialog.' class='btn btn-default pull-left wizard-help' <%=this.options.wizard_help ? '' : 'disabled' %>>              <span class='fa fa-lg fa-question'></span></button>          </div>          <div class='col-sm-8'>            <div class='wizard-buttons'>              <button class='btn btn-primary wizard-back' <%=this.options.disable_prev ? 'disabled' : ''%>>                <i class='fa fa-backward'></i>Back</button>              <button class='btn btn-primary wizard-next' <%=this.options.disable_next ? 'disabled' : ''%>>Next                <i class='fa fa-forward'></i></button>              <button class='btn btn-danger wizard-cancel' <%=this.options.disable_cancel ? 'disabled' : ''%>>                <i class='fa fa-lg fa-close'></i>Cancel</button>              <button class='btn btn-primary wizard-finish' <%=this.options.disable_finish ? 'disabled' : ''%>>                Finish</button>            </div>          </div>        </div>      </div>    </div>"),events:{"click button.wizard-next":"nextPage","click button.wizard-back":"prevPage","click button.wizard-cancel":"onCancel","click button.wizard-cancel-event":"onCancel","click button.wizard-maximize-event":"onMaximize","click button.wizard-finish":"finishWizard","click button.wizard-help":"onDialogHelp","click a.close-error":"closeErrorMsg"},initialize:function(t){this.options=e.extend({},this.options,t.options),this.currPage=this.collection.at(this.options.curr_page).toJSON()},render:function(){var e=this.currPage;this.options.disable_next=!!this.options.disable_next||this.evalASFunc(this.currPage.disable_next),this.options.disable_prev=!!this.options.disable_prev||this.evalASFunc(this.currPage.disable_prev),this.options.disable_cancel=!!this.currPage.canCancel||this.evalASFunc(this.currPage.disable_cancel);return e.html?e.content=e.html:e.view&&(e.content=e.view.render().el),n(this.el).html(this.tmpl(e)),n(this.el).find(".wizard-right-panel_content").html(e.content),this.onLoad(),this},nextPage:function(){if(!this.beforeNext())return!1;var e=this.onNext();return e?(this.currPage=this.collection.get(e).toJSON(),this.options.curr_page=this.collection.indexOf(this.collection.get(e))):this.options.curr_page<this.collection.length-1&&(this.options.curr_page=this.options.curr_page+1,this.currPage=this.collection.at(this.options.curr_page).toJSON()),this.enableDisableNext(),this.enableDisablePrev(),this.render()},prevPage:function(){if(!this.beforePrev())return!1;var e=this.onPrev();return e?(this.currPage=this.collection.get(e).toJSON(),this.options.curr_page=this.collection.indexOf(this.collection.get(e))):this.options.curr_page>0&&(this.options.curr_page=this.options.curr_page-1,this.currPage=this.collection.at(this.options.curr_page).toJSON()),this.enableDisableNext(),this.enableDisablePrev(),this.render()},finishWizard:function(){return this.onFinish(),this.remove(),this.unbind(),delete this.$el,delete this.el,!0},enableDisableNext:function(e){void 0!==e?this.options.disable_next=e:this.options.curr_page>=this.collection.length-1?this.options.disable_next=!0:this.options.disable_next=!1},enableDisablePrev:function(e){void 0!==e?this.options.disable_prev=e:this.options.curr_page<=0?this.options.disable_prev=!0:this.options.disable_prev=!1},closeErrorMsg:function(){n(this.el).find(".pg-prop-status-bar .alert-text").empty(),n(this.el).find(".pg-prop-status-bar").css("visibility","hidden")},beforeNext:function(){return this.evalASFunc(this.currPage.beforeNext)},beforePrev:function(){return this.evalASFunc(this.currPage.beforePrev)},onPrev:function(){return this.evalASFunc(this.currPage.onPrev)},onNext:function(){return this.evalASFunc(this.currPage.onNext)},onLoad:function(){return this.evalASFunc(this.currPage.onLoad)},onFinish:function(){return!0},onCancel:function(){return this.$el.remove(),!0},onMaximize:function(){var e=this.options.dialog_api,t=this.$el.find(".wizard-maximize-event");e&&(e.isMaximized()?(t.removeClass("ajs-maximized"),e.restore()):(t.addClass("ajs-maximized "+t.attr("class")),e.maximize()))},evalASFunc:function(t,i){var n=this;return i=i||n.currPage,e.isFunction(t)?t.apply(i,[n]):t},onDialogHelp:function(){var e=s.docker.findPanels("pnl_online_help")[0];if(null==e){var t=s.docker.findPanels("properties")[0];s.docker.addPanel("pnl_online_help",wcDocker.DOCK.STACKED,t),e=s.docker.findPanels("pnl_online_help")[0]}var i=n(e).data("embeddedFrame");e.focus(),i.openURL(this.options.wizard_help)}});return s}.apply(t,s))&&(e.exports=a)}).call(t,i("./node_modules/jquery/dist/jquery.js"))},"./pgadmin/misc/file_manager/static/js/file_manager.js":function(e,t,i){"use strict";var n,s;n=[i("./pgadmin/static/js/gettext.js"),i("./pgadmin/static/js/url_for.js"),i("./node_modules/jquery/dist/jquery.js"),i("./node_modules/underscore/underscore.js"),i("./pgadmin/static/js/alertify.pgadmin.defaults.js"),i("./pgadmin/browser/static/js/tools.js")],void 0!==(s=function(e,t,i,n,s,a){return pgAdmin=pgAdmin||window.pgAdmin||{},pgAdmin.FileManager?pgAdmin.FileManager:(pgAdmin.FileManager=a.extend({Init:function(){if(!this.initialized){this.initialized=!0;var a=function(e){return i.ajax({data:e,type:"POST",async:!1,url:t("file_manager.get_trans_id"),dataType:"json",contentType:"application/json; charset=utf-8"})},o=function(e){return i.ajax({type:"GET",async:!1,url:t("file_manager.delete_trans_id",{trans_id:e}),dataType:"json",contentType:"application/json; charset=utf-8"})},r=function(e,n){return i.ajax({url:t("file_manager.save_last_dir",{trans_id:n}),type:"POST",data:JSON.stringify(e),contentType:"application/json"})};s.dialog("storageManagerDlg",function(){var s,l=i("<div class='storage_dialog'></div>"),d=function(e){var n=l.find(".storage_content");n.empty(),i.get(t("file_manager.index"),function(e){n.append(e)});var o,r=a(e);4==r.readyState&&(o=JSON.parse(r.responseText)),s=o.data.fileTransId};return{main:function(e){var t=this;n.isUndefined(e.dialog_title)&&(e.dialog_title="Storage manager"),this.set("title",e.dialog_title),n.isUndefined(e.btn_primary)&&(e.btn_primary="Select"),this.set("label",e.btn_primary),e=JSON.stringify(e),l.find(".storage_content").remove(),l.append("<div class='storage_content'></div>"),d(e),this.elements.dialog.style.minWidth="630px",this.show(),setTimeout(function(){i(l.find(".file_manager")).on("enter-key",function(){i(i(t.elements.footer).find(".file_manager_ok")).trigger("click")})},200)},settings:{label:void 0},settingUpdated:function(e,t,i){switch(e){case"message":this.setMessage(i);break;case"label":this.__internal.buttons[0].element&&(this.__internal.buttons[0].element.innerHTML=i)}},prepare:function(){this.__internal.buttons[0].element.disabled=!0},setup:function(){return{buttons:[{text:e("Select"),className:"btn btn-primary fa fa-file file_manager_ok pg-alertify-button disabled"},{text:e("Cancel"),className:"btn btn-danger fa fa-times pg-alertify-button"}],focus:{element:0},options:{closableByDimmer:!1}}},callback:function(t){if(t.button.text==e("Select")){var n=i(".storage_dialog #uploader .input-path").val(),a={path:i(".currentpath").val()};pgAdmin.Browser.Events.trigger("pgadmin-storage:finish_btn:storage_dialog",n),r(a,s);var l=i(this.elements.body).find(".storage_content");i(l).find("*").off(),l.remove(),o(s)}else if(t.button.text==e("Cancel")){var l=i(this.elements.body).find(".storage_content");i(l).find("*").off(),l.remove(),o(s),pgAdmin.Browser.Events.trigger("pgadmin-storage:cancel_btn:storage_dialog")}},build:function(){this.elements.content.appendChild(l.get(0))},hooks:{onshow:function(){i(this.elements.body).addClass("pgadmin-storage-body")}}}}),s.dialog("fileSelectionDlg",function(){var s,l=i("<div class='storage_dialog file_selection_dlg'></div>"),d=function(e){var n=l.find(".storage_content");n.empty(),i.get(t("file_manager.index"),function(e){n.append(e)});var o,r=a(e);4==r.readyState&&(o=JSON.parse(r.responseText)),s=o.data.fileTransId};return{main:function(e){var t=this;n.isUndefined(e.dialog_title)&&(e.dialog_title="Select file"),this.set("title",e.dialog_title),n.isUndefined(e.btn_primary)&&(e.btn_primary="Select"),this.set("label",e.btn_primary),e=JSON.stringify(e),l.find(".storage_content").remove(),l.append("<div class='storage_content'></div>"),d(e),this.elements.dialog.style.minWidth="630px",this.show(),setTimeout(function(){i(l.find(".file_manager")).on("enter-key",function(){i(i(t.elements.footer).find(".file_manager_ok")).trigger("click")})},200)},settings:{label:void 0},settingUpdated:function(e,t,i){switch(e){case"message":this.setMessage(i);break;case"label":this.__internal.buttons[0].element&&(this.__internal.buttons[0].element.innerHTML=i)}},prepare:function(){this.__internal.buttons[0].element.disabled=!0},setup:function(){return{buttons:[{text:e("Select"),key:13,className:"btn btn-primary fa fa-file file_manager_ok pg-alertify-button disabled"},{text:e("Cancel"),key:27,className:"btn btn-danger fa fa-times pg-alertify-button"}],focus:{element:0},options:{closableByDimmer:!1,maximizable:!1,closable:!1,movable:!0}}},callback:function(t){if(t.button.text==e("Select")){var n=i(".storage_dialog #uploader .input-path").val(),a={path:i(".currentpath").val()};pgAdmin.Browser.Events.trigger("pgadmin-storage:finish_btn:select_file",n);var l=i(this.elements.body).find(".storage_content");i(l).find("*").off(),l.remove(),o(s),r(a,s)}else if(t.button.text==e("Cancel")){var l=i(this.elements.body).find(".storage_content");i(l).find("*").off(),l.remove(),o(s),pgAdmin.Browser.Events.trigger("pgadmin-storage:cancel_btn:select_file")}},build:function(){this.elements.content.appendChild(l.get(0))},hooks:{onshow:function(){i(this.elements.body).addClass("pgadmin-storage-body")}}}}),s.dialog("folderSelectionDlg",function(){var s,l=i("<div class='storage_dialog folder_selection_dlg'></div>"),d=function(e){var n=l.find(".storage_content");n.empty(),i.get(t("file_manager.index"),function(e){n.append(e)});var o,r=a(e);4==r.readyState&&(o=JSON.parse(r.responseText)),s=o.data.fileTransId};return{main:function(e){var t=this;n.isUndefined(e.dialog_title)&&(e.dialog_title="Select folder"),this.set("title",e.dialog_title),n.isUndefined(e.btn_primary)&&(e.btn_primary="Select"),this.set("label",e.btn_primary),e=JSON.stringify(e),l.find(".storage_content").remove(),l.append("<div class='storage_content'></div>"),d(e),this.elements.dialog.style.minWidth="630px",this.show(),setTimeout(function(){i(l.find(".file_manager")).on("enter-key",function(){i(i(t.elements.footer).find(".file_manager_ok")).trigger("click")})},200)},settings:{label:void 0},settingUpdated:function(e,t,i){switch(e){case"message":this.setMessage(i);break;case"label":this.__internal.buttons[0].element&&(this.__internal.buttons[0].element.innerHTML=i)}},prepare:function(){this.__internal.buttons[0].element.disabled=!0},setup:function(){return{buttons:[{text:e("Select"),key:13,className:"btn btn-primary fa fa-file file_manager_ok pg-alertify-button disabled"},{text:e("Cancel"),key:27,className:"btn btn-danger fa fa-times pg-alertify-button"}],focus:{element:0},options:{closableByDimmer:!1,maximizable:!1,closable:!1,movable:!0}}},callback:function(t){if(t.button.text==e("Select")){var n=i(".storage_dialog #uploader .input-path").val(),a={path:i(".currentpath").val()};pgAdmin.Browser.Events.trigger("pgadmin-storage:finish_btn:select_folder",n);var l=i(this.elements.body).find(".storage_content");i(l).find("*").off(),l.remove(),o(s),r(a,s)}else if(t.button.text==e("Cancel")){var l=i(this.elements.body).find(".storage_content");i(l).find("*").off(),l.remove(),o(s),pgAdmin.Browser.Events.trigger("pgadmin-storage:cancel_btn:select_folder")}},build:function(){this.elements.content.appendChild(l.get(0))},hooks:{onshow:function(){i(this.elements.body).addClass("pgadmin-storage-body")}}}}),s.dialog("createModeDlg",function(){var l,d=i("<div class='storage_dialog create_mode_dlg'></div>"),c=function(e){var n=d.find(".storage_content");n.empty(),i.get(t("file_manager.index"),function(e){n.append(e)});var s,o=a(e);4==o.readyState&&(s=JSON.parse(o.responseText)),l=s.data.fileTransId};return{main:function(e){var t=this;n.isUndefined(e.dialog_title)&&(e.dialog_title="Create file"),this.set("title",e.dialog_title),n.isUndefined(e.btn_primary)&&(e.btn_primary="Create"),this.set("label",e.btn_primary),e=JSON.stringify(e),d.find(".storage_content").remove(),d.append("<div class='storage_content'></div>"),c(e),this.elements.dialog.style.minWidth="630px",this.show(),setTimeout(function(){i(d.find(".file_manager")).on("enter-key",function(){i(i(t.elements.footer).find(".file_manager_ok")).trigger("click")})},200)},settings:{label:void 0},settingUpdated:function(e,t,i){switch(e){case"message":this.setMessage(i);break;case"label":this.__internal.buttons[0].element&&(this.__internal.buttons[0].element.innerHTML=i)}},prepare:function(){this.__internal.buttons[0].element.disabled=!0},setup:function(){return{buttons:[{text:e("Create"),key:13,className:"btn btn-primary fa fa-file file_manager_create file_manager_ok pg-alertify-button disabled"},{text:e("Cancel"),key:27,className:"btn btn-danger fa fa-times file_manager_create_cancel pg-alertify-button"}],focus:{element:0},options:{closableByDimmer:!1,maximizable:!1,closable:!1,movable:!0}}},replace_file:function(){var e=i(".replace_file .btn_yes"),t=i(".replace_file .btn_no");i(".storage_dialog #uploader .input-path").attr("disabled",!0),i(".file_manager_ok").addClass("disabled"),i(".replace_file, .fm_dimmer").show(),e.click(function(n){i(".replace_file, .fm_dimmer").hide(),e.off(),t.off();var s=i(".storage_dialog #uploader .input-path").val();pgAdmin.Browser.Events.trigger("pgadmin-storage:finish_btn:create_file",s),i(".file_manager_create_cancel").trigger("click"),i(".storage_dialog #uploader .input-path").attr("disabled",!1),i(".file_manager_ok").removeClass("disabled")}),t.click(function(n){i(".replace_file, .fm_dimmer").hide(),e.off(),t.off(),i(".storage_dialog #uploader .input-path").attr("disabled",!1),i(".file_manager_ok").removeClass("disabled")})},is_file_exist:function(){var e=i(".storage_dialog #uploader .input-path").val(),n=e.substr(0,e.lastIndexOf("/")+1),s=e.substr(e.lastIndexOf("/")+1),a=!1,o={path:n,name:s,mode:"is_file_exist"};return i.ajax({type:"POST",data:JSON.stringify(o),url:t("file_manager.filemanager",{trans_id:l}),dataType:"json",contentType:"application/x-download; charset=utf-8",async:!1,success:function(e){var t=e.data.result;a=1===t.Code}}),a},check_permission:function(n){var a=!1,o={path:n,mode:"permission"};return i.ajax({type:"POST",data:JSON.stringify(o),url:t("file_manager.filemanager",{trans_id:l}),dataType:"json",contentType:"application/json; charset=utf-8",async:!1,success:function(e){var t=e.data.result;1===t.Code?a=!0:(i(".file_manager_ok").addClass("disabled"),s.error(t.Error))},error:function(){i(".file_manager_ok").addClass("disabled"),s.error(e("Error occurred while checking access permission."))}}),a},callback:function(t){if(t.button.text==e("Create")){var s=i(".storage_dialog #uploader .input-path").val(),a={path:i(".currentpath").val()};if(!this.check_permission(s))return void(t.cancel=!0);if(!n.isUndefined(s)&&""!==s&&this.is_file_exist())this.replace_file(),t.cancel=!0;else{pgAdmin.Browser.Events.trigger("pgadmin-storage:finish_btn:create_file",s);var d=i(this.elements.body).find(".storage_content");i(d).find("*").off(),d.remove(),o(l)}r(a,l)}else if(t.button.text==e("Cancel")){var d=i(this.elements.body).find(".storage_content");i(d).find("*").off(),d.remove(),o(l),pgAdmin.Browser.Events.trigger("pgadmin-storage:cancel_btn:create_file")}},build:function(){this.elements.content.appendChild(d.get(0))},hooks:{onshow:function(){i(this.elements.body).addClass("pgadmin-storage-body")}}}})}},show_storage_dlg:function(e){s.storageManagerDlg(e).resizeTo("60%","80%")},show_file_selection:function(e){s.fileSelectionDlg(e).resizeTo("60%","80%")},show_folder_selection:function(e){s.folderSelectionDlg(e).resizeTo("60%","80%")},show_create_dlg:function(e){s.createModeDlg(e).resizeTo("60%","80%")},show_dialog:function(e){"select_file"==e.dialog_type?this.show_file_selection(e):"select_folder"==e.dialog_type?this.show_folder_selection(e):"create_file"==e.dialog_type?this.show_create_dlg(e):this.show_storage_dlg(e)}}),pgAdmin.FileManager)}.apply(t,n))&&(e.exports=s)},"./pgadmin/misc/static/explain/js/explain.js":function(e,t,i){"use strict";var n,s;n=[i("./pgadmin/static/js/url_for.js"),i("./node_modules/jquery/dist/jquery.js"),i("./node_modules/underscore/underscore.js"),i("./node_modules/underscore.string/index.js"),i("./pgadmin/static/js/pgadmin.js"),i("./node_modules/backbone/backbone.js"),i("./node_modules/snapsvg/dist/snap.svg.js")],void 0!==(s=function(e,t,i,n,s,a,o){s=s||window.pgAdmin||{};var r=s.Explain;if(o.plugin(function(e,t,i,n){i.prototype.multitext=function(t,i,n,s,a){var o=e(),r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",l=o.text(0,0,r);l.attr(a);var d=l.getBBox().width/r.length,c=Math.round(s/d)-1;o.remove();for(var u=n.split(" "),p=0,f=[],h="",m=0;m<u.length;m++){var g=function e(t,i,n){var a=n.length,o=[];return 0==a?o:(i&&i+a*d>s?(o.push(t),o=o.concat(e("",0,n))):i?o.push(t+" "+n):(t&&o.push(t),n.length>c+1?o.push(n.slice(0,c)+"-"):o.push(n),o=o.concat(e("",0,n.slice(c)))),o)}(h,p,u[m]);h&&(f=f.slice(0,f.length-1)),f=f.concat(g),h=f[f.length-1],p=h.length*d}var v=this.text(t,i,f).attr(a);return v.selectAll("tspan:nth-child(n+2)").attr({dy:"1.2em",x:t}),v}}),s.Explain)return s.Explain;var r=s.Explain={prefix:e("misc.index")+"static/explain/img/"},l={Aggregate:{image:"ex_aggregate.svg",image_text:"Aggregate"},Append:{image:"ex_append.svg",image_text:"Append"},"Bitmap Index Scan":function(e){return{image:"ex_bmp_index.svg",image_text:e["Index Name"]}},"Bitmap Heap Scan":function(e){return{image:"ex_bmp_heap.svg",image_text:e["Relation Name"]}},BitmapAnd:{image:"ex_bmp_and.svg",image_text:"Bitmap AND"},BitmapOr:{image:"ex_bmp_or.svg",image_text:"Bitmap OR"},"CTE Scan":{image:"ex_cte_scan.svg",image_text:"CTE Scan"},"Function Scan":{image:"ex_result.svg",image_text:"Function Scan"},"Foreign Scan":{image:"ex_foreign_scan.svg",image_text:"Foreign Scan"},Gather:{image:"ex_gather_motion.svg",image_text:"Gather"},Group:{image:"ex_group.svg",image_text:"Group"},GroupAggregate:{image:"ex_aggregate.svg",image_text:"Group Aggregate"},Hash:{image:"ex_hash.svg",image_text:"Hash"},"Hash Join":function(e){if(!e["Join Type"])return{image:"ex_join.svg",image_text:"Join"};switch(e["Join Type"]){case"Anti":return{image:"ex_hash_anti_join.svg",image_text:"Hash Anti Join"};case"Semi":return{image:"ex_hash_semi_join.svg",image_text:"Hash Semi Join"};default:return{image:"ex_hash.svg",image_text:String("Hash "+e["Join Type"]+" Join")}}},HashAggregate:{image:"ex_aggregate.svg",image_text:"Hash Aggregate"},"Index Only Scan":function(e){return{image:"ex_index_only_scan.svg",image_text:e["Index Name"]}},"Index Scan":function(e){return{image:"ex_index_scan.svg",image_text:e["Index Name"]}},"Index Scan Backword":{image:"ex_index_scan.svg",image_text:"Index Backward Scan"},Limit:{image:"ex_limit.svg",image_text:"Limit"},LockRows:{image:"ex_lock_rows.svg",image_text:"Lock Rows"},Materialize:{image:"ex_materialize.svg",image_text:"Materialize"},"Merge Append":{image:"ex_merge_append.svg",image_text:"Merge Append"},"Merge Join":function(e){switch(e["Join Type"]){case"Anti":return{image:"ex_merge_anti_join.svg",image_text:"Merge Anti Join"};case"Semi":return{image:"ex_merge_semi_join.svg",image_text:"Merge Semi Join"};default:return{image:"ex_merge.svg",image_text:String("Merge "+e["Join Type"]+" Join")}}},ModifyTable:function(e){switch(e.Operation){case"Insert":return{image:"ex_insert.svg",image_text:"Insert"};case"Update":return{image:"ex_update.svg",image_text:"Update"};case"Delete":return{image:"ex_delete.svg",image_text:"Delete"}}},"Nested Loop":function(e){switch(e["Join Type"]){case"Anti":return{image:"ex_nested_loop_anti_join.svg",image_text:"Nested Loop Anti Join"};case"Semi":return{image:"ex_nested_loop_semi_join.svg",image_text:"Nested Loop Semi Join"};default:return{image:"ex_nested.svg",image_text:"Nested Loop "+e["Join Type"]+" Join"}}},"Recursive Union":{image:"ex_recursive_union.svg",image_text:"Recursive Union"},Result:{image:"ex_result.svg",image_text:"Result"},"Sample Scan":{image:"ex_scan.svg",image_text:"Sample Scan"},Scan:{image:"ex_scan.svg",image_text:"Scan"},Seek:{image:"ex_seek.svg",image_text:"Seek"},SetOp:function(e){var t=e.Strategy,i=e.Command;return"Hashed"==t?n.startsWith(i,"Intersect")?"Intersect All"==i?{image:"ex_hash_setop_intersect_all.svg",image_text:"Hashed Intersect All"}:{image:"ex_hash_setop_intersect.svg",image_text:"Hashed Intersect"}:n.startsWith(i,"Except")?"Except All"==i?{image:"ex_hash_setop_except_all.svg",image_text:"Hashed Except All"}:{image:"ex_hash_setop_except.svg",image_text:"Hash Except"}:{image:"ex_hash_setop_unknown.svg",image_text:"Hashed SetOp Unknown"}:{image:"ex_setop.svg",image_text:"SetOp"}},"Seq Scan":function(e){return{image:"ex_scan.svg",image_text:e["Relation Name"]}},"Subquery Scan":{image:"ex_subplan.svg",image_text:"SubQuery Scan"},Sort:{image:"ex_sort.svg",image_text:"Sort"},"Tid Scan":{image:"ex_tid_scan.svg",image_text:"Tid Scan"},Unique:{image:"ex_unique.svg",image_text:"Unique"},"Values Scan":{image:"ex_values_scan.svg",image_text:"Values Scan"},WindowAgg:{image:"ex_window_aggregate.svg",image_text:"Window Aggregate"},"WorkTable Scan":{image:"ex_worktable_scan.svg",image_text:"WorkTable Scan"},Undefined:{image:"ex_unknown.svg",image_text:"Undefined"}},d=void 0,c=void 0,u=a.Model.extend({defaults:{Plans:[],level:[],image:void 0,image_text:void 0,xpos:void 0,ypos:void 0,width:100,height:100},parse:function(e){var t=1,s=e.level=e.level||[t],a=[],o=e["Node Type"],r=e.xpos=e.xpos-100,d=e.ypos,c=0;e.width=100,e.height=100,"SubPlan"===e["Parent Relationship"]&&(e.width+=62.5,e.height+=50,e.ypos+=25,r-=25,d+=25),n.startsWith(o,"(slice")&&(o=o.substring(0,7));var p=i.isFunction(l[o])&&l[o].apply(void 0,[e])||l[o]||{image:"ex_unknown.svg",image_text:o};return e.image=p.image,e.image_text=p.image_text,"Plans"in e&&(e.width+=200,i.each(e.Plans,function(n){var o=i.clone(s),l=new u;o.push(t),l.set(l.parse(i.extend(n,{level:o,xpos:r-200,ypos:d}))),c<l.get("width")&&(c=l.get("width"));var p=l.get("height");1!==t?e.height=e.height+p+60:p>e.height&&(e.height=p),d+=p+60,a.push(l),t++})),e.width+=c,e.Plans=a,e},toJSON:function(e){var t=a.Model.prototype.toJSON.apply(this,arguments);if(e)delete t.Plans;else{var n=[];i.each(t.Plans,function(e){n.push(e.toJSON())}),t.Plans=n}return t},drawPolyLine:function(e,t,i,n,s,a,o){var r=t+(n-t)/3,l=t+(n-t)/3*2,d=e.polygon([0,10,5,10,2.5,0,0,10]).transform("r90"),c=d.marker(0,0,10,10,0,5).attr(o);e.line(t,i,r,i).attr(a),e.line(r-1,i,l,s).attr(a),e.line(l,s,n,s).attr(a).attr({markerEnd:c})},draw:function(e,n,s,a,o,l,d){var c=e.g(),u=n+this.get("xpos"),p=s+this.get("ypos"),f="SubPlan"===this.get("Parent Relationship");if(f){c.rect(u-this.get("width")+100+25,p-this.get("height")+100+25-5,this.get("width")-25,this.get("height")+(p-25),5).attr({stroke:"#444444",strokeWidth:1.2,fill:"gray",fillOpacity:.2});c.text(u+100-this.get("width")/2-25,p+100-this.get("height")/2-25,this.get("Subplan Name")).attr({fontSize:"15px","text-anchor":"start",fill:"red"})}var h=c.image(r.prefix+this.get("image"),u+25,p+25,50,50),m=this.toJSON();h.mouseover(function(e){d.empty();var n=t("<table></table>",{class:"pgadmin-tooltip-table"}).appendTo(d);i.each(m,function(e,t){"image"!==t&&"Plans"!==t&&"level"!==t&&"image"!==t&&"image_text"!==t&&"xpos"!==t&&"ypos"!==t&&"width"!==t&&"height"!==t&&n.append('<tr><td class="label explain-tooltip">'+t+'</td><td class="label explain-tooltip-val">'+e+"</td></tr>")});var s=l.data("zoom-factor"),a=(u+100)*s-l.scrollLeft(),o=(p+100)*s-l.scrollTop();l.width()<a+d[0].clientWidth&&(a-=d[0].clientWidth+100*s),l.height()<o+d[0].clientHeight&&(o-=d[0].clientHeight+50*s),a=a<0?0:a,o=o<0?0:o,d.css({opacity:"0.8"}),d.css("left",a),d.css("top",o)}),h.mouseout(function(){d.empty(),d.css({opacity:"0"}),d.css("left",0),d.css("top",0)});var g=void 0==this.get("Schema")?this.get("image_text"):this.get("Schema")+"."+this.get("image_text");c.g();if(c.multitext(u+50+5,p+100-5,g,150,{"font-size":"15px","text-anchor":"middle"}),!i.isUndefined(o)){var v=u+100,b=p+50,_=a-10,y=o+50,w=this.get("Startup Cost"),x=this.get("Total Cost"),C=2;if(void 0!=w&&void 0!=x){var C=Math.round(Math.log((w+x)/2+w));C=C<1?1:C>10?10:C}var j=[0,0,20,20],k={stroke:"#000000",strokeWidth:C+1},E={stroke:"#866486",strokeWidth:C+1},T={viewBox:j.join(" ")};this.drawPolyLine(c,v,b,_,y,f?E:k,T)}var N=this.get("Plans");i.each(N,function(t){t.draw(e,n,s,u,p,l,d)})}}),p=a.Model.extend({defaults:{Plan:void 0,xpos:0,ypos:0},initialize:function(){this.set("Plan",new u)},parse:function(e){if(e&&"Plan"in e){var t=this.get("Plan");t.set(t.parse(i.extend(e.Plan,{xpos:0,ypos:0}))),e.xpos=0,e.ypos=0,e.width=t.get("width")+50,e.height=t.get("height")+100,delete e.Plan}return e},toJSON:function(){var e=a.Model.prototype.toJSON.apply(this,arguments);return e.Plan&&(e.Plan=e.Plan.toJSON()),e},draw:function(e,t,i,n,s){var a=e.g();a.rect(0,0,this.get("width")-10,this.get("height")-10,5).attr({fill:"#FFF"}),d=this.get("width"),c=this.get("height"),this.get("Plan").draw(a,t,i,void 0,void 0,n,s)}});return i.extend(r,{DrawJSONPlan:function(e,n){e.empty();var s=1,a=t("<div></div>",{class:"pg-explain-zoom-area btn-group",role:"group"}).appendTo(e),r=t("<button></button>",{class:"btn pg-explain-zoom-btn badge",title:"Zoom in"}).appendTo(a).append(t("<i></i>",{class:"fa fa-search-plus"})),l=t("<button></button>",{class:"btn pg-explain-zoom-btn badge",title:"Zoom to original"}).appendTo(a).append(t("<i></i>",{class:"fa fa-arrows-alt"})),d=t("<button></button>",{class:"btn pg-explain-zoom-btn badge",title:"Zoom out"}).appendTo(a).append(t("<i></i>",{class:"fa fa-search-minus"})),c=t("<div></div>",{class:"pgadmin-explain-container"}).appendTo(e),u=t("<div></div>",{id:"toolTip",class:"pgadmin-explain-tooltip"}).appendTo(e);u.empty(),c.data("zoom-factor",s);var f=0,h=0,h=25;i.each(n,function(e){var i=new p;i.set(i.parse(e)),f=i.get("width"),h=i.get("height");var n=o(f,h),a=t(n.node).detach();c.append(a),i.draw(n,f-25,25,c,u);var m=c.width();c.height();if(m<f){s=m/f,s=s<.01?.01:s,s=s>1?1:s;var g=new o.matrix;g.scale(s,s),a.find("g").first().attr({transform:g}),a.attr({width:f*s,height:h*s}),c.data("zoom-factor",s)}r.on("click",function(e){s=s+.05>2?2:s+.05;var t=new o.matrix;t.scale(s,s),a.find("g").first().attr({transform:t}),a.attr({width:f*s,height:h*s}),c.data("zoom-factor",s),r.blur()}),d.on("click",function(e){s=s-.05<.01?.01:s-.05;var t=new o.matrix;t.scale(s,s),a.find("g").first().attr({transform:t}),a.attr({width:f*s,height:h*s}),c.data("zoom-factor",s),d.blur()}),l.on("click",function(e){s=1;var t=new o.matrix;t.scale(s,s),a.find("g").first().attr({transform:t}),a.attr({width:f*s,height:h*s}),c.data("zoom-factor",s),l.blur()})})}}),r}.apply(t,n))&&(e.exports=s)},"./pgadmin/preferences/static/js/preferences.js":function(e,t,i){"use strict";var n,s;n=[i("./pgadmin/static/js/gettext.js"),i("./pgadmin/static/js/url_for.js"),i("./node_modules/jquery/dist/jquery.js"),i("./node_modules/underscore/underscore.js"),i("./node_modules/alertifyjs/build/alertify.js"),i("./pgadmin/static/js/pgadmin.js"),i("./pgadmin/static/js/backform.pgadmin.js"),i("./pgadmin/browser/static/js/browser.js"),i("./pgadmin/browser/static/js/tools.js")],void 0!==(s=function(e,t,i,n,s,a,o,r,l){return a=a||window.pgAdmin||{},a.Preferences?a.Preferences:(a.Preferences=l.extend({Init:function(){this.initialized||(this.initialized=!0,r.add_menus([{name:"mnu_preferences",module:this,applies:["file"],callback:"show",priority:999,label:e("Preferences")}]),s.dialog("preferencesDlg",function(){var a,l=[],d=i("<div class='preferences_dialog'></div>"),c=Backbone.Model.extend({idAttribute:"id",defaults:{id:void 0,value:void 0}}),u={},p=this.preferences=new(Backbone.Collection.extend({model:c,url:t("preferences.index"),updateAll:function(){for(var e in u)this.get(e).save();return!0}}))(null);p.on("reset",function(){u={}}),p.on("change",function(e){var t=e.get("id");t in u?n.isEqual(e.get("value"),u[t])&&delete u[t]:u[t]=e._previousAttributes.value});var f=function(e){var t=d.find(".preferences_content");t.empty(),l&&n.each(l,function(e){e.remove()}),l=[],n.each(e,function(e){var i=p.get(e.id);i.errorModel=new Backbone.Model;var s=new o.Field(n.extend({},e,{id:"value",name:"value"})),a=new(s.get("control"))({field:s,model:i});t.append(a.render().$el),l.push(a)})},h=function(){if(a){try{jTreeApi=a.aciTree("destroy")}catch(e){}a.off("acitree",v),p.reset(),l&&n.each(l,function(e){e.remove()}),l=[],d.empty()}},m=function e(t,i){var n=i?t.itemData(i):null;if(n&&n.preferences)return void t.select(i);i=t.first(i),e(t,i)},g=function(t){switch(t.type){case"text":return"input";case"boolean":return t.options={onText:e("True"),offText:e("False"),onColor:"success",offColor:"default",size:"mini"},"switch";case"node":return t.options={onText:e("Show"),offText:e("Hide"),onColor:"success",offColor:"default",size:"mini"},"switch";case"integer":case"numeric":return"numeric";case"date":return"datepicker";case"datetime":return"datetimepicker";case"options":var i=[],s=!1;return n.each(t.options,function(e){"label"in e&&"value"in e?(i.push({label:e.label,value:e.value}),e.value==t.value&&(s=!0)):(i.push({label:e,value:e}),e==t.value&&(s=!0))}),t.select2&&1==t.select2.tags&&t.value&&0==s&&i.push({label:t.value,value:t.value}),t.options=i,"select2";case"multiline":return"textarea";case"switch":return"switch";default:return console&&console.log&&console.log("Hmm.. We don't know how to render this type - ''"+type+"' of control."),"input"}},v=function(e,t,i,s){i=i||t.selected();var a=i?t.itemData(i):null;switch(s){case"selected":if(!a)return!0;if(a.preferences)return f(a.preferences),!0;m(t,i);break;case"added":if(!a)return!0;a.preferences&&n.isArray(a.preferences)&&n.each(a.preferences,function(e){p.add({id:e.id,value:e.value,category_id:a.id,mid:a.mid,name:e.name}),e.control||(e.control=g(e)),e.help_str&&(e.helpMessage=e.help_str)}),a.sortable=!1;break;case"loaded":setTimeout(function(){m(t,null)},300)}return!0};return{main:function(){h(),d.append("<div class='pg-el-xs-3 preferences_tree aciTree'></div>").append("<div class='pg-el-xs-9 preferences_content'>"+e("Category is not selected.")+"</div>"),a=d.find(".preferences_tree"),a.on("acitree",v),a.aciTree({selectable:!0,expand:!0,ajax:{url:t("preferences.index")}}),this.show()},setup:function(){return{buttons:[{text:"",key:112,className:"btn btn-default pull-left fa fa-lg fa-question",attrs:{name:"dialog_help",type:"button",label:e("Preferences"),url:t("help.static",{filename:"preferences.html"})}},{text:e("OK"),key:13,className:"btn btn-primary fa fa-lg fa-save pg-alertify-button"},{text:e("Cancel"),key:27,className:"btn btn-danger fa fa-lg fa-times pg-alertify-button"}],focus:{element:0},options:{padding:!1,overflow:!1,title:e("Preferences"),closableByDimmer:!1,modal:!1,pinnable:!1}}},callback:function(t){if("dialog_help"==t.button.element.name)return t.cancel=!0,void r.showHelp(t.button.element.name,t.button.element.getAttribute("url"),null,null,t.button.element.getAttribute("label"));t.button.text==e("OK")&&(p.updateAll(),setTimeout(r.cache_preferences(),2e3))},build:function(){this.elements.content.appendChild(d.get(0)),s.pgDialogBuild.apply(this)},hooks:{onshow:function(){i(this.elements.body).addClass("pgadmin-preference-body")}}}}))},show:function(){s.preferencesDlg(!0).resizeTo("60%","60%")}}),a.Preferences)}.apply(t,n))&&(e.exports=s)},"./pgadmin/settings/static/js/settings.js":function(e,t,i){"use strict";var n,s;n=[i("./node_modules/jquery/dist/jquery.js"),i("./node_modules/alertifyjs/build/alertify.js"),i("./node_modules/underscore/underscore.js"),i("./pgadmin/static/js/gettext.js"),i("./pgadmin/static/js/url_for.js"),i("./pgadmin/browser/static/js/browser.js"),i("./pgadmin/browser/static/js/tools.js")],void 0!==(s=function(e,t,i,n,s,a,o){var r=window.pgAdmin=window.pgAdmin||{};return r.Settings?r.Settings:(r.Settings=o.extend({Init:function(){this.initialized||(this.initialized=!0,a.add_menus([{name:"mnu_resetlayout",module:this,applies:["file"],callback:"show",priority:999,label:n("Reset Layout")}]))},show:function(){t.confirm(n("Reset layout"),n("Are you sure you want to reset the current layout? This will cause the application to reload and any un-saved data will be lost."),function(){var t=e('<div id="reloading-indicator"></div>');e("body").append(t),e.ajax({url:s("settings.reset_layout"),type:"DELETE",async:!1,success:function(){e(window).unbind("unload"),window.onbeforeunload=null,location.reload(!0)},error:function(){console.log("Something went wrong on server while resetting layout")}})},function(){})}}),r.Settings)}.apply(t,n))&&(e.exports=s)},"./pgadmin/static/css/style.css":function(e,t){},"./pgadmin/static/js/alertify.pgadmin.defaults.js":function(e,t,i){"use strict";(function(n){var s,a;s=[i("./pgadmin/static/js/gettext.js"),i("./node_modules/alertifyjs/build/alertify.js"),i("./node_modules/jquery/dist/jquery.js")],void 0!==(a=function(e,t,i){t.defaults.transition="zoom",t.defaults.theme.ok="btn btn-primary",t.defaults.theme.cancel="btn btn-danger",t.defaults.theme.input="form-control",t.pgIframeDialog||t.dialog("pgIframeDialog",function(){var e;return{main:function(e){return this.set({pg_msg:e})},setup:function(){return{options:{padding:!1,overflow:!1}}},build:function(){e=document.createElement("iframe"),e.src="",e.frameBorder="no",e.width="100%",e.height="100%",this.elements.content.appendChild(e),this.elements.body.style.minHeight=.5*screen.height+"px"},settings:{pg_msg:void 0},settingUpdated:function(t,i,n){switch(t){case"pg_msg":var s=e.contentWindow||e.contentDocument;s.document&&(s=s.document),s.open(),s.write(n),s.close()}},hooks:{onupdate:function(t,i,n){switch(t){case"resizable":n?(this.elements.content.removeAttribute("style"),e&&e.removeAttribute("style")):(this.elements.content.style.minHeight="inherit",e&&(e.style.minHeight="inherit"))}}}}}),t.pgNotifier=function(s,a,o,r){var l=a.responseText,d=a.getResponseHeader("Content-Type");if(0==a.status)l=e("Connection to the server has been lost."),o=e("Connection Lost");else if(d)try{if(0==d.indexOf("application/json")){var c=i.parseJSON(l);if(null!=c.result&&(!c.errormsg||""==c.errormsg)&&r&&"function"==typeof r)return r(c.result);l=n.escape(c.result)||n.escape(c.errormsg)||"Unknown error"}if(0==d.indexOf("text/html")){var u=o;return"error"===s&&(u='                  <div class="media font-red-3 text-14">                    <div class="media-body media-middle">                      <div class="alert-text">'+o+'</div><br/>                      <div class="alert-text">'+e("Click for details.")+"</div>                    </div>                  </div>"),void t.notify(u,s,0,function(){t.pgIframeDialog().show().set({frameless:!1}).set("pg_msg",l)})}}catch(e){t.alert().show().set("message",e.message).set("title","Error")}t.alert().show().set("message",l.replace(new RegExp(/\r?\n/,"g"),"<br />")).set("title",o)};var s=function(e){var t=this;e&&(t.pgResizeRecursion=!1),t.pgResizeTimeout||(t.pgResizeTimeout=setTimeout(function(){var e=i(this.elements.dialog),t=e.width();this.pgResizeTimeout=null,t=t<=480?"xs":t<600?"sm":t<768?"md":"lg",e.attr("el",t)}.bind(t),100))},a=function e(t){var i=this;t&&(i.pgResizeRecursion=!0),setTimeout(function(){s.apply(i),i.pgResizeRecursion&&e.apply(i,[!1])},100)};t.pgDialogBuild=function(){this.set("onshow",function(){this.elements.dialog.classList.add("pg-el-container"),s.apply(this,arguments)}),this.set("onresize",a.bind(this,!0)),this.set("onresized",s.bind(this,!0)),this.set("onmaximized",s),this.set("onrestored",s)},t.pgHandleItemError=function(t,n,s,a){var o=window.pgAdmin.Browser;if(t&&o){var r=t.getResponseHeader("Content-Type"),l=r&&0==r.indexOf("application/json")&&i.parseJSON(t.responseText);if(l&&(503==t.status?"CONNECTION_LOST"==l.info&&"server"in a.info&&l.data.sid>=0&&l.data.sid==a.info.server._id:428==t.status&&l.errormsg&&l.errormsg==e("Connection to the server has been lost."))){a.preHandleConnectionLost&&"function"==typeof a.preHandleConnectionLost&&a.preHandleConnectionLost.apply(this,arguments);var d=o.Nodes.server,c={resp:l,xhr:t,args:a},u=function(){var e=this,t=function(e,n,s){this.args.info.server._id==e&&(o.Events.off("pgadmin:server:connected",t),o.Events.off("pgadmin:server:connect:cancelled",i),this.resp.data.database&&this.resp.data.database!=s.db&&o.Events.trigger("pgadmin:database:connection:lost",this.args.item,this.resp,!0))}.bind(e),i=function(e,n,s){e==this.args.info.server.id&&(o.Events.off("pgadmin:server:connected",t),o.Events.off("pgadmin:server:connect:cancelled",i),o.Events.trigger("pgadmin:database:connect:cancelled",e,this.resp.data.database||s.db,n,s))}.bind(e);o.Events.on("pgadmin:server:connected",t),o.Events.on("pgadmin:server:connect:cancelled",i),o.Events.trigger("pgadmin:server:connection:lost",this.args.item,this.resp)}.bind(c);return i.ajax({url:d.generate_url(null,"connect",a.info.server,!0,a.info),dataType:"json",success:function(e){if(e.success&&"connected"in e.data&&e.data.connected)return void o.Events.trigger("pgadmin:database:connection:lost",a.item,l);u()},error:function(){u()}}),!0}return!1}};var o=t.success,r=t.error;return n.extend(t,{orig_success:o,orig_error:r}),n.extend(t,{success:function(e,i,n){var s='      <div class="media font-green-3 text-14">        <div class="media-body media-middle">          <div class="alert-icon success-icon">            <i class="fa fa-check" aria-hidden="true"></i>          </div>            <div class="alert-text">'+e+"</div>        </div>      </div>";return t.orig_success(s,i,n)},error:function(e,i,n){var s='      <div class="media font-red-3 text-14">        <div class="media-body media-middle">          <div class="alert-icon error-icon">            <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>          </div>            <div class="alert-text">'+e+"</div>        </div>      </div>";return t.orig_error(s,i,n)},info:function(e,i){var n='      <div class="media alert-info font-blue text-14">        <div class="media-body media-middle">          <div class="alert-icon info-icon">            <i class="fa fa-info" aria-hidden="true"></i>          </div>            <div class="alert-text">'+e+"</div>        </div>      </div>";return t.notify(n,i)}}),t}.apply(t,s))&&(e.exports=a)}).call(t,i("./node_modules/underscore/underscore.js"))},"./pgadmin/static/js/backform.pgadmin.js":function(e,t){throw new Error('Module build failed: SyntaxError: Unexpected token (2442:18)\n\n  2440 |       return this;\n  2441 |     },\n> 2442 |     clearInvalid: function() {\n       |                   ^\n  2443 |       Backform.InputControl.prototype.clearInvalid.apply(this, arguments);\n  2444 |       this.$el.removeClass("pgadmin-datepicker-has-error");\n  2445 |       return this;\n')},"./pgadmin/static/js/backgrid.pgadmin.js":function(e,t,i){"use strict";(function(n){var s,a;s=[i("./pgadmin/static/js/gettext.js"),i("./node_modules/underscore/underscore.js"),i("./node_modules/jquery/dist/jquery.js"),i("./node_modules/backbone/backbone.js"),i("./node_modules/backform/src/backform.js"),i("./node_modules/backgrid/lib/backgrid.js"),i("./node_modules/alertifyjs/build/alertify.js"),i("./node_modules/moment/moment.js"),i("./node_modules/bignumber.js/bignumber.js"),i("./node_modules/eonasdan-bootstrap-datetimepicker/build/js/bootstrap-datetimepicker.min.js"),i("./node_modules/bootstrap-switch/dist/js/bootstrap-switch.js")],void 0!==(a=function(e,t,i,s,a,o,r,l,d){t.extend(o.Column.prototype.defaults,{cellFunction:void 0}),t.extend(o.Cell.prototype.events,{mouseover:function(){var e=i(this.el);e.text().length>0&&!e.attr("title")&&e.innerWidth()+1<e[0].scrollWidth&&e.attr("title",i.trim(e.text()))}}),t.extend(o.Body.prototype,{sort:function(e,i){if(!t.contains(["ascending","descending",null],i))throw new RangeError('direction must be one of "ascending", "descending" or `null`');t.isString(e)&&(e=this.columns.findWhere({name:e}));var n,a=this.collection;n="ascending"===i?-1:"descending"===i?1:null;var o=e.get("cell").prototype.className||"string-cell",r=this.makeComparator(e.get("name"),n,n?e.sortValue():function(e){return 1*e.cid.replace("c","")},o);return s.PageableCollection&&a instanceof s.PageableCollection?(a.setSorting(n&&e.get("name"),n,{sortValue:e.sortValue()}),a.fullCollection?(null==a.fullCollection.comparator&&(a.fullCollection.comparator=r),a.fullCollection.sort(),a.trigger("backgrid:sorted",e,i,a)):a.fetch({reset:!0,success:function(){a.trigger("backgrid:sorted",e,i,a)}})):(a.comparator=r,a.sort(),a.trigger("backgrid:sorted",e,i,a)),e.set("direction",i),this},makeComparator:function(e,i,n,s){return function(a,o){var r,l=n(a,e),c=n(o,e);if(!t.isUndefined(l)&&!t.isUndefined(c)){var u=["number-cell","integer-cell"];if(t.include(u,s)){var p,f;try{p=new d(l)}catch(e){p=NaN}try{f=new d(c)}catch(e){f=NaN}return 1===i&&(r=p,p=f,f=r),p.eq(f)?0:p.lt(f)?-1:1}return 1===i&&(r=l,l=c,c=r),l===c?0:l<c?-1:1}}}}),t.extend(o.Row.prototype,{makeCell:function(e){return new(this.getCell(e))({column:e,model:this.model})},getCell:function(e){var i=e.get("cellFunction");if(!t.isFunction(i))return e.get("cell");var n=i.apply(e,[this.model]);try{return o.resolveNameToClass(n,"Cell")}catch(t){if(t instanceof ReferenceError)return e.get("cell");throw t}}});var c=o.Extension.ObjectCellEditor=o.CellEditor.extend({modalTemplate:t.template(['<div class="subnode-dialog" tabindex="1">','    <div class="subnode-body"></div>',"</div>"].join("\n")),stringTemplate:t.template(['<div class="form-group">','  <label class="control-label col-sm-4"><%=label%></label>','  <div class="col-sm-8">','    <input type="text" class="form-control" name="<%=name%>" value="<%=value%>" placeholder="<%=placeholder%>" />',"  </div>","</div>"].join("\n")),extendWithOptions:function(e){t.extend(this,e)},render:function(){return this},postRender:function(e,n){var s=this.columns_length,o=this.schema.length?this.schema:this.column.get("schema");if(null!=n&&n.get("name")!=this.column.get("name"))return!1;if(!t.isArray(o))throw new TypeError("schema must be an array");var r=this.createDialog(s),l=i('<form class="form-dialog"></form>');r.find("div.subnode-body").append(l);var d=r.find("form.form-dialog");return this.objectView=new a.Dialog({el:d,model:this.model,schema:o,tabPanelClassName:function(){return"sub-node-form col-sm-12"}}),this.objectView.render(),this},createDialog:function(e){var t=this.$dialog=i(this.modalTemplate({title:""})),n=i("<tr>"),s=i("<td>",{class:"editable sortable renderable",style:"height: auto",colspan:(e||1)+2}).appendTo(n);return this.tr=n,s.append(t.css("display","block")),this.el.parent("tr").after(n),t},save:function(){return this.model.trigger("backgrid:edited",this.model,this.column,new o.Command({keyCode:13})),this.tr&&this.tr.remove(),this},remove:function(){return this.objectView.remove(),o.CellEditor.prototype.remove.apply(this,arguments),this.tr&&this.tr.remove(),this}});o.Extension.PGSelectCell=o.SelectCell.extend({optionValues:function(){var e=[],i=t.result(this.column.attributes,"options");return t.each(i,function(t){e.push([t.label,t.value])}),e}}),o.Extension.ObjectCell=o.Cell.extend({editorOptionDefaults:{schema:[]},className:"edit-cell",editor:c,initialize:function(e){o.Cell.prototype.initialize.apply(this,arguments);var n=this,s={};t.each(this.editorOptionDefaults,function(t,i){n[i]||(n[i]=t),e&&e[i]&&(n[i]=e[i]),s[i]=n[i]}),s.el=i(this.el),s.columns_length=this.column.collection.length,s.el.attr("tabindex",1),this.listenTo(this.model,"backgrid:edit",function(e,t,i,n){t.get("name")==this.column.get("name")&&n.extendWithOptions(s)})},enterEditMode:function(){!t.isUndefined(this.column.get("canEditRow"))&&t.isFunction(this.column.get("canEditRow"))&&!o.callByNeed(this.column.get("canEditRow"),this.column,this.model)?r.alert(e("This object is not user editable."),function(){return!0}):(this.model.trigger("enteringEditMode",[this]),o.Cell.prototype.enterEditMode.apply(this,arguments),this.delegateEvents(),o.callByNeed(this.column.editable(),this.column,this.model)&&(this.$el.html("<i class='fa fa-pencil-square subnode-edit-in-process'></i>"),this.model.trigger("pg-sub-node:opened",this.model,this)))},render:function(){return this.$el.empty(),this.$el.html("<i class='fa fa-pencil-square-o'></i>"),this.delegateEvents(),this.grabFocus&&this.$el.focus(),this},exitEditMode:function(){var e=i(this.currentEditor.objectView.el).find('.nav-tabs > .active > a[data-toggle="tab"]').first().data("tabIndex");o.Cell.prototype.exitEditMode.apply(this,arguments),this.model.trigger("pg-sub-node:closed",this,e),this.grabFocus=!0},events:{click:function(e){this.$el.find("i").first().hasClass("subnode-edit-in-process")?(this.undelegateEvents(),this.currentEditor.save()):this.enterEditMode.call(this,[]),e.preventDefault()}}}),o.Extension.DeleteCell=o.Cell.extend({defaults:t.defaults({defaultDeleteMsg:e("Are you sure you wish to delete this row?"),defaultDeleteTitle:e("Delete Row")},o.Cell.prototype.defaults),className:"delete-cell",events:{click:"deleteRow"},deleteRow:function(i){i.preventDefault();var n=this;if(!t.isUndefined(this.column.get("canDeleteRow"))&&t.isFunction(this.column.get("canDeleteRow"))&&!o.callByNeed(this.column.get("canDeleteRow"),this.column,this.model))r.alert(e("This object cannot be deleted."),function(){return!0});else{var s=t.isUndefined(this.column.get("customDeleteMsg"))?n.defaults.defaultDeleteMsg:this.column.get("customDeleteMsg"),a=t.isUndefined(this.column.get("customDeleteTitle"))?n.defaults.defaultDeleteTitle:this.column.get("customDeleteTitle");r.confirm(a,s,function(){n.model.collection.remove(n.model)},function(){return!0})}},initialize:function(){o.Cell.prototype.initialize.apply(this,arguments)},render:function(){return this.$el.empty(),this.$el.html("<i class='fa fa-trash'></i>"),this.delegateEvents(),this}}),o.Extension.CustomHeaderCell=o.HeaderCell.extend({initialize:function(){o.HeaderCell.prototype.initialize.apply(this,arguments);var e=this.column.get("cellHeaderClasses");e&&this.$el.addClass(e)}}),i.fn.bootstrapSwitch=n.fn.bootstrapSwitch;o.Extension.SwitchCell=o.BooleanCell.extend({defaults:{options:t.defaults({onText:e("True"),offText:e("False"),onColor:"success",offColor:"default",size:"mini"},i.fn.bootstrapSwitch.defaults)},className:"switch-cell",initialize:function(){o.BooleanCell.prototype.initialize.apply(this,arguments),this.onChange=this.onChange.bind(this)},enterEditMode:function(){this.$el.addClass("editor"),i(this.$el.find("input")).focus()},exitEditMode:function(){this.$el.removeClass("editor")},events:{"switchChange.bootstrapSwitch":"onChange"},onChange:function(){var e=this.model,t=this.column,i=this.formatter.toRaw(this.$input.prop("checked"),e);e.set(t.get("name"),i)},render:function(){var e=this,n=t.defaults(this.column.toJSON(),this.defaults),s=this.model,a=this.column,r=this.formatter.fromRaw(s.get(a.get("name")),s),l=o.callByNeed(n.editable,a,s);return this.undelegateEvents(),this.$el.empty(),this.$el.append(i("<input>",{tabIndex:-1,type:"checkbox"}).prop("checked",r).prop("disabled",!l)),this.$input=this.$el.find("input[type=checkbox]").first(),this.$input.bootstrapSwitch(t.defaults({state:r,disabled:!l},n.options,this.defaults.options)),this.$el.on("keydown",function(t){var i;9==t.keyCode&&(i=t.shiftKey?e.$el.prev():e.$el.next()),i&&setTimeout(function(){if(i.hasClass("editable")){t.preventDefault(),t.stopPropagation();var n=new o.Command({key:"Tab",keyCode:9,which:9,shiftKey:t.shiftKey});e.model.trigger("backgrid:edited",e.model,e.column,n),i.focus()}},20)}),this.delegateEvents(),this}});o.Extension.Select2Cell=o.SelectCell.extend({className:"select2-cell",editor:null,defaults:t.defaults({select2:{},opt:{label:null,value:null,selected:!1}},o.SelectCell.prototype.defaults),enterEditMode:function(){this.$el.hasClass("editor")||this.$el.addClass("editor"),this.$select.select2("focus"),this.$select.select2("open"),this.$select.on("blur",this.exitEditMode)},exitEditMode:function(){this.$select.off("blur",this.exitEditMode),this.$select.select2("close"),this.$el.removeClass("editor")},events:{"select2:open":"enterEditMode","select2:close":"exitEditMode",change:"onSave","select2:unselect":"onSave"},template:t.template(['<option value="<%- value %>" ','<%= selected ? \'selected="selected"\' : "" %>>',"<%- label %></option>"].join(""),null,{variable:null}),initialize:function(){o.SelectCell.prototype.initialize.apply(this,arguments),this.onSave=this.onSave.bind(this),this.enterEditMode=this.enterEditMode.bind(this),this.exitEditMode=this.exitEditMode.bind(this)},render:function(){var e=t.defaults(this.column.toJSON(),this.defaults),n=this.model,s=this.column,a=o.callByNeed(e.editable,s,n),r=t.clone(this.optionValues||(t.isFunction(this.column.get("options"))?this.column.get("options")(this):this.column.get("options")));if(this.undelegateEvents(),this.$select&&(this.$select.data("select2")&&this.$select.select2("destroy"),delete this.$select,this.$select=null),this.$el.empty(),!t.isArray(r))throw new TypeError("optionValues must be an array");r.unshift(this.defaults.opt);for(var l=null,d=null,c=this,u=n.get(this.column.get("name")),p=t.extend({openOnEnter:!1,multiple:!1},c.defaults.select2,e.select2||{}),f=t.template('<select <%=multiple ? "multiple" : "" %>></select>'),h=c.$select=i(f({multiple:p.multiple})).appendTo(c.$el),m=0;m<r.length;m++){var g=r[m];t.isArray(g)?(l=g[0],d=g[1],h.append(c.template({label:l,value:d,selected:u==d||p.multiple&&t.indexOf(u,d)>-1}))):(g=t.defaults({},g,{selected:u==g.value||p.multiple&&t.indexOf(u,g.value)>-1},c.defaults.opt),h.append(c.template(g)))}return e&&t.has(e.disabled)?t.extend(p,{disabled:o.callByNeed(e.disabled,e,n)}):t.extend(p,{disabled:!a}),this.delegateEvents(),a&&"properties"!==e.mode||(p.placeholder=""),this.$sel=this.$select.select2(p),this.$sel&&this.$sel.data("select2").on("keypress",function(e){var t=this;9===e.which&&t.isOpen()&&(t.trigger("results:select",{}),e.preventDefault())}),this},onSave:function(){var e=this.model,t=this.column;e.set(t.get("name"),this.$select.val())},remove:function(){this.$select.off("change",this.onSave),this.$select.data("select2")&&this.$select.select2("destroy"),this.$el.empty(),o.SelectCell.prototype.remove.apply(this,arguments)}});var u=o.TextareaCellEditor=o.InputCellEditor.extend({tagName:"textarea",events:{blur:"saveOrCancel",keydown:""}});o.Extension.TextareaCell=o.Cell.extend({className:"textarea-cell",editor:u}),o.Extension.CustomHeaderIconCell=o.HeaderCell.extend({className:"header-icon-cell",events:{click:"addHeaderIcon"},addHeaderIcon:function(e){var t=new this.collection.model;this.collection.add(t),e.preventDefault()},render:function(){return this.$el.empty(),this.$el.html("<label><a><span style='font-weight:normal;'>Array Values</a></span></label> <button class='btn-sm btn-default add'>Add</button>"),this.delegateEvents(),this}});var p=s.Model.extend({defaults:{value:void 0}}),f=o.Extension.InputArrayCellEditor=o.CellEditor.extend({tagName:"div",events:{blur:"lostFocus"},render:function(){var t=this,n=this.model.get(this.column.get("name")),s=(i("<table></table>").appendTo(this.$el),[{name:"value",label:e("Array Values"),type:"text",cell:"string",headerCell:o.Extension.CustomHeaderIconCell,cellHeaderClasses:"width_percent_100"}]),a=i("<div class='pgadmin-control-group backgrid form-group col-xs-12 object subnode'></div>");this.$el.attr("tabindex","1"),s.unshift({name:"pg-backform-delete",label:"",cell:o.Extension.DeleteCell,editable:!1,cell_priority:-1}),this.$el.empty();var r=t.grid=new o.Grid({columns:s,collection:n});return r.render(),a.append(r.$el),this.$el.html(a),i(t.$el).pgMakeVisible("backform-tab"),t.delegateEvents(),this},lostFocus:function(e){var t=this,i=function(e,t){for(var i=t.parentNode;null!=i;){if(i==e)return!0;i=i.parentNode}return!1};setTimeout(function(){if(t.$el[0]!=document.activeElement&&!i(t.$el[0],document.activeElement)){var n=t.model,s=t.column;n.trigger("backgrid:edited",n,s,new o.Command(e)),setTimeout(function(){t.grid&&(t.grid.remove(),t.grid=null)},10)}},10)}}),h=o.Extension.InputStringArrayCellFormatter=function(){};t.extend(h.prototype,{fromRaw:function(e){var i=[];return e.each(function(e){var n=e.get("value");t.isUndefined(n)?i.push("null"):i.push(e.get("value"))}),i.toString()},toRaw:function(e){return e}});var m=o.Extension.InputIntegerArrayCellFormatter=function(){};t.extend(m.prototype,{fromRaw:function(e){var i=[];return e.each(function(e){var n=e.get("value");t.isUndefined(n)?i.push("null"):i.push(e.get("value"))}),i.toString()},toRaw:function(e){return e.each(function(e){e.set("value",parseInt(e.get("value")),{silent:!0})}),e}}),o.Extension.InputStringArrayCell=o.Cell.extend({className:"width_percent_25",formatter:h,editor:f,initialize:function(){o.Cell.prototype.initialize.apply(this,arguments);var e=arguments[0].model;t.isUndefined(this.collection)&&(this.collection=new(s.Collection.extend({model:p}))(e.get("value"))),this.model.set(this.column.get("name"),this.collection),this.listenTo(this.collection,"remove",this.render)}}),o.Extension.InputIntegerArrayCell=o.Cell.extend({className:"width_percent_25",formatter:m,editor:f,initialize:function(){o.Cell.prototype.initialize.apply(this,arguments);var e=arguments[0].model;t.isUndefined(this.collection)&&(this.collection=new(s.Collection.extend({model:p}))(e.get("value"))),this.model.set(this.column.get("name"),this.collection),this.listenTo(this.collection,"remove",this.render)}});var g=o.Extension.DependentCell=function(){};t.extend(g.prototype,{initialize:function(){var e=this.column.get("deps"),i=this;e&&t.isArray(e)&&t.each(e,function(e){var t=e.split("."),n=t.shift();i.listenTo(i.model,"change:"+n,i.dependentChanged)})},remove:function(){var e=this,i=e.column.get("deps");i&&t.isArray(i)&&t.each(i,function(t){var i=t.split("."),n=i.shift();e.stopListening(e.model,"change:"+n,e.dependentChanged)})}});var v=o.PasswordFormatter=function(){};v.prototype=new o.CellFormatter,t.extend(v.prototype,{fromRaw:function(e){if(t.isUndefined(e)||t.isNull(e))return"";for(var i="",n=0;n<e.length;n++)i+="*";return i}}),o.Extension.PasswordCell=o.StringCell.extend({formatter:v,editor:o.InputCellEditor.extend({attributes:{type:"password"},render:function(){var e=this.model;return this.$el.val(e.get(this.column.get("name"))),this}})}),t.extend(o.NumberFormatter.prototype,{fromRaw:function(e){if(t.isNull(e)||t.isUndefined(e))return"";e=parseFloat(e).toFixed(~~this.decimals);var i=e.split("."),n=i[0],s=i[1]?(this.decimalSeparator||".")+i[1]:"";return n.replace(this.HUMANIZED_NUM_RE,"$1"+this.orderSeparator)+s}});var b=o.Extension.JSONBCellFormatter=function(){};t.extend(b.prototype,{fromRaw:function(e){if(t.isArray(e)){var i="";return i=t.map(e,function(e){return JSON.stringify(JSON.stringify(e))}),"{"+i.join()+"}"}return t.isObject(e)?JSON.stringify(e):e},toRaw:function(e){return e}}),o.Extension.JSONBCell=o.StringCell.extend({className:"jsonb-cell",formatter:b});var _=o.InputCellEditor.extend({events:{},initialize:function(){o.InputCellEditor.prototype.initialize.apply(this,arguments);var e=this;i(this.el).prop("readonly",!0),i(this.el).datepicker({onClose:function(t){var i=new o.Command({});e.model.set(e.column.get("name"),t),e.model.trigger("backgrid:edited",e.model,e.column,i),i=e=null}})}});o.Extension.DatepickerCell=o.Cell.extend({editor:_});var y=o.Extension.MomentFormatter=function(e){t.extend(this,this.defaults,e)};y.prototype=new o.CellFormatter,t.extend(y.prototype,{defaults:{modelInUnixOffset:!1,modelInUnixTimestamp:!1,modelInUTC:!0,modelLang:l.locale(),modelFormat:l.defaultFormat,displayInUnixOffset:!1,displayInUnixTimestamp:!1,displayInUTC:!0,displayLang:l.locale(),displayFormat:l.defaultFormat,allowEmpty:!1},fromRaw:function(e){if(null==e)return"";var t=this.modelInUnixOffset?l(e):this.modelInUnixTimestamp?l.unix(e):this.modelInUTC?l.utc(e,this.modelFormat,this.modelLang):l(e,this.modelFormat,this.modelLang);return this.displayInUnixOffset?+t:this.displayInUnixTimestamp?t.unix():(this.displayLang&&t.locale(this.displayLang),this.displayInUTC?t.utc():t.local(),this.displayFormat!=l.defaultFormat?t.format(this.displayFormat):t.format())},toRaw:function(e){var t=this.displayInUnixOffset?l(+e):this.displayInUnixTimestamp?l.unix(+e):this.displayInUTC?l.utc(e,this.displayFormat,this.displayLang):l(e,this.displayFormat,this.displayLang);return t&&t.isValid()?this.modelInUnixOffset?+t:this.modelInUnixTimestamp?t.unix():(this.modelLang&&t.locale(this.modelLang),this.modelInUTC?t.utc():t.local(),this.modelFormat!=l.defaultFormat?t.format(this.modelFormat):t.format()):this.allowEmpty&&""===e?null:void 0}});var w=o.Extension.MomentCell=o.Cell.extend({editor:o.InputCellEditor,className:"datetime-cell",formatter:y,initialize:function(e){w.__super__.initialize.apply(this,arguments);var i=y.prototype.defaults,n=t.keys(i),s=t.pick(this,n),a=t.pick(e,n),o=t.pick(this.column.toJSON(),n);t.extend(this.formatter,i,s,a,o),this.editor=this.editor.extend({attributes:t.extend({},this.editor.prototype.attributes||this.editor.attributes||{},{placeholder:this.formatter.displayFormat}),options:this.column.get("options")})}});return o.Extension.DatetimePickerEditor=o.InputCellEditor.extend({postRender:function(){var e=this,i=t.extend({format:"YYYY-MM-DD HH:mm:ss Z",showClear:!0,showTodayButton:!0,toolbarPlacement:"top"},function(){var t=[];Array.prototype.push.apply(t,arguments);var i=t.shift();return"function"==typeof i?i.apply(e,t):i}(this.column.get("options"),this.column,this.model)||{},{keyBinds:{"shift tab":function(t){t&&setTimeout(function(){e.closeIt({keyCode:9,shiftKey:!0})},10)},tab:function(t){t&&setTimeout(function(){e.closeIt({keyCode:9})},10)}}});this.$el.datetimepicker(i),this.$el.datetimepicker("show"),this.picker=this.$el.data("DateTimePicker")},events:{"dp.hide":"closeIt"},closeIt:function(e){var i=this.formatter,n=this.model,s=this.column,a=this.$el.val(),r=i.toRaw(a,n);if(!this.is_closing){this.is_closing=!0,this.$el.datetimepicker("destroy"),this.is_closing=!1;var l=new o.Command(e);t.isUndefined(r)?n.trigger("backgrid:error",n,s,a):(n.set(s.get("name"),r),n.trigger("backgrid:edited",n,s,l))}}}),t.extend(w.prototype,y.prototype.defaults),o.Extension.StringDepCell=o.StringCell.extend({initialize:function(){o.StringCell.prototype.initialize.apply(this,arguments),o.Extension.DependentCell.prototype.initialize.apply(this,arguments)},dependentChanged:function(){this.$el.empty();var e=this,i=this.model,n=this.column,s=this.column.get("editable");this.render();var a=t.isFunction(s)?!!s.apply(n,[i]):!!s;return setTimeout(function(){e.$el.removeClass("editor"),a?e.$el.addClass("editable"):e.$el.removeClass("editable")},10),this.delegateEvents(),this},remove:o.Extension.DependentCell.prototype.remove}),o.Extension.Select2DepCell=o.Extension.Select2Cell.extend({initialize:function(){o.Extension.Select2Cell.prototype.initialize.apply(this,arguments),o.Extension.DependentCell.prototype.initialize.apply(this,arguments)},dependentChanged:function(){var e=this.model,i=this.column,n=this.column.get("editable"),s=t.isFunction(n)?!!n.apply(i,[e]):!!n;return this.render(),s?this.$el.addClass("editable"):this.$el.removeClass("editable"),this.delegateEvents(),this},remove:o.Extension.DependentCell.prototype.remove}),o}.apply(t,s))&&(e.exports=a)}).call(t,i("./node_modules/jquery/dist/jquery.js"))},"./pgadmin/static/js/browser/generate_url.js":function(e,t,i){"use strict";function n(e,t,i,n,s,o){var r="";return a.default.each(a.default.sortBy(a.default.pick(t,s),function(e){return e.priority}),function(e){r=r+"/"+encodeURI(e._id)}),r=o?r+"/"+o:r+"/",""+e+n+"/"+i+r}var s=i("./node_modules/underscore/underscore.js"),a=function(e){return e&&e.__esModule?e:{default:e}}(s);e.exports={generate_url:n}},"./pgadmin/static/js/check_node_visibility.js":function(e,t,i){"use strict";var n,s;n=[i("./node_modules/jquery/dist/jquery.js"),i("./node_modules/underscore/underscore.js"),i("./node_modules/underscore.string/index.js")],void 0!==(s=function(e,t,i){return function(e,n){if(t.isUndefined(n)||t.isNull(n))return!0;i.startsWith(n,"coll-")&&(n=n.replace("coll-",""));var s=["server_group","server","catalog_object_column"];if(t.indexOf(s,n)>=0)return!0;var a=e.get_preference("browser","show_node_"+n);return!a||a.value}}.apply(t,n))&&(e.exports=s)},"./pgadmin/static/js/gettext.js":function(e,t,i){"use strict";var n,s;n=[i("translations")],void 0!==(s=function(e){return window.gettext=function(t,i){var n,s=e[t]?e[t]:t,a=/([^%]*)%\(([^\)]+)\)s(.*)/,o=s;do{n=!1,o=o.replace(a,function(e,t,s,a){return n=!0,t+i[s]+a})}while(n);return o},window.gettext}.apply(t,n))&&(e.exports=s)},"./pgadmin/static/js/pgadmin.js":function(e,t,i){"use strict";var n,s,a,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(i){s=[],n=i,void 0!==(a="function"==typeof n?n.apply(t,s):n)&&(e.exports=a)}(function(){var e=window.pgAdmin=window.pgAdmin||{};!function(e,t,i){function n(e,t,n,a){n=n||"width";var o,l,d,p=(t.match(c)||[])[2],f="px"===p?1:u[p+"toPx"],h=/r?em/i;if(f||h.test(p)&&!a)e=f?e:"rem"===p?r:"fontSize"===n?e.parentNode||e:e,f=f||parseFloat(s(e,"fontSize")),d=parseFloat(t)*f;else{o=e.style,l=o[n];try{o[n]=t}catch(e){return 0}d=o[n]?parseFloat(s(e,n)):0,o[n]=l!==i?l:null}return d}function s(e,t){var i,o,r,l,u,p=/^top|bottom/,f=["paddingTop","paddingBottom","borderTop","borderBottom"],h=4;if(i=d?d(e)[t]:(o=e.style["pixel"+t.charAt(0).toUpperCase()+t.slice(1)])?o+"px":"fontSize"===t?n(e,"1em","left",1)+"px":e.currentStyle[t],"%"===(r=(i.match(c)||[])[2])&&a)if(p.test(t)){for(l=(u=e.parentNode||e).offsetHeight;h--;)l-=parseFloat(s(u,f[h]));i=parseFloat(i)/100*l+"px"}else i=n(e,i);else("auto"===i||r&&"px"!==r)&&d?i=0:r&&"px"!==r&&!d&&(i=n(e,i)+"px");return i}var a,o=t.createElement("test"),r=t.documentElement,l=t.defaultView,d=l&&l.getComputedStyle,c=/^(-?[\d+\.\-]+)([a-z]+|%)$/i,u={},p=[1/25.4,1/2.54,1/72,1/6],f=["mm","cm","pt","pc","in","mozmm"],h=6;for(r.appendChild(o),d&&(o.style.marginTop="1%",a="1%"===d(o).marginTop);h--;)u[f[h]+"toPx"]=p[h]?p[h]*u.inToPx:n(o,"1"+f[h]);r.removeChild(o),o=i,e.toPx=n}(e,window.document),e.natural_sort=function(e,t,i){var n,s,a=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,r=/(^[ ]*|[ ]*$)/g,l=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,d=/^0x[0-9a-f]+$/i,c=/^0/,u=function(e){return(i||{}).insensitive&&(""+e).toLowerCase()||""+e},p=u(e).replace(r,"")||"",f=u(t).replace(r,"")||"",h=p.replace(a,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),m=f.replace(a,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),g=parseInt(p.match(d))||1!==h.length&&p.match(l)&&Date.parse(p),v=parseInt(f.match(d))||g&&f.match(l)&&Date.parse(f)||null,b=(i||{}).desc?-1:1;if(v){if(g<v)return-1*b;if(g>v)return 1*b}for(var _=0,y=Math.max(h.length,m.length);_<y;_++){if(n=!(h[_]||"").match(c)&&parseFloat(h[_])||h[_]||0,s=!(m[_]||"").match(c)&&parseFloat(m[_])||m[_]||0,isNaN(n)!==isNaN(s))return(isNaN(n)?1:-1)*b;if((void 0===n?"undefined":o(n))!==(void 0===s?"undefined":o(s))&&(n+="",s+=""),n<s)return-1*b;if(n>s)return 1*b}return 0};var t={};return e.register_module=function(e,i){var n=t[e]=t[e]||{callback:null,modules:[]};if(n.callback&&"function"==typeof n.callback)try{n.callback(i)}catch(e){console&&console.warn&&(console.warn("Failed to load the module - "+JSON.stringify(i)+" from the browser."),e.stack&&console.warn(e.stack))}n.modules.push(i)},e.register_module_initializer=function(e,i){var n=t[e]=t[e]||{callback:null,modules:[]};if(null!==n.callback)return console&&console.warn&&console.warn("Entry callback is already defined for '"+e+"'!"),!1;if(n.callback=i,n.callback&&"function"==typeof n.callback)for(var s=0;s<n.modules.length;s++)try{n.callback(n.modules[s])}catch(t){console&&console.warn&&(console.warn("Failed to load the module - "+JSON.stringify(n.modules[s])+" from the "+e+"."),t.stack&&console.warn(t.stack))}return!0},e})},"./pgadmin/static/js/size_prettify.js":function(e,t,i){"use strict";var n,s;n=[],void 0!==(s=function(){return function(e){var t=Math.abs(e),i=0,n=["bytes","kB","MB","GB","TB","PB"];if(t<10240)return t+" "+n[i];do{t/=1024,i+=1}while(t>10239);return Math.round(t)+" "+n[i]}}.apply(t,n))&&(e.exports=s)},"./pgadmin/static/js/sqleditor_utils.js":function(e,t,i){"use strict";var n,s;n=[i("./node_modules/jquery/dist/jquery.js")],void 0!==(s=function(e){return{epicRandomString:function(e){for(var t=[],i="0123456789abcdef",n=0;n<36;n++)t[n]=i.substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]=i.substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-",t.join("").replace(/-/g,"").substr(0,e)},getHash:function(e){for(var t=0,i=e.length,n=0;n<i;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t},calculateColumnWidth:function(t){e("body").append('<span id="pg_text" style="visibility: hidden;">'+t+"</span>");var i=e("#pg_text").width()+23;return e("#pg_text").remove(),i},capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}}}.apply(t,n))&&(e.exports=s)},"./pgadmin/static/js/url_for.js":function(e,t,i){"use strict";var n,s;n=[i("pgadmin.browser.endpoints")],void 0!==(s=function(e){return function(t,i){var n=e[t],s=/([<])([^:^>]*:)?([^>]+)([>])/g,a=n;return n?a=a.replace(s,function(e,t,n,s){return s in i?i[s]:e}):n}}.apply(t,n))&&(e.exports=s)},"./pgadmin/static/scss/pgadmin.scss":function(e,t){},"./pgadmin/static/vendor/webcabin-docker/Build/wcDocker.js":function(e,t,i){e.exports=i("dll-reference vendor")("./pgadmin/static/vendor/webcabin-docker/Build/wcDocker.js")},4:function(e,t,i){e.exports=i},"dll-reference vendor":function(t,i){t.exports=e},"pgadmin.browser.endpoints":function(e,i){e.exports=t},"pgadmin.browser.messages":function(e,t){e.exports=a},"pgadmin.browser.utils":function(e,t){e.exports=n},"sources/generated/codemirror":function(e,t){e.exports=s},translations:function(e,t){e.exports=i}})});